---
slug: /intro
sidebar_label: 'Что такое ClickHouse?'
description: 'ClickHouse® — это столбцово-ориентированная система управления базами данных (СУБД) SQL для онлайн-аналитической обработки (OLAP). Она доступна как в виде программного обеспечения с открытым исходным кодом, так и в облачном предложении.'
title: 'Что такое ClickHouse?'
---

import column_example from '@site/static/images/column-oriented-example-query.png';
import row_orientated from '@site/static/images/row-oriented.gif';
import column_orientated from '@site/static/images/column-oriented.gif';
import Image from '@theme/IdealImage';

ClickHouse® — это высокопроизводительная, столбцово-ориентированная система управления базами данных (СУБД) SQL для онлайн-аналитической обработки (OLAP). Она доступна как в виде [программного обеспечения с открытым исходным кодом](https://github.com/ClickHouse/ClickHouse), так и в виде [облачного предложения](https://clickhouse.com/cloud).

## Что такое аналитика? {#what-are-analytics}

Аналитика, также известная как OLAP (Online Analytical Processing), относится к SQL-запросам с комплексными вычислениями (например, агрегациями, обработкой строк, арифметикой) над массивами данных.

В отличие от транзакционных запросов (или OLTP, Online Transaction Processing), которые читают и записывают всего несколько строк за запрос и, следовательно, завершаются за миллисекунды, аналитические запросы регулярно обрабатывают миллиарды и триллионы строк.

Во многих случаях [аналитические запросы должны быть "в реальном времени"](https://clickhouse.com/engineering-resources/what-is-real-time-analytics), т.е. возвращать результат менее чем за одну секунду.

## Строково-ориентированное vs. столбцово-ориентированное хранение {#row-oriented-vs-column-oriented-storage}

Такой уровень производительности можно достичь только с правильной "ориентацией" данных.

Базы данных хранят данные либо [строково-ориентировано, либо столбцово-ориентировано](https://clickhouse.com/engineering-resources/what-is-columnar-database).

В строково-ориентированной базе данных последовательные строки таблицы хранятся друг за другом. Этот макет позволяет быстро извлекать строки, так как значения колонок каждой строки хранятся вместе.

ClickHouse — это столбцово-ориентированная база данных. В таких системах таблицы хранятся как коллекция колонок, т.е. значения каждой колонки хранятся последовательности друг за другом. Этот макет затрудняет восстановление отдельных строк (так как теперь между значениями строк есть промежутки), но операции с колонками, такие как фильтры или агрегация, становятся гораздо быстрее, чем в строково-ориентированной базе данных.

Разницу лучше объяснить с помощью примера запроса, выполняемого на 100 миллионах строк [анонимизированных веб-аналитических данных из реального мира](/getting-started/example-datasets/metrica):

```sql
SELECT MobilePhoneModel, COUNT() AS c
FROM metrica.hits
WHERE
      RegionID = 229
  AND EventDate >= '2013-07-01'
  AND EventDate <= '2013-07-31'
  AND MobilePhone != 0
  AND MobilePhoneModel not in ['', 'iPad']
GROUP BY MobilePhoneModel
ORDER BY c DESC
LIMIT 8;
```

Вы можете [выполнить этот запрос в ClickHouse SQL Playground](https://sql.clickhouse.com?query=U0VMRUNUIE1vYmlsZVBob25lTW9kZWwsIENPVU5UKCkgQVMgYyAKRlJPTSBtZXRyaWNhLmhpdHMgCldIRVJFIAogICAgICBSZWdpb25JRCA9IDIyOSAKICBBTkQgRXZlbnREYXRlID49ICcyMDEzLTA3LTAxJyAKICBBTkQgRXZlbnREYXRlIDw9ICcyMDEzLTA3LTMxJyAKICBBTkQgTW9iaWxlUGhvbmUgIT0gMCAKICBBTkQgTW9iaWxlUGhvbmVNb2RlbCBub3QgaW4gWycnLCAnaVBhZCddIApHUk9VUCBCWSBNb2JpbGVQaG9uZU1vZGVsCk9SREVSIEJZIGMgREVTQyAKTElNSVQgODs&chart=eyJ0eXBlIjoicGllIiwiY29uZmlnIjp7InhheGlzIjoiTW9iaWxlUGhvbmVNb2RlbCIsInlheGlzIjoiYyJ9fQ&run_query=true), который выбирает и фильтрует [всего несколько из более чем 100](https://sql.clickhouse.com/?query=U0VMRUNUIG5hbWUKRlJPTSBzeXN0ZW0uY29sdW1ucwpXSEVSRSBkYXRhYmFzZSA9ICdtZXRyaWNhJyBBTkQgdGFibGUgPSAnaGl0cyc7&tab=results&run_query=true) существующих колонок, возвращая результат менее чем за миллисекунды:

<Image img={column_example} alt="Пример запроса в столбцово-ориентированной базе данных" size="lg"/>

Как видите в разделе статистики на вышеуказанном диаграмме, запрос обработал 100 миллионов строк за 92 миллисекунды, с пропускной способностью около 300 миллионов строк или чуть менее 7 ГБ в секунду.

**Строково-ориентированная СУБД**

В строково-ориентированной базе данных, даже если запрос выше обрабатывает всего несколько из существующих колонок, системе все равно требуется загрузить данные из других существующих колонок с диска в память. Причина этого заключается в том, что данные хранятся на диске в блоках, называемых [блоками](https://en.wikipedia.org/wiki/Block_(data_storage)) (обычно фиксированного размера, например, 4 КБ или 8 КБ). Блоки — это самые маленькие единицы данных, считываемые с диска в память. Когда приложение или база данных запрашивает данные, подсистема ввода-вывода диска операционной системы считывает необходимые блоки с диска. Даже если нужна только часть блока, весь блок считывается в память (это обусловлено конструкцией диска и файловой системы):

<Image img={row_orientated} alt="Структура строково-ориентированной базы данных" size="lg"/>

**Столбцово-ориентированная СУБД**

Поскольку значения каждой колонки хранятся последовательно друг за другом на диске, при выполнении вышеуказанного запроса не загружаются ненужные данные. Поскольку блочное хранение и передача с диска в память соответствуют шаблону доступа к данным аналитических запросов, считываются только те колонки, которые необходимы для запроса, избегая ненужного ввода-вывода для неиспользуемых данных. Это [значительно быстрее](https://benchmark.clickhouse.com/) по сравнению со строковым хранением, в котором считываются целые строки (включая нерелевантные колонки):

<Image img={column_orientated} alt="Структура столбцово-ориентированной базы данных" size="lg"/>

## Репликация данных и целостность {#data-replication-and-integrity}

ClickHouse использует асинхронную репликацию с несколькими мастерами, чтобы обеспечить хранение данных с избыточностью на нескольких узлах. После записи в любую доступную реплику все остальные реплики в фоновом режиме получают свою копию. Система поддерживает идентичные данные на разных репликах. Восстановление после большинства сбоев происходит автоматически или полуавтоматически в сложных случаях.

## Контроль доступа на основе ролей {#role-based-access-control}

ClickHouse реализует управление учетными записями пользователей с использованием SQL-запросов и позволяет настраивать контроль доступа на основе ролей, подобно тому, что можно найти в стандарте ANSI SQL и популярных системах управления реляционными базами данных.

## Поддержка SQL {#sql-support}

ClickHouse поддерживает [декларативный язык запросов, основанный на SQL](/sql-reference), который во многих случаях идентичен стандарту ANSI SQL. Поддерживаемые конструкции запросов включают [GROUP BY](/sql-reference/statements/select/group-by), [ORDER BY](/sql-reference/statements/select/order-by), подзапросы в [FROM](/sql-reference/statements/select/from), [JOIN](/sql-reference/statements/select/join), оператор [IN](/sql-reference/operators/in), [оконные функции](/sql-reference/window-functions) и скалярные подзапросы.

## Приблизительные вычисления {#approximate-calculation}

ClickHouse предлагает способы компрометации точности для повышения производительности. Например, некоторые из его агрегатных функций вычисляют количество уникальных значений, медиану и квантили приблизительно. Также запросы могут выполняться по образцу данных, чтобы быстро вычислить приблизительный результат. Наконец, агрегирования могут выполняться с ограниченным количеством ключей вместо всех ключей. В зависимости от того, насколько искажена распределенность ключей, это может дать достаточно точный результат, использующий гораздо меньше ресурсов, чем точное вычисление.

## Адаптивные алгоритмы соединения {#adaptive-join-algorithms}

ClickHouse выбирает алгоритм соединения адаптивно, начиная с быстрых хеш-соединений и переходя к объединительным соединениям, если есть более одной большой таблицы.

## Высокая производительность запросов {#superior-query-performance}

ClickHouse хорошо известен своей чрезвычайно высокой производительностью запросов. Чтобы узнать, почему ClickHouse такой быстрый, смотрите [Почему ClickHouse быстрый?](/concepts/why-clickhouse-is-so-fast.md).
