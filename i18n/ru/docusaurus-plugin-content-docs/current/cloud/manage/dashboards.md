---
sidebar_label: 'Панели мониторинга'
slug: /cloud/manage/dashboards
title: 'Панели мониторинга'
description: 'Функция панелей мониторинга в SQL Console позволяет собирать и делиться визуализациями из сохраненных запросов.'
---

import BetaBadge from '@theme/badges/BetaBadge';
import Image from '@theme/IdealImage';
import dashboards_2 from '@site/static/images/cloud/dashboards/2_dashboards.png';
import dashboards_3 from '@site/static/images/cloud/dashboards/3_dashboards.png';
import dashboards_4 from '@site/static/images/cloud/dashboards/4_dashboards.png';
import dashboards_5 from '@site/static/images/cloud/dashboards/5_dashboards.png';
import dashboards_6 from '@site/static/images/cloud/dashboards/6_dashboards.png';
import dashboards_7 from '@site/static/images/cloud/dashboards/7_dashboards.png';
import dashboards_8 from '@site/static/images/cloud/dashboards/8_dashboards.png';
import dashboards_9 from '@site/static/images/cloud/dashboards/9_dashboards.png';
import dashboards_10 from '@site/static/images/cloud/dashboards/10_dashboards.png';
import dashboards_11 from '@site/static/images/cloud/dashboards/11_dashboards.png';


# Панели мониторинга

<BetaBadge />

Функция панелей мониторинга в SQL Console позволяет собирать и делиться визуализациями из сохраненных запросов. Начните с сохранения и визуализации запросов, добавления визуализаций запросов в панель мониторинга и создания интерактивной панели с использованием параметров запросов.

## Основные концепции {#core-concepts}

### Обмен запросами {#query-sharing}

Чтобы поделиться вашей панелью мониторинга с коллегами, обязательно поделитесь основным сохраненным запросом. Для просмотра визуализации пользователи должны иметь как минимум доступ только для чтения к основному сохраненному запросу.

### Интерактивность {#interactivity}

Используйте [параметры запросов](/sql-reference/syntax#defining-and-using-query-parameters), чтобы сделать вашу панель мониторинга интерактивной. Например, вы можете добавить параметр запроса в условие `WHERE`, чтобы использовать его как фильтр.

Вы можете переключить ввод параметра запроса через боковую панель **Глобальные** фильтры, выбрав тип "фильтр" в настройках визуализации. Также вы можете переключить ввод параметра запроса, связав его с другим объектом (например, таблицей) на панели мониторинга. Пожалуйста, смотрите раздел “[настройка фильтра](/cloud/manage/dashboards#configure-a-filter)” в руководстве по быстрому началу ниже.

## Быстрый старт {#quick-start}

Давайте создадим панель мониторинга для мониторинга нашего сервиса ClickHouse с использованием системной таблицы [query_log](/operations/system-tables/query_log).

## Быстрый старт {#quick-start-1}

### Создание сохраненного запроса {#create-a-saved-query}

Если у вас уже есть сохраненные запросы для визуализации, вы можете пропустить этот шаг.

Откройте новую вкладку запроса. Давайте напишем запрос для подсчета объема запросов по дням на сервисе с использованием системных таблиц ClickHouse:

<Image img={dashboards_2} size="md" alt="Создание сохраненного запроса" border/>

Мы можем просмотреть результаты запроса в табличном формате или начать создавать визуализации из графического представления. На следующем шаге мы сохраним запрос как `queries over time`:

<Image img={dashboards_3} size="md" alt="Сохранить запрос" border/>

Больше документации о сохраненных запросах можно найти в разделе [Сохранение запроса](/cloud/get-started/sql-console#saving-a-query).

Мы можем создать и сохранить еще один запрос, `query count by query kind`, чтобы подсчитать количество запросов по видам запросов. Вот визуализация данных в виде столбчатой диаграммы в SQL консоли.

<Image img={dashboards_4} size="md" alt="Визуализация результатов запроса в виде столбчатой диаграммы" border/>

Теперь, когда у нас есть два запроса, давайте создадим панель мониторинга, чтобы визуализировать и собрать эти запросы.

### Создание панели мониторинга {#create-a-dashboard}

Перейдите в панель Панели мониторинга и нажмите “Создать новую панель”. После того как вы зададите имя, вы успешно создадите свою первую панель мониторинга!

<Image img={dashboards_5} size="md" alt="Создание новой панели мониторинга" border/>

### Добавление визуализации {#add-a-visualization}

Есть два сохраненных запроса, `queries over time` и `query count by query kind`. Давайте визуализируем первый в виде линейной диаграммы. Дайте своей визуализации заголовок и подзаголовок, и выберите запрос для визуализации. Затем выберите тип диаграммы “Линия” и задайте оси x и y.

<Image img={dashboards_6} size="md" alt="Добавить визуализацию" border/>

Здесь также можно внести дополнительные стилистические изменения - такие как форматирование чисел, расположение легенды и подписи осей.

Затем визуализируем второй запрос в виде таблицы и разместим его под линейной диаграммой.

<Image img={dashboards_7} size="md" alt="Визуализировать результаты запроса в виде таблицы" border/>

Вы создали свою первую панель мониторинга, визуализировав два сохраненных запроса!

### Настройка фильтра {#configure-a-filter}

Давайте сделаем эту панель мониторинга интерактивной, добавив фильтр по видам запросов, чтобы вы могли отображать только тренды, связанные с запросами Insert. Мы достигнем этой цели, используя [параметры запросов](/sql-reference/syntax#defining-and-using-query-parameters).

Нажмите на три точки рядом с линейной диаграммой и нажмите на кнопку карандаша рядом с запросом, чтобы открыть встроенный редактор запросов. Здесь мы можем редактировать основной сохраненный запрос непосредственно с панели мониторинга.

<Image img={dashboards_8} size="md" alt="Редактировать основной запрос" border/>

Теперь, когда нажимается желтая кнопка запуска запроса, вы увидите тот же запрос, что и раньше, отфильтрованный только по запросам Insert. Нажмите на кнопку сохранения, чтобы обновить запрос. Когда вы вернетесь к настройкам диаграммы, вы сможете отфильтровать линейную диаграмму.

Теперь, используя Глобальные фильтры на верхней панели, вы можете переключать фильтр, изменяя ввод.

<Image img={dashboards_9} size="md" alt="Настроить глобальные фильтры" border/>

Предположим, вы хотите связать фильтр линейной диаграммы с таблицей. Вы можете сделать это, вернувшись к настройкам визуализации и изменив источник значения параметра запроса query_kind на таблицу, выбрав колонку query_kind как поле для связывания.

<Image img={dashboards_10} size="md" alt="Изменение параметра запроса" border/>

Теперь вы можете управлять фильтром на линейной диаграмме непосредственно из таблицы по видам запросов, чтобы сделать вашу панель мониторинга интерактивной.

<Image img={dashboards_11} size="md" alt="Управление фильтром на линейной диаграмме" border/>
