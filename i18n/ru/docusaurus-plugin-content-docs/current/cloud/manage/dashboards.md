---
sidebar_label: 'Панели мониторинга'
slug: /cloud/manage/dashboards
title: 'Панели мониторинга'
description: 'Функция панелей мониторинга в SQL Console позволяет собирать и делиться визуализациями из сохраненных запросов.'
---

import BetaBadge from '@theme/badges/BetaBadge';
import Image from '@theme/IdealImage';
import dashboards_2 from '@site/static/images/cloud/dashboards/2_dashboards.png';
import dashboards_3 from '@site/static/images/cloud/dashboards/3_dashboards.png';
import dashboards_4 from '@site/static/images/cloud/dashboards/4_dashboards.png';
import dashboards_5 from '@site/static/images/cloud/dashboards/5_dashboards.png';
import dashboards_6 from '@site/static/images/cloud/dashboards/6_dashboards.png';
import dashboards_7 from '@site/static/images/cloud/dashboards/7_dashboards.png';
import dashboards_8 from '@site/static/images/cloud/dashboards/8_dashboards.png';
import dashboards_9 from '@site/static/images/cloud/dashboards/9_dashboards.png';
import dashboards_10 from '@site/static/images/cloud/dashboards/10_dashboards.png';
import dashboards_11 from '@site/static/images/cloud/dashboards/11_dashboards.png';


# Панели мониторинга

<BetaBadge />

Функция панелей мониторинга в SQL Console позволяет собирать и делиться визуализациями из сохраненных запросов. Начните с сохранения и визуализации запросов, добавления визуализаций запросов в панель мониторинга и создания интерактивной панели с использованием параметров запросов.

## Основные концепции {#core-concepts}

### Обмен запросами {#query-sharing}

Чтобы поделиться панелью мониторинга с коллегами, убедитесь, что вы делитесь основным сохраненным запросом. Для просмотра визуализации у пользователей должны быть, по крайней мере, права только на чтение к основному сохраненному запросу.

### Интерактивность {#interactivity}

Используйте [параметры запросов](/sql-reference/syntax#defining-and-using-query-parameters), чтобы сделать вашу панель мониторинга интерактивной. Например, вы можете добавить параметр запроса в предложение `WHERE`, чтобы он выполнял функцию фильтра.

Вы можете переключать ввод параметра запроса через панель глобальных фильтров, выбрав тип "фильтр" в настройках визуализации. Вы также можете переключать ввод параметра запроса, связав его с другим объектом (например, таблицей) на панели мониторинга. Пожалуйста, смотрите раздел “[настройка фильтра](/cloud/manage/dashboards#configure-a-filter)” в руководстве по быстрому старту ниже.

## Быстрый старт {#quick-start}

Давайте создадим панель мониторинга для мониторинга нашего сервиса ClickHouse, используя системную таблицу [query_log](/operations/system-tables/query_log).

## Быстрый старт {#quick-start-1}

### Создание сохраненного запроса {#create-a-saved-query}

Если у вас уже есть сохраненные запросы для визуализации, вы можете пропустить этот шаг.

Откройте новую вкладку запроса. Давайте напишем запрос для подсчета объема запросов по дням на сервисе, используя системные таблицы ClickHouse:

<Image img={dashboards_2} size="md" alt="Создание сохраненного запроса" border/>

Мы можем просмотреть результаты запроса в табличном формате или начать создавать визуализации из графического представления. На следующем шаге мы сохраним запрос как `запросы по времени`:

<Image img={dashboards_3} size="md" alt="Сохранение запроса" border/>

Дополнительную документацию о сохраненных запросах можно найти в разделе [Сохранение запроса](/cloud/get-started/sql-console#saving-a-query).

Мы можем создать и сохранить еще один запрос, `количество запросов по типу запроса`, чтобы подсчитать количество запросов по типу запроса. Вот визуализация данных в виде столбчатой диаграммы в SQL console.

<Image img={dashboards_4} size="md" alt="Визуализация результатов запроса в виде столбчатой диаграммы" border/>

Теперь, когда у нас есть два запроса, давайте создадим панель мониторинга, чтобы визуализировать и собрать эти запросы.

### Создание панели мониторинга {#create-a-dashboard}

Перейдите в панель Панели мониторинга и нажмите “Новая панель мониторинга”. После того как вы присвоите имя, вы успешно создадите свою первую панель мониторинга!

<Image img={dashboards_5} size="md" alt="Создание новой панели мониторинга" border/>

### Добавление визуализации {#add-a-visualization}

У нас есть два сохраненных запроса: `запросы по времени` и `количество запросов по типу запроса`. Давайте визуализируем первый в виде линейной диаграммы. Дайте вашей визуализации название и подзаголовок, затем выберите запрос для визуализации. Далее выберите тип диаграммы “Линия” и назначьте оси x и y.

<Image img={dashboards_6} size="md" alt="Добавить визуализацию" border/>

Здесь также можно внести дополнительные стилистические изменения - такие как форматирование чисел, расположение легенды и подписи осей.

Теперь давайте визуализируем второй запрос в виде таблицы и поместим ее под линейной диаграммой.

<Image img={dashboards_7} size="md" alt="Визуализировать результаты запроса в виде таблицы" border/>

Вы создали свою первую панель мониторинга, визуализировав два сохраненных запроса!

### Настройка фильтра {#configure-a-filter}

Давайте сделаем эту панель интерактивной, добавив фильтр по типу запроса, чтобы вы могли отображать только тренды, связанные с Вставками. Мы выполним эту задачу, используя [параметры запросов](/sql-reference/syntax#defining-and-using-query-parameters).

Нажмите на три точки рядом с линейной диаграммой и нажмите кнопку с карандашом рядом с запросом, чтобы открыть встроенный редактор запросов. Здесь мы можем редактировать основной сохраненный запрос непосредственно из панели мониторинга.

<Image img={dashboards_8} size="md" alt="Редактирование основного запроса" border/>

Теперь, когда будет нажата желтая кнопка запуска запроса, вы увидите тот же запрос, что и раньше, отфильтрованный по только вставкам. Нажмите кнопку сохранения, чтобы обновить запрос. Когда вы вернетесь к настройкам диаграммы, вы сможете отфильтровать линейную диаграмму.

Теперь, используя Глобальные Фильтры на верхней панели, вы можете переключать фильтр, изменяя ввод.

<Image img={dashboards_9} size="md" alt="Настройка глобальных фильтров" border/>

Предположим, вы хотите связать фильтр линейной диаграммы с таблицей. Вы можете сделать это, вернувшись к настройкам визуализации и изменив источник значения параметра запроса `query_kind` на таблицу и выбрав столбец `query_kind` как поле для связи.

<Image img={dashboards_10} size="md" alt="Изменение параметра запроса" border/>

Теперь вы можете управлять фильтром на линейной диаграмме непосредственно из таблицы запросов по типу запросов, чтобы сделать вашу панель интерактивной.

<Image img={dashboards_11} size="md" alt="Управление фильтром на линейной диаграмме" border/>

