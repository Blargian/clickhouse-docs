---
sidebar_label: 'Сервисы'
title: 'Сервисы'
slug: /cloud/manage/api/services-api-reference
description: 'Документация по API Cloud для сервисов'
---
## Список сервисов организации

Возвращает список всех сервисов в организации.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕЛО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, а разработки имеют фиксированный размер. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньше или равно 360 для неоплаченных сервисов или 708 для оплаченных. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и меньше или равно 120* для неоплаченных сервисов или 236* для оплаченных. * - максимальный размер реплики зависит от доступности оборудования облачного провайдера в выбранном вами регионе. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть между 2 и 20 для первого сервиса в хранилище. Сервисы, создаваемые в существующем хранилище, могут иметь количество реплик не менее 1. Дополнительные ограничения могут применяться на основе уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может уменьшаться до нуля, когда неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования при шифровании диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных ID частных конечных точек, которые можно подключить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным сервисом в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только в режиме чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, также требуются параметры minReplicaMemoryGb и maxReplicaGb, со значениями среди следующих размеров: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Создать новый сервис

Создает новый сервис в организации и возвращает текущее состояние сервиса и пароль для доступа к сервису. Сервис запускается асинхронно.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, которая будет владеть сервисом. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| tier | string | УСТАРЕЛО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, а разработки имеют фиксированный размер. Сервисы Azure не поддерживают уровень разработки. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| minTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньше или равно 360 для неоплаченных сервисов или 708 для оплаченных. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб.  Должно быть кратным 4 и меньше или равно 120* для неоплаченных сервисов или 236* для оплаченных. * - максимальный размер реплики зависит от доступности оборудования облачного провайдера в выбранном вами регионе. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть между 2 и 20 для первого сервиса в хранилище. Сервисы, создаваемые в существующем хранилище, могут иметь количество реплик не менее 1. Дополнительные ограничения могут применяться на основе уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может уменьшаться до нуля, когда неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только в режиме чтения, если указан dataWarehouseId. | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| backupId | string | Необязательный ID резервной копии, используемый в качестве начального состояния для нового сервиса. При использовании регион и уровень нового экземпляра должны совпадать со значениями оригинального экземпляра. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования при шифровании диска | 
| privateEndpointIds | array | Список частных конечных точек | 
| privatePreviewTermsChecked | boolean | Принять условия частного предварительного просмотра. Это необходимо только при создании первого сервиса в организации в случае частного предварительного просмотра. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, также требуются параметры minReplicaMemoryGb и maxReplicaGb, со значениями среди следующих размеров: 28, 60, 124, 188, 252, 380. | 
| endpoints | array | Список конечных точек сервиса для включения или отключения |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| service.id | uuid | Уникальный ID сервиса. | 
| service.name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| service.provider | string | Облачный провайдер | 
| service.region | string | Регион сервиса. | 
| service.state | string | Текущее состояние сервиса. | 
| service.endpoints | array | Список всех конечных точек сервиса. | 
| service.tier | string | УСТАРЕЛО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, а разработки имеют фиксированный размер. Сервисы Azure не поддерживают уровень разработки. | 
| service.minTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| service.maxTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньше или равно 360 для неоплаченных сервисов или 708 для оплаченных. | 
| service.minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| service.maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб.  Должно быть кратным 4 и меньше или равно 120* для неоплаченных сервисов или 236* для оплаченных. * - максимальный размер реплики зависит от доступности оборудования облачного провайдера в выбранном вами регионе. | 
| service.numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть между 2 и 20 для первого сервиса в хранилище. Сервисы, создаваемые в существующем хранилище, могут иметь количество реплик не менее 1. Дополнительные ограничения могут применяться на основе уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| service.idleScaling | boolean | Если установлено в true, сервис может уменьшаться до нуля, когда неактивен. По умолчанию true. | 
| service.idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| service.ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| service.createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| service.encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| service.encryptionAssumedRoleIdentifier | string | Необязательная роль для использования при шифровании диска | 
| service.iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| service.privateEndpointIds | array | Список частных конечных точек | 
| service.availablePrivateEndpointIds | array | Список доступных ID частных конечных точек, которые можно подключить к сервису | 
| service.dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| service.isPrimary | boolean | True, если этот сервис является основным сервисом в хранилище данных | 
| service.isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только в режиме чтения, если указан dataWarehouseId. | 
| service.releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| service.byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, также требуются параметры minReplicaMemoryGb и maxReplicaGb, со значениями среди следующих размеров: 28, 60, 124, 188, 252, 380. | 
| password | string | Пароль для вновь созданного сервиса. |
#### Пример ответа

```
{
  "service": {
    "id": "uuid",
    "name": "string",
    "provider": "string",
    "region": "string",
    "state": "string",
    "endpoints": "Array",
    "tier": "string",
    "minTotalMemoryGb": 0,
    "maxTotalMemoryGb": 0,
    "minReplicaMemoryGb": 0,
    "maxReplicaMemoryGb": 0,
    "numReplicas": 0,
    "idleScaling": "boolean",
    "idleTimeoutMinutes": 0,
    "ipAccessList": "Array",
    "createdAt": "date-time",
    "encryptionKey": "string",
    "encryptionAssumedRoleIdentifier": "string",
    "iamRole": "string",
    "privateEndpointIds": "Array",
    "availablePrivateEndpointIds": "Array",
    "dataWarehouseId": "string",
    "isPrimary": "boolean",
    "isReadonly": "boolean",
    "releaseChannel": "string",
    "byocId": "string"
  },
  "password": "string"
}
```
## Получить информацию о сервисе

Возвращает сервис, который принадлежит организации

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID запрашиваемого сервиса. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕЛО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, а разработки имеют фиксированный размер. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньше или равно 360 для неоплаченных сервисов или 708 для оплаченных. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб.  Должно быть кратным 4 и меньше или равно 120* для неоплаченных сервисов или 236* для оплаченных. * - максимальный размер реплики зависит от доступности оборудования облачного провайдера в выбранном вами регионе. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть между 2 и 20 для первого сервиса в хранилище. Сервисы, создаваемые в существующем хранилище, могут иметь количество реплик не менее 1. Дополнительные ограничения могут применяться на основе уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может уменьшаться до нуля, когда неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования при шифровании диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных ID частных конечных точек, которые можно подключить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным сервисом в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только в режиме чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, также требуются параметры minReplicaMemoryGb и maxReplicaGb, со значениями среди следующих размеров: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Обновить основные данные о сервисе

Обновляет основные данные о сервисе, такие как имя сервиса или список доступа по IP.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для обновления. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| ipAccessList |  |  | 
| privateEndpointIds |  |  | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| endpoints | array | Список конечных точек сервиса для изменения |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕЛО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, а разработки имеют фиксированный размер. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕЛО - неточная информация для сервисов с ненастандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньше или равно 360 для неоплаченных сервисов или 708 для оплаченных. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб.  Должно быть кратным 4 и меньше или равно 120* для неоплаченных сервисов или 236* для оплаченных. * - максимальный размер реплики зависит от доступности оборудования облачного провайдера в выбранном вами регионе. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть между 2 и 20 для первого сервиса в хранилище. Сервисы, создаваемые в существующем хранилище, могут иметь количество реплик не менее 1. Дополнительные ограничения могут применяться на основе уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может уменьшаться до нуля, когда неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования при шифровании диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных ID частных конечных точек, которые можно подключить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным сервисом в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только в режиме чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с большим риском ошибок. Эта функция доступна только для производственных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, также требуются параметры minReplicaMemoryGb и maxReplicaGb, со значениями среди следующих размеров: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Удалить сервис

Удаляет сервис. Сервис должен быть в состоянии остановки и удаляется асинхронно после этого вызова метода.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для удаления. |
## Получить конфигурацию частной конечной точки

Информация, необходимая для настройки частной конечной точки

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/privateEndpointConfig` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| endpointServiceId | string | Уникальный идентификатор интерфейсной конечной точки, созданной вами в вашем VPC с ресурсом AWS (Имя сервиса), GCP (Целевой сервис) или AZURE (Служба частной ссылки) | 
| privateDnsHostname | string | Частное DNS-имя VPC, которое вы создали |
#### Пример ответа

```
{
  "endpointServiceId": "string",
  "privateDnsHostname": "string"
}
```
## Получить конечную точку запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой, чтобы включить ее.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | ID конечной точки запроса сервиса | 
| openApiKeys | array | Список OpenAPI ключей, которые могут получить доступ к конечной точке запроса сервиса | 
| roles | array | Список ролей, которые могут получить доступ к конечной точке запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |
#### Пример ответа

```
{
  "id": "string",
  "openApiKeys": "Array",
  "roles": "Array",
  "allowedOrigins": "string"
}
```
## Удалить конечную точку запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой, чтобы включить ее.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |
## Upsert конечной точки запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой, чтобы включить ее.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| roles | array | Роли | 
| openApiKeys | array | Версия конечной точки запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | ID конечной точки запроса сервиса | 
| openApiKeys | array | Список OpenAPI ключей, которые могут получить доступ к конечной точке запроса сервиса | 
| roles | array | Список ролей, которые могут получить доступ к конечной точке запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |
#### Пример ответа

```
{
  "id": "string",
  "openApiKeys": "Array",
  "roles": "Array",
  "allowedOrigins": "string"
}
```
## Обновить состояние сервиса

Запускает или останавливает сервис

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/state` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для обновления состояния. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| command | string | Команда для изменения состояния: 'start', 'stop'. |
### Ответ
```
```yaml
title: 'Схема ответа'
sidebar_label: 'Схема ответа'
keywords: ['response', 'schema']
description: 'Схема ответа для службы'
```

#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор службы. | 
| name | string | Имя службы. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион службы. | 
| state | string | Текущая состояние службы. | 
| endpoints | array | Список всех конечных точек службы. | 
| tier | string | УСТАРЕВШИЙ для организационных уровней BASIC, SCALE и ENTERPRISE. Уровень службы: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Услуги производственного уровня масштабируются, услуги разработки имеют фиксированный размер. Услуги Azure не поддерживают уровень разработки | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и меньше или равно 360 для бесплатных услуг или 708 для платных услуг. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и меньше или равно 120* для бесплатных услуг или 236* для платных услуг.* - максимальный размер реплики зависит от доступности аппаратного обеспечения у облачного провайдера в выбранном вами регионе. | 
| numReplicas | number | Количество реплик для службы. Количество реплик должно быть от 2 до 20 для первой службы в хранилище данных. Услуги, которые создаются в существующем хранилище данных, могут иметь количество реплик как минимум 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, службе разрешается масштабироваться до нуля, когда она простаивает. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к службе | 
| createdAt | date-time | Время создания службы. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM-роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые могут быть подключены к службе | 
| dataWarehouseId | string | Хранилище данных, содержащее эту службу | 
| isPrimary | boolean | True, если эта служба является основной службой в хранилище данных | 
| isReadonly | boolean | True, если эта служба только для чтения. Она может быть только для чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они доступны. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для производственных служб. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, параметры minReplicaMemoryGb и maxReplicaGb также обязательны, со значениями, входящими в следующие размеры: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Обновить настройки автоматического масштабирования службы

Обновляет минимальные и максимальные ограничения общей памяти и поведения масштабирования в режиме простоя для службы. Настройки памяти доступны только для "производственных" служб и должны быть кратными 12 начиная с 24 Гб. Пожалуйста, свяжитесь с поддержкой, чтобы включить возможность настройки numReplicas.

| Method | Path |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/scaling` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы для обновления параметров масштабирования. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и меньше или равно 360 для бесплатных услуг или 708 для платных услуг. | 
| numReplicas | number | Количество реплик для службы. Количество реплик должно быть от 2 до 20 для первой службы в хранилище данных. Услуги, которые создаются в существующем хранилище данных, могут иметь количество реплик как минимум 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, службе разрешается масштабироваться до нуля, когда она простаивает. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор службы. | 
| name | string | Имя службы. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион службы. | 
| state | string | Текущая состояние службы. | 
| endpoints | array | Список всех конечных точек службы. | 
| tier | string | УСТАРЕВШИЙ для организационных уровней BASIC, SCALE и ENTERPRISE. Уровень службы: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Услуги производственного уровня масштабируются, услуги разработки имеют фиксированный размер. Услуги Azure не поддерживают уровень разработки | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и меньше или равно 360 для бесплатных услуг или 708 для платных услуг. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автоматического масштабирования в Гб. Должно быть кратным 4 и меньше или равно 120* для бесплатных услуг или 236* для платных услуг. | 
| numReplicas | number | Количество реплик для службы. Количество реплик должно быть от 2 до 20 для первой службы в хранилище данных. Услуги, которые создаются в существующем хранилище данных, могут иметь количество реплик как минимум 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, службе разрешается масштабироваться до нуля, когда она простаивает. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к службе | 
| createdAt | date-time | Время создания службы. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM-роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые могут быть подключены к службе | 
| dataWarehouseId | string | Хранилище данных, содержащее эту службу | 
| isPrimary | boolean | True, если эта служба является основной службой в хранилище данных | 
| isReadonly | boolean | True, если эта служба только для чтения. Она может быть только для чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они доступны. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для производственных служб. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, параметры minReplicaMemoryGb и maxReplicaGb также обязательны, со значениями, входящими в следующие размеры: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Обновить настройки автоматического масштабирования реплики службы

Обновляет минимальные и максимальные ограничения памяти на реплику и поведение масштабирования в режиме простоя для службы. Настройки памяти доступны только для "производственных" служб и должны быть кратными 4 начиная с 8 Гб. Пожалуйста, свяжитесь с поддержкой, чтобы включить возможность настройки numReplicas.

| Method | Path |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/replicaScaling` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы для обновления параметров масштабирования. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| minReplicaMemoryGb | number | Минимальная память для автоматического масштабирования в Гб для одной реплики. Доступно только для 'production' служб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная память для автоматического масштабирования в Гб для одной реплики. Доступно только для 'production' служб. Должно быть кратным 4 и меньше или равно 120 для бесплатных услуг или 236 для платных услуг. | 
| numReplicas | number | Количество реплик для службы. Количество реплик должно быть от 2 до 20 для первой службы в хранилище данных. Услуги, которые создаются в существующем хранилище данных, могут иметь количество реплик как минимум 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, службе разрешается масштабироваться до нуля, когда она простаивает. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор службы. | 
| name | string | Имя службы. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион службы. | 
| state | string | Текущая состояние службы. | 
| endpoints | array | Список всех конечных точек службы. | 
| tier | string | УСТАРЕВШИЙ для организационных уровней BASIC, SCALE и ENTERPRISE. Уровень службы: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Услуги производственного уровня масштабируются, услуги разработки имеют фиксированный размер. Услуги Azure не поддерживают уровень разработки | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Минимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для услуг с нестандартным количеством реплик. Максимальная память трех работников во время автоматического масштабирования в Гб. Доступно только для 'production' служб. Должно быть кратным 12 и меньше или равно 360 для бесплатных услуг или 708 для платных услуг. | 
| minReplicaMemoryGb | number | Минимальная память для автоматического масштабирования в Гб для одной реплики. Доступно только для 'production' служб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная память для автоматического масштабирования в Гб для одной реплики. Доступно только для 'production' служб. Должно быть кратным 4 и меньше или равно 120 для бесплатных услуг или 236 для платных услуг. | 
| numReplicas | number | Количество реплик для службы. Количество реплик должно быть от 2 до 20 для первой службы в хранилище данных. Услуги, которые создаются в существующем хранилище данных, могут иметь количество реплик как минимум 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, службе разрешается масштабироваться до нуля, когда она простаивает. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к службе | 
| createdAt | date-time | Время создания службы. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM-роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые могут быть подключены к службе | 
| dataWarehouseId | string | Хранилище данных, содержащее эту службу | 
| isPrimary | boolean | True, если эта служба является основной службой в хранилище данных | 
| isReadonly | boolean | True, если эта служба только для чтения. Она может быть только для чтения, если указан dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они доступны. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для производственных служб. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда параметр byocId указан, параметры minReplicaMemoryGb и maxReplicaGb также обязательны, со значениями, входящими в следующие размеры: 28, 60, 124, 188, 252, 380. |
#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```
## Обновить пароль службы

Устанавливает новый пароль для службы.

| Method | Path |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/password` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы для обновления пароля. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| newPasswordHash | string | Необязательный хеш пароля. Используется для предотвращения передачи пароля по сети. Если не предоставлен, создается новый пароль, который будет предоставлен в ответе. В противном случае используется этот хеш. Алгоритм: echo -n "yourpassword" | sha256sum | tr -d '-' | xxd -r -p | base64 | 
| newDoubleSha1Hash | string | Необязательный двойной хеш SHA1 пароля для протокола MySQL. Если newPasswordHash не предоставлен, этот ключ будет проигнорирован, и сгенерированный пароль будет использован. Алгоритм: echo -n "yourpassword" | sha1sum | tr -d '-' | xxd -r -p | sha1sum | tr -d '-' |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| password | string | Новый пароль службы. Предоставляется только если в запросе не было 'newPasswordHash' |
#### Пример ответа

```
{
  "password": "string"
}
```
## Создать частную конечную точку.

Создает новую частную конечную точку. Частная конечная точка будет ассоциироваться с этой службой и организацией.

| Method | Path |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/privateEndpoint` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор запрашиваемой организации. | 
| serviceId | uuid | Идентификатор запрашиваемой службы. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | string | Идентификатор частной конечной точки | 
| description | string | Описание частной конечной точки |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | string | Идентификатор частной конечной точки | 
| description | string | Описание частной конечной точки | 
| cloudProvider | string | Облачный провайдер, в котором расположена частная конечная точка | 
| region | string | Регион, в котором расположена частная конечная точка |
#### Пример ответа

```
{
  "id": "string",
  "description": "string",
  "cloudProvider": "string",
  "region": "string"
}
```
## Получить метрики prometheus

Возвращает метрики prometheus для службы.

| Method | Path |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/prometheus` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор запрашиваемой службы. | 
| filtered_metrics | boolean | Вернуть отфильтрованный список метрик Prometheus. |
## Список резервных копий службы

Возвращает список всех резервных копий для службы. Самые последние резервные копии идут первыми в списке.

| Method | Path |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backups` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей резервной копией. | 
| serviceId | uuid | Идентификатор службы, из которой была создана резервная копия. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор резервной копии. | 
| status | string | Статус резервной копии: 'done', 'error', 'in_progress'. | 
| serviceId | string | Имя  | 
| startedAt | date-time | Время начала резервного копирования. ISO-8601. | 
| finishedAt | date-time | Время завершения резервного копирования. ISO-8601. Доступно только для завершенных резервных копий | 
| sizeInBytes | number | Размер резервной копии в байтах. | 
| durationInSeconds | number | Время в секундах, затраченное на создание резервной копии. Если статус все еще in_progress, это время в секундах с момента начала резервного копирования до настоящего времени. | 
| type | string | Тип резервной копии ("full" или "incremental"). |
#### Пример ответа

```
{
  "id": "uuid",
  "status": "string",
  "serviceId": "string",
  "startedAt": "date-time",
  "finishedAt": "date-time",
  "sizeInBytes": 0,
  "durationInSeconds": 0,
  "type": "string"
}
```
## Получить детали резервной копии

Возвращает информацию о единственной резервной копии.

| Method | Path |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backups/{backupId}` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей резервной копией. | 
| serviceId | uuid | Идентификатор службы, из которой была создана резервная копия. | 
| backupId | uuid | Идентификатор запрашиваемой резервной копии. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор резервной копии. | 
| status | string | Статус резервной копии: 'done', 'error', 'in_progress'. | 
| serviceId | string | Имя  | 
| startedAt | date-time | Время начала резервного копирования. ISO-8601. | 
| finishedAt | date-time | Время завершения резервного копирования. ISO-8601. Доступно только для завершенных резервных копий | 
| sizeInBytes | number | Размер резервной копии в байтах. | 
| durationInSeconds | number | Время в секундах, затраченное на создание резервной копии. Если статус все еще in_progress, это время в секундах с момента начала резервного копирования до настоящего времени. | 
| type | string | Тип резервной копии ("full" или "incremental"). |
#### Пример ответа

```
{
  "id": "uuid",
  "status": "string",
  "serviceId": "string",
  "startedAt": "date-time",
  "finishedAt": "date-time",
  "sizeInBytes": 0,
  "durationInSeconds": 0,
  "type": "string"
}
```
## Получить конфигурацию резервного копирования службы

Возвращает конфигурацию резервного копирования службы.

| Method | Path |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backupConfiguration` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии доступны. | 
| backupStartTime | string | Время в формате ЧЧ:ММ, когда должны выполняться резервные копии (оценено в UTC). Когда определено, период резервного копирования сбрасывается на каждые 24 часа. |
#### Пример ответа

```
{
  "backupPeriodInHours": 0,
  "backupRetentionPeriodInHours": 0,
  "backupStartTime": "string"
}
```
## Обновить конфигурацию резервного копирования службы

Обновляет конфигурацию резервного копирования службы. Требуется роль AUTH ключа ADMIN. Установка свойств на значение null сбросит свойства на их значения по умолчанию.

| Method | Path |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/backupConfiguration` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии доступны. | 
| backupStartTime | string | Время в формате ЧЧ:ММ, когда должны выполняться резервные копии (оценено в UTC). Когда определено, период резервного копирования сбрасывается на каждые 24 часа. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии доступны. | 
| backupStartTime | string | Время в формате ЧЧ:ММ, когда должны выполняться резервные копии (оценено в UTC). Когда определено, период резервного копирования сбрасывается на каждые 24 часа. |
#### Пример ответа

```
{
  "backupPeriodInHours": 0,
  "backupRetentionPeriodInHours": 0,
  "backupStartTime": "string"
}
```
## Список ClickPipes

**Этот конечный пункт находится на этапе альфа и может подлежать изменению.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Возвращает список ClickPipes.

| Method | Path |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы, которой принадлежит ClickPipe. |
### Ответ
#### Схема ответа

| Name | Type | Description |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор службы, к которой принадлежит этот ClickPipe. | 
| name | string | Имя ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллелизма. Только для труб S3. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время MergeTree - единственный поддерживаемый движок. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа партиции. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Создать ClickPipe

**Этот конечный пункт находится на этапе альфа и может подлежать изменению.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Создает новый ClickPipe.

| Method | Path |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes` |
### Запрос
#### Параметры пути

| Name | Type | Description |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей службой. | 
| serviceId | uuid | Идентификатор службы для создания ClickPipe. |
### Параметры тела

| Name | Type | Description |
| :--- | :--- | :---------- |
| name | string | Имя ClickPipe. | 
| description | string | Описание ClickPipe. | 
| source |  |  | 
| destination |  |  | 
| fieldMappings | array | Соответствия полей ClickPipe. |
```
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущая состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных потоков. Только для S3 труб. Если установлено в 0, параллельность авто-масштабируется на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Таблица управляется ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время поддерживается только MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа раздела. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Отображение полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Получить ClickPipe

**Этот конечный пункт находится на этапе альфа-версии и может быть подвержен изменениям.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Возвращает указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит ClickPipe. | 
| clickPipeId | uuid | Идентификатор запрашиваемого ClickPipe. |
### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных потоков. Только для S3 труб. Если установлено в 0, параллельность авто-масштабируется на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Таблица управляется ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время поддерживается только MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа раздела. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Отображение полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Обновить ClickPipe

**Этот конечный пункт находится на этапе альфа-версии и может быть подвержен изменениям.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Обновите указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, для которого создается ClickPipe. | 
| clickPipeId | uuid | Идентификатор запрашиваемого ClickPipe. |
### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| source |  |  | 
| destination |  |  | 
| fieldMappings | array | Отображение полей ClickPipe. Это не обновит схему таблицы, а только конфигурацию ClickPipe. |
### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущая состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных потоков. Только для S3 труб. Если установлено в 0, параллельность авто-масштабируется на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Таблица управляется ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время поддерживается только MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа раздела. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Отображение полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Удалить ClickPipe

**Этот конечный пункт находится на этапе альфа-версии и может быть подвержен изменениям.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Удалите указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для удаления. |
## Масштабирование ClickPipe

**Этот конечный пункт находится на этапе альфа-версии и может быть подвержен изменениям.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Измените настройки масштабирования для указанного ClickPipe.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}/scaling` |
### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для обновления настроек масштабирования. |
### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| replicas | integer | Количество реплик для масштабирования. Используется для масштабирования Kafka труб. |
### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущая состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных потоков. Только для S3 труб. Если установлено в 0, параллельность авто-масштабируется на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Таблица управляется ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время поддерживается только MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа раздела. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Отображение полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Обновить состояние ClickPipe

**Этот конечный пункт находится на этапе альфа-версии и может быть подвержен изменениям.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Запустить или остановить ClickPipe. Остановка ClickPipe остановит процесс поступления данных из любого состояния. Запуск разрешен для ClickPipes в состоянии "Остановлен" или с состоянием "Ошибка".

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}/state` |
### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для обновления состояния. |
### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| command | string | Команда для изменения состояния: 'start', 'stop'. |
### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных потоков. Только для S3 труб. Если установлено в 0, параллельность авто-масштабируется на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Таблица управляется ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время поддерживается только MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список столбцов. | 
| destination.tableDefinition.partitionBy | string | SQL-выражение ключа раздела. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL-выражения. | 
| destination.columns | array | Столбцы целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Отображение полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
