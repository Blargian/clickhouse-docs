---
slug: /about-us/distinctive-features
sidebar_label: 'Почему ClickHouse уникален?'
sidebar_position: 50
description: 'Поймите, что отличает ClickHouse от других систем управления базами данных'
title: 'Особенности ClickHouse'
---


# Особенности ClickHouse

## Настоящая столбцовая система управления базами данных {#true-column-oriented-database-management-system}

В настоящей столбцовой СУБД никаких дополнительных данных не хранится вместе со значениями. Это означает, что необходимо поддерживать значения постоянной длины, чтобы избегать хранения их длины "числом" рядом со значениями. Например, миллиард значений типа UInt8 должен занимать около 1 ГБ в несжатом виде, иначе это сильно влияет на использование CPU. Очень важно хранить данные компактно (без каких-либо "мусора"), даже в несжатом виде, так как скорость декомпрессии (использование CPU) в основном зависит от объема несжатых данных.

Это контрастирует с системами, которые могут хранить значения разных столбцов отдельно, но не могут эффективно обрабатывать аналитические запросы из-за своей оптимизации для других сценариев, таких как HBase, Bigtable, Cassandra и Hypertable. Вы получите пропускную способность около ста тысяч строк в секунду в этих системах, но не сотни миллионов строк в секунду.

Наконец, ClickHouse является системой управления базами данных, а не единой базой данных. Она позволяет создавать таблицы и базы данных во время выполнения, загружать данные и выполнять запросы без перенастройки и перезапуска сервера.

## Сжатие данных {#data-compression}

Некоторые столбцовые СУБД не используют сжатие данных. Однако сжатие данных играет ключевую роль в достижении отличной производительности.

Кроме эффективных многопurpose кодеков с различными компромиссами между дисковым пространством и потреблением CPU, ClickHouse предоставляет [специализированные кодеки](/sql-reference/statements/create/table.md#specialized-codecs) для конкретных типов данных, что позволяет ClickHouse конкурировать и превосходить более нишевые базы данных, такие как базы данных временных рядов.

## Дисковое хранение данных {#disk-storage-of-data}

Физическое сортирование данных по первичному ключу позволяет извлекать данные на основе конкретных значений или диапазонов значений с низкой задержкой менее чем за несколько десятков миллисекунд. Некоторые столбцовые СУБД, такие как SAP HANA и Google PowerDrill, могут работать только в ОЗУ. Этот подход требует выделения большего бюджетного оборудования, чем необходимо для анализа в реальном времени.

ClickHouse разработан для работы на обычных жестких дисках, что означает, что стоимость хранения данных на уровне гигабайт низка, но SSD и дополнительная ОЗУ также полностью используются при наличии.

## Параллельная обработка на нескольких ядрах {#parallel-processing-on-multiple-cores}

Большие запросы естественным образом параллелизуются, используя все необходимые ресурсы, доступные на текущем сервере.

## Распределенная обработка на нескольких серверах {#distributed-processing-on-multiple-servers}

Почти ни одна из упомянутых выше столбцовых СУБД не поддерживает распределенную обработку запросов.

В ClickHouse данные могут находиться на разных шардов. Каждый шард может быть группой реплик, используемых для отказоустойчивости. Все шарды используются для выполнения запроса параллельно, прозрачно для пользователя.

## Поддержка SQL {#sql-support}

ClickHouse поддерживает [язык SQL](/sql-reference/), который в основном совместим со стандартом ANSI SQL.

Поддерживаемые запросы включают [GROUP BY](../sql-reference/statements/select/group-by.md), [ORDER BY](../sql-reference/statements/select/order-by.md), подзапросы в [FROM](../sql-reference/statements/select/from.md), [JOIN](../sql-reference/statements/select/join.md) клаузе, [IN](../sql-reference/operators/in.md) операторе, [оконные функции](../sql-reference/window-functions/index.md) и скалярные подзапросы.

На момент написания не поддерживаются коррелированные (зависящие) подзапросы, но они могут стать доступны в будущем.

## Векторный вычислительный движок {#vector-engine}

Данные хранятся не только по столбцам, но и обрабатываются векторами (частями столбцов), что позволяет достичь высокой эффективности CPU.

## Вставка данных в реальном времени {#real-time-data-updates}

ClickHouse поддерживает таблицы с первичным ключом. Чтобы быстро выполнять запросы по диапазону первичного ключа, данные сортируются инкрементально с использованием дерева слияния. Благодаря этому данные могут постоянно добавляться в таблицу. Никакие блокировки не устанавливаются при поступлении новых данных.

## Первичные индексы {#primary-index}

Физическое сортирование данных по первичному ключу позволяет извлекать данные на основе конкретных значений или диапазонов значений с низкой задержкой менее чем за несколько десятков миллисекунд.

## Вторичные индексы {#secondary-indexes}

В отличие от других систем управления базами данных, вторичные индексы в ClickHouse не указывают на конкретные строки или диапазоны строк. Вместо этого они позволяют базе данных заранее знать, что все строки в некоторых частях данных не будут соответствовать условиям фильтрации запросов, и не считывать их вообще, таким образом они называются [индексами пропуска данных](../engines/table-engines/mergetree-family/mergetree.md#table_engine-mergetree-data_skipping-indexes).

## Подходят для онлайн-запросов {#suitable-for-online-queries}

Большинство систем управления базами данных OLAP не стремятся к онлайн-запросам с задержкой менее секунды. В альтернативных системах время составления отчетов в десятки секунд или даже минут часто считается приемлемым. Иногда это занимает еще больше времени, что заставляет системы готовить отчеты офлайн (заранее или в ответ на "возвратитесь позже").

В ClickHouse "низкая задержка" означает, что запросы могут обрабатываться без задержек и без попыток подготовить ответ заранее, прямо в тот момент, когда загружается страница пользовательского интерфейса. Другими словами, онлайн.

## Поддержка аппроксимированных расчетов {#support-for-approximated-calculations}

ClickHouse предоставляет различные способы обменять точность на производительность:

1.  Агрегатные функции для аппроксимированных расчетов количества уникальных значений, медиан и квантилей.
2.  Выполнение запроса на основании части ([SAMPLE](../sql-reference/statements/select/sample.md)) данных и получение аппроксимированного результата. В этом случае пропорционально меньше данных считывается с диска.
3.  Выполнение агрегации для ограниченного числа случайных ключей, вместо всех ключей. При определенных условиях распределения ключей в данных это обеспечивает достаточно точный результат, при этом используя меньше ресурсов.

## Адаптивный алгоритм соединения {#adaptive-join-algorithm}

ClickHouse адаптивно выбирает, как [JOIN](../sql-reference/statements/select/join.md) несколько таблиц, предпочитая алгоритм хеширования и переходя на алгоритм слияния, если существует более одной большой таблицы.

## Поддержка репликации данных и целостности данных {#data-replication-and-data-integrity-support}

ClickHouse использует асинхронную многомастеровую репликацию. После записи на любую доступную реплику все остальные реплики получают свою копию в фоновом режиме. Система поддерживает идентичные данные на разных репликах. Восстановление после большинства сбоев выполняется автоматически или полуаавтоматически в сложных случаях.

Для получения дополнительной информации смотрите раздел [Репликация данных](../engines/table-engines/mergetree-family/replication.md).

## Контроль доступа на основе ролей {#role-based-access-control}

ClickHouse реализует управление учетными записями пользователей с помощью SQL-запросов и позволяет настраивать [контроль доступа на основе ролей](/guides/sre/user-management/index.md), аналогичный тому, что можно найти в стандарте ANSI SQL и популярных системах управления реляционными базами данных.

## Функции, которые могут считаться недостатками {#clickhouse-features-that-can-be-considered-disadvantages}

1.  Нет полнофункциональных транзакций.
2.  Отсутствие возможности модифицировать или удалять уже вставленные данные с высокой скоростью и низкой задержкой. Доступны пакетные удаления и обновления для очистки или модификации данных, например, для соблюдения [GDPR](https://gdpr-info.eu).
3.  Разреженный индекс делает ClickHouse не таким эффективным для точечных запросов, извлекающих отдельные строки по их ключам.
