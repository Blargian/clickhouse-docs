---
slug: /intro
sidebar_label: 'Что такое ClickHouse?'
description: 'ClickHouse® — это столбцовая система управления базами данных (СУБД) SQL для онлайн аналитической обработки (OLAP). Она доступна как в виде программного обеспечения с открытым исходным кодом, так и в виде облачного решения.'
title: 'Что такое ClickHouse?'
---

import column_example from '@site/static/images/column-oriented-example-query.png';
import row_orientated from '@site/static/images/row-oriented.gif';
import column_orientated from '@site/static/images/column-oriented.gif';
import Image from '@theme/IdealImage';

ClickHouse® — это высокопроизводительная, столбцовая система управления базами данных (СУБД) SQL для онлайн аналитической обработки (OLAP). Она доступна как в [виде программного обеспечения с открытым исходным кодом](https://github.com/ClickHouse/ClickHouse), так и в [виде облачного решения](https://clickhouse.com/cloud).

## Что такое аналитика? {#what-are-analytics}

Аналитика, также известная как OLAP (Online Analytical Processing), относится к SQL-запросам со сложными вычислениями (например, агрегациями, обработкой строк, арифметическими операциями) по огромным наборам данных.

В отличие от транзакционных запросов (или OLTP, Online Transaction Processing), которые читают и записывают всего несколько строк за запрос и, следовательно, выполняются за миллисекунды, аналитические запросы обычно обрабатывают миллиарды и триллионы строк.

Во многих случаях [аналитические запросы должны быть "в реальном времени"](https://clickhouse.com/engineering-resources/what-is-real-time-analytics), т.е. возвращать результат менее чем за одну секунду.

## Строковая и столбцовая организация хранения данных {#row-oriented-vs-column-oriented-storage}

Такой уровень производительности можно достичь только с правильной "ориентацией" данных.

Базы данных хранят данные либо [строчно, либо столбцово](https://clickhouse.com/engineering-resources/what-is-columnar-database).

В строковой базе данных последовательные строки таблицы хранятся одна за другой. Эта компоновка позволяет быстро извлекать строки, поскольку значения колонок каждой строки хранятся вместе.

ClickHouse — это столбцовая база данных. В таких системах таблицы хранятся в виде набора колонок, т.е. значения каждой колонки хранятся последовательно друг за другом. Эта компоновка затрудняет восстановление отдельных строк (поскольку между значениями строк теперь есть пропуски), но операции со столбцами, такие как фильтрация или агрегация, становятся намного быстрее, чем в строковой базе данных.

Разница лучше всего объясняется на примере запроса, выполняющегося над 100 миллионами строк [анонимизированных данных веб-аналитики реального мира](/getting-started/example-datasets/metrica):

```sql
SELECT MobilePhoneModel, COUNT() AS c
FROM metrica.hits
WHERE
      RegionID = 229
  AND EventDate >= '2013-07-01'
  AND EventDate <= '2013-07-31'
  AND MobilePhone != 0
  AND MobilePhoneModel not in ['', 'iPad']
GROUP BY MobilePhoneModel
ORDER BY c DESC
LIMIT 8;
```

Вы можете [выполнить этот запрос в ClickHouse SQL Playground](https://sql.clickhouse.com?query=U0VMRUNUIE1vYmlsZVBob25lTW9kZWwsIENPVU5UKCkgQVMgYyAKRlJPTSBtZXRyaWNhLmhpdHMgCldIRVJFIAogICAgICBSZWdpb25JRCA9IDIyOSAKICBBTkQgRXZlbnREYXRlID49ICcyMDEzLTA3LTAxJyAKICBBTkQgRXZlbnREYXRlIDw9ICcyMDEzLTA3LTMxJyAKICBBTkQgTW9iaWxlUGhvbmUgIT0gMCAKICBBTkQgTW9iaWxlUGhvbmVNb2RlbCBub3QgaW4gWycnLCAnaVBhZCddIApHUk9VUCBCWSBNb2JpbGVQaG9uZU1vZGVsCk9SREVSIEJZIGMgREVTQyAKTElNSVQgODs&chart=eyJ0eXBlIjoicGllIiwiY29uZmlnIjp7InhheGlzIjoiTW9iaWxlUGhvbmVNb2RlbCIsInlheGlzIjoiYyJ9fQ&run_query=true), который выбирает и фильтрует [всего несколько из более чем 100](https://sql.clickhouse.com/?query=U0VMRUNUIG5hbWUKRlJPTSBzeXN0ZW0uY29sdW1ucwpXSEVSRSBkYXRhYmFzZSA9ICdtZXRyaWNhJyBBTkQgdGFibGUgPSAnaGl0cyc7&tab=results&run_query=true) существующих колонок, возвращая результат за миллисекунды:

<Image img={column_example} alt="Пример запроса в столбцовой базе данных" size="lg"/>

Как видно в раздел статистики на приведенном выше диаграмме, запрос обработал 100 миллионов строк за 92 миллисекунды, что соответствует пропускной способности примерно 300 миллионов строк или чуть менее 7 ГБ в секунду.

**Строковая СУБД**

В строковой базе данных, даже если вышеупомянутый запрос обрабатывает лишь несколько из существующих колонок, системе все равно необходимо загружать данные из других существующих колонок с диска в память. Это связано с тем, что данные хранятся на диске в чанках, называемых [блоками](https://en.wikipedia.org/wiki/Block_(data_storage)) (обычно фиксированных размеров, например, 4 КБ или 8 КБ). Блоки — это наименьшие единицы данных, считываемые с диска в память. Когда приложение или база данных запрашивает данные, подсистема ввода-вывода диска операционной системы считывает требуемые блоки с диска. Даже если нужна лишь часть блока, весь блок считывается в память (это обусловлено дизайном диска и файловой системы):

<Image img={row_orientated} alt="Структура строковой базы данных" size="lg"/>

**Столбцовая СУБД**

Поскольку значения каждой колонки хранятся последовательно друг за другом на диске, при выполнении вышеупомянутого запроса не загружается ненужная информация.
Поскольку блочная организация хранения и передача с диска в память соответствует шаблону доступа к данным аналитических запросов, считываются только те колонки, которые необходимы для запроса, что позволяет избежать ненужного ввода-вывода для неиспользуемых данных. Это [значительно быстрее](https://benchmark.clickhouse.com/) по сравнению со строчной организацией хранения, где считываются целые строки (включая нерелевантные колонки):

<Image img={column_orientated} alt="Структура столбцовой базы данных" size="lg"/>

## Репликация данных и целостность {#data-replication-and-integrity}

ClickHouse использует асинхронную схему многомастерной репликации, чтобы гарантировать, что данные хранятся с избыточностью на нескольких узлах. После записи в любую доступную реплику все оставшиеся реплики получают свою копию в фоновом режиме. Система поддерживает идентичные данные на разных репликах. Восстановление после большинства сбоев осуществляется автоматически или полуавтоматически в сложных случаях.

## Контроль доступа на основе ролей {#role-based-access-control}

ClickHouse реализует управление учетными записями пользователей с помощью SQL-запросов и позволяет настраивать контроль доступа на основе ролей, аналогично тому, что можно найти в ANSI SQL стандарте и популярных системах управления реляционными базами данных.

## Поддержка SQL {#sql-support}

ClickHouse поддерживает [декларативный язык запросов на основе SQL](/sql-reference), который во многих случаях идентичен стандарту ANSI SQL. Поддерживаемые конструкции запросов включают [GROUP BY](/sql-reference/statements/select/group-by), [ORDER BY](/sql-reference/statements/select/order-by), подзапросы в [FROM](/sql-reference/statements/select/from), конструкцию [JOIN](/sql-reference/statements/select/join), оператор [IN](/sql-reference/operators/in), [оконные функции](/sql-reference/window-functions) и скалярные подзапросы.

## Приблизительное вычисление {#approximate-calculation}

ClickHouse предоставляет способы торговли точностью ради производительности. Например, некоторые из его агрегатных функций вычисляют количество уникальных значений, медиану и квартиль приблизительно. Также запросы могут выполняться на выборке данных, чтобы быстро вычислить приблизительный результат. Наконец, агрегации могут выполняться с ограниченным числом ключей вместо всех ключей. В зависимости от того, насколько искажена распределение ключей, это может дать достаточно точный результат, использующий гораздо меньше ресурсов, чем точное вычисление.

## Адаптивные алгоритмы JOIN {#adaptive-join-algorithms}

ClickHouse адаптивно выбирает алгоритм JOIN, начиная с быстрых хеш-joins и переходя к merge joins, если имеется более одной большой таблицы.

## Высокая производительность запросов {#superior-query-performance}

ClickHouse известен своей чрезвычайно высокой скоростью выполнения запросов.
Чтобы узнать, почему ClickHouse такой быстрый, смотрите руководство [Почему ClickHouse быстрый?](/concepts/why-clickhouse-is-so-fast.md).
