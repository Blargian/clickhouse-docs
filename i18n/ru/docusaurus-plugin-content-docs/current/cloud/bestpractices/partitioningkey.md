---
slug: /cloud/bestpractices/low-cardinality-partitioning-key
sidebar_label: 'Выбор ключа шардирования с низкой кардинальностью'
title: 'Выбор ключа шардирования с низкой кардинальностью'
description: 'Страница, описывающая, почему стоит выбирать ключ шардирования с низкой кардинальностью в качестве лучшей практики'
---

import Image from '@theme/IdealImage';
import partitioning01 from '@site/static/images/cloud/bestpractices/partitioning-01.png';
import partitioning02 from '@site/static/images/cloud/bestpractices/partitioning-02.png';

Когда вы отправляете оператор вставки (который должен содержать много строк - см. [раздел выше](/optimize/bulk-inserts)) в таблицу в ClickHouse Cloud, и эта
таблица не использует [ключ шардирования](/engines/table-engines/mergetree-family/custom-partitioning-key.md), тогда все данные строк из этой вставки записываются в новую часть на хранилище:

<Image img={partitioning01} size="md" alt="Вставка без ключа шардирования - создана одна часть" background="white"/>

Однако, когда вы отправляете оператор вставки в таблицу в ClickHouse Cloud, и эта таблица имеет ключ шардирования, тогда ClickHouse:
- проверяет значения ключа шардирования строк, содержащихся в вставке
- создает одну новую часть на хранилище для каждого уникального значения ключа шардирования
- размещает строки в соответствующих частях по значению ключа шардирования

<Image img={partitioning02} size="md" alt="Вставка с ключом шардирования - создано несколько частей на основе значений ключа шардирования" background="white"/>

Поэтому, чтобы минимизировать количество запросов на запись в объектное хранилище ClickHouse Cloud, используйте ключ шардирования с низкой кардинальностью или избегайте использования какого-либо ключа шардирования для вашей таблицы.
