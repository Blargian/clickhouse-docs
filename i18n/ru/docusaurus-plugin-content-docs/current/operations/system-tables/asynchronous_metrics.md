---
description: 'Системная таблица, содержащая метрики, которые периодически рассчитываются в
  фоновом режиме. Например, количество используемой оперативной памяти.'
keywords: ['системная таблица', 'asynchronous_metrics']
slug: /operations/system-tables/asynchronous_metrics
title: 'system.asynchronous_metrics'
---

import SystemTableCloud from '@site/docs/_snippets/_system_table_cloud.md';

# system.asynchronous_metrics

<SystemTableCloud/>

Содержит метрики, которые периодически рассчитываются в фоновом режиме. Например, количество используемой оперативной памяти.

Колонки:

- `metric` ([String](../../sql-reference/data-types/string.md)) — Имя метрики.
- `value` ([Float64](../../sql-reference/data-types/float.md)) — Значение метрики.
- `description` ([String](../../sql-reference/data-types/string.md)) — Описание метрики.

**Пример**

```sql
SELECT * FROM system.asynchronous_metrics LIMIT 10
```

```text
┌─metric──────────────────────────────────┬──────value─┬─description────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ AsynchronousMetricsCalculationTimeSpent │ 0.00179053 │ Время в секундах, затраченное на расчет асинхронных метрик (это накладные расходы асинхронных метрик).                                                                                                                                              │
│ NumberOfDetachedByUserParts             │          0 │ Общее количество частей, отделенных от таблиц MergeTree пользователями с помощью запроса `ALTER TABLE DETACH` (в отличие от неожиданных, поврежденных или игнорируемых частей). Сервер не беспокоится о отделенных частях, и они могут быть удалены.                          │
│ NumberOfDetachedParts                   │          0 │ Общее количество частей, отделенных от таблиц MergeTree. Часть может быть отделена пользователем с помощью запроса `ALTER TABLE DETACH` или самим сервером, если часть повреждена, неожиданна или ненужна. Сервер не беспокоится о отделенных частях, и они могут быть удалены. │
│ TotalRowsOfMergeTreeTables              │    2781309 │ Общее количество строк (записей), хранящихся во всех таблицах семейства MergeTree.                                                                                                                                                                                   │
│ TotalBytesOfMergeTreeTables             │    7741926 │ Общее количество байтов (сжатых, включая данные и индексы), хранящихся во всех таблицах семейства MergeTree.                                                                                                                                                   │
│ NumberOfTables                          │         93 │ Общее количество таблиц, суммированных по базам данных на сервере, исключая базы данных, которые не могут содержать таблицы MergeTree. Исключенные движки базы данных — это те, которые генерируют набор таблиц на лету, такие как `Lazy`, `MySQL`, `PostgreSQL`, `SQlite`. │
│ NumberOfDatabases                       │          6 │ Общее количество баз данных на сервере.                                                                                                                                                                                                                   │
│ MaxPartCountForPartition                │          6 │ Максимальное количество частей в партиции по всем партициям всех таблиц семейства MergeTree. Значения, превышающие 300, указывают на неправильную конфигурацию, перегрузку или массовую загрузку данных.                                                                       │
│ ReplicasSumMergesInQueue                │          0 │ Сумма операций слияния в очереди (еще не примененные) по реплицированным таблицам.                                                                                                                                                                       │
│ ReplicasSumInsertsInQueue               │          0 │ Сумма операций INSERT в очереди (еще не реплицированные) по реплицированным таблицам.                                                                                                                                                                   │
└─────────────────────────────────────────┴────────────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

<!--- В отличие от system.events и system.metrics, асинхронные метрики не собираются в простом списке в файле исходного кода - они смешаны с логикой в src/Interpreters/ServerAsynchronousMetrics.cpp.
      Перечисление их здесь явно для удобства читателя. --->
## Описание метрик {#metric-descriptions}
### AsynchronousHeavyMetricsCalculationTimeSpent {#asynchronousheavymetricscalculationtimespent}

Время в секундах, затраченное на расчет асинхронных тяжелых (связанных с таблицами) метрик (это накладные расходы асинхронных метрик).
### AsynchronousHeavyMetricsUpdateInterval {#asynchronousheavymetricsupdateinterval}

Интервал обновления тяжелых (связанных с таблицами) метрик.
### AsynchronousMetricsCalculationTimeSpent {#asynchronousmetricscalculationtimespent}

Время в секундах, затраченное на расчет асинхронных метрик (это накладные расходы асинхронных метрик).
### AsynchronousMetricsUpdateInterval {#asynchronousmetricsupdateinterval}

Интервал обновления метрик.
### BlockActiveTime_*name* {#blockactivetime_name}

Время в секундах, в течение которого блочный устройство имело IO-запросы в очереди. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardBytes_*name* {#blockdiscardbytes_name}

Количество отброшенных байтов на блочном устройстве. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами в системе. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardMerges_*name* {#blockdiscardmerges_name}

Количество операций удаления, запрашиваемых от блочного устройства и объединяемых операционной системой. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами в системе. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardOps_*name* {#blockdiscardops_name}

Количество операций удаления, запрашиваемых от блочного устройства. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами в системе. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardTime_*name* {#blockdiscardtime_name}

Время в секундах, затраченное на операции удаления, запрашиваемые от блочного устройства, суммированное по всем операциям. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами в системе. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockInFlightOps_*name* {#blockinflightops_name}

Это значение учитывает количество IO-запросов, которые были выданы драйверу устройства, но еще не завершены. Не включает IO-запросы, которые находятся в очереди, но еще не были выданы драйверу устройства. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockQueueTime_*name* {#blockqueuetime_name}

Это значение учитывает общее количество миллисекунд, в течение которых IO-запросы ожидали на этом блочном устройстве. Если существует несколько IO-запросов, ожидающих, это значение будет увеличиваться как произведение количества миллисекунд на количество ожидающих запросов. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadBytes_*name* {#blockreadbytes_name}

Количество байтов, прочитанных с блочного устройства. Может быть меньше, чем количество байтов, прочитанных из файловой системы, из-за использования кэша страниц ОС, который экономит IO. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadMerges_*name* {#blockreadmerges_name}

Количество операций чтения, запрашиваемых от блочного устройства и объединяемых операционной системой. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadOps_*name* {#blockreadops_name}

Количество операций чтения, запрашиваемых от блочного устройства. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadTime_*name* {#blockreadtime_name}

Время в секундах, затраченное на операции чтения, запрашиваемые от блочного устройства, суммированное по всем операциям. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteBytes_*name* {#blockwritebytes_name}

Количество байтов, записанных на блочное устройство. Может быть меньше, чем количество байтов, записанных в файловую систему, из-за использования кэша страниц ОС, который экономит IO. Запись в блочное устройство может произойти позже, чем соответствующая запись в файловую систему из-за кэширования с записью. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteMerges_*name* {#blockwritemerges_name}

Количество операций записи, запрашиваемых от блочного устройства и объединяемых операционной системой. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteOps_*name* {#blockwriteops_name}

Количество операций записи, запрашиваемых от блочного устройства. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteTime_*name* {#blockwritetime_name}

Время в секундах, затраченное на операции записи, запрашиваемые от блочного устройства, суммированное по всем операциям. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Исходник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### CPUFrequencyMHz_*name* {#cpufrequencymhz_name}

Текущая частота CPU в МГц. Большинство современных процессоров динамически регулирует частоту для экономии энергии и Turbo Boost.
### CompiledExpressionCacheBytes {#compiledexpressioncachebytes}

Общее количество байтов, используемых для кэша JIT-скомпилированного кода.
### CompiledExpressionCacheCount {#compiledexpressioncachecount}

Общее количество записей в кэше JIT-скомпилированного кода.
### DiskAvailable_*name* {#diskavailable_name}

Доступные байты на диске (виртуальная файловая система). Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskTotal_*name* {#disktotal_name}

Общий размер в байтах диска (виртуальная файловая система). Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskUnreserved_*name* {#diskunreserved_name}

Доступные байты на диске (виртуальная файловая система) без резервирования на слияние, выборки и перемещения. Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskUsed_*name* {#diskused_name}

Использованные байты на диске (виртуальная файловая система). Удаленные файловые системы не всегда предоставляют эту информацию.
### FilesystemCacheBytes {#filesystemcachebytes}

Общее количество байтов в виртуальной файловой системе `cache`. Этот кэш хранится на диске.
### FilesystemCacheFiles {#filesystemcachefiles}

Общее количество сегментов файлов, кэшируемых в виртуальной файловой системе `cache`. Этот кэш хранится на диске.
### FilesystemLogsPathAvailableBytes {#filesystemlogspathavailablebytes}

Доступные байты на том томе, где смонтирован путь журналов ClickHouse. Если это значение приближается к нулю, вам следует настроить ротацию журналов в файле конфигурации.
### FilesystemLogsPathAvailableINodes {#filesystemlogspathavailableinodes}

Количество доступных inode на том томе, где смонтирован путь журналов ClickHouse.
### FilesystemLogsPathTotalBytes {#filesystemlogspathtotalbytes}

Размер тома, на котором смонтирован путь журналов ClickHouse, в байтах. Рекомендуется иметь не менее 10 ГБ для журналов.
### FilesystemLogsPathTotalINodes {#filesystemlogspathtotalinodes}

Общее количество inode на том томе, где смонтирован путь журналов ClickHouse.
### FilesystemLogsPathUsedBytes {#filesystemlogspathusedbytes}

Использованные байты на том томе, где смонтирован путь журналов ClickHouse.
### FilesystemLogsPathUsedINodes {#filesystemlogspathusedinodes}

Количество использованных inode на том томе, где смонтирован путь журналов ClickHouse.
### FilesystemMainPathAvailableBytes {#filesystemmainpathavailablebytes}

Доступные байты на том томе, где смонтирован основной путь ClickHouse.
### FilesystemMainPathAvailableINodes {#filesystemmainpathavailableinodes}

Количество доступных inode на том томе, где смонтирован основной путь ClickHouse. Если оно близко к нулю, это указывает на неправильную конфигурацию, и вы получите "нет места на устройстве", даже если диск не заполнен.
### FilesystemMainPathTotalBytes {#filesystemmainpathtotalbytes}

Размер тома, на котором смонтирован основной путь ClickHouse, в байтах.
### FilesystemMainPathTotalINodes {#filesystemmainpathtotalinodes}

Общее количество inode на том томе, где смонтирован основной путь ClickHouse. Если их меньше 25 миллионов, это указывает на неправильную конфигурацию.
### FilesystemMainPathUsedBytes {#filesystemmainpathusedbytes}

Использованные байты на том томе, где смонтирован основной путь ClickHouse.
### FilesystemMainPathUsedINodes {#filesystemmainpathusedinodes}

Количество использованных inode на том томе, где смонтирован основной путь ClickHouse. Это значение в основном соответствует количеству файлов.
### HTTPThreads {#httpthreads}

Количество потоков в сервере HTTP интерфейса (без TLS).
### InterserverThreads {#interserverthreads}

Количество потоков в сервере протокола связи реплик (без TLS).
### Jitter {#jitter}

Разница во времени, когда поток для расчета асинхронных метрик был запланирован для пробуждения и временем, когда он фактически был пробужден. Условный индикатор общей задержки системы и отзывчивости.
### LoadAverage*N* {#loadaveragen}

Общая нагрузка системы, усредненная с экспоненциальным сглаживанием за 1 минуту. Нагрузка представляет собой количество потоков по всем процессам (сущности планирования ядра ОС), которые в настоящее время выполняются на CPU или ожидают IO, или готовы к выполнению, но на данный момент не планируются. Это число включает все процессы, а не только clickhouse-server. Число может превышать количество ядер CPU, если система перегружена, и многие процессы готовы к выполнению, но ждут CPU или IO.
### MMapCacheCells {#mmapcachecells}

Количество файлов, открытых с использованием `mmap` (отображенных в памяти). Это используется для запросов, в которых настройка `local_filesystem_read_method` установлена в `mmap`. Файлы, открытые с использованием `mmap`, хранятся в кэше, чтобы избежать дорогостоящих сбросов TLB.
### MarkCacheBytes {#markcachebytes}

Общий размер кэша меток в байтах.
### MarkCacheFiles {#markcachefiles}

Общее количество файлов меток, кэшированных в кэше меток.
### MaxPartCountForPartition {#maxpartcountforpartition}

Максимальное количество частей в партиции по всем партициям всех таблиц семейства MergeTree. Значения, превышающие 300, указывают на неправильную конфигурацию, перегрузку или массовую загрузку данных.
### MemoryCode {#memorycode}

Количество виртуальной памяти, отображенной для страниц машинного кода процесса сервера, в байтах.
### MemoryDataAndStack {#memorydataandstack}

Количество виртуальной памяти, отображенной для использования стека и для выделенной памяти, в байтах. Не уточняется, включает ли она стек пер-потоков и большую часть выделенной памяти, которая выделяется с помощью системного вызова 'mmap'. Эта метрика существует только для полноты. Рекомендуется использовать метрику `MemoryResident` для мониторинга.
### MemoryResidentMax {#memoryresidentmax}

Максимальное количество физической памяти, используемой процессом сервера, в байтах.
### MemoryResident {#memoryresident}

Количество физической памяти, используемой процессом сервера, в байтах.
### MemoryShared {#memoryshared}

Количество памяти, используемой процессом сервера, которая также используется другими процессами, в байтах. ClickHouse не использует общую память, но часть памяти может быть помечена ОС как общая по своим причинам. Эта метрика не имеет большого смысла для наблюдения, и существует только для полноты.
### MemoryVirtual {#memoryvirtual}

Размер пространства виртуальных адресов, выделенного процессом сервера, в байтах. Размер пространства виртуальных адресов обычно намного больше, чем потребление физической памяти, и не должен использоваться как оценка потребления памяти. Большие значения этой метрики абсолютно нормальны и имеют только технический смысл.
### MySQLThreads {#mysqlthreads}

Количество потоков в сервере протокола совместимости MySQL.
### NetworkReceiveBytes_*name* {#networkreceivebytes_name}

Количество байтов, полученных через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveDrop_*name* {#networkreceivedrop_name}

Количество байтов, потерянных в пакете при получении через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveErrors_*name* {#networkreceiveerrors_name}

Количество раз, когда произошла ошибка при получении через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceivePackets_*name* {#networkreceivepackets_name}

Количество сетевых пакетов, полученных через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendBytes_*name* {#networksendbytes_name}

Количество байтов, отправленных через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendDrop_*name* {#networksenddrop_name}

Количество раз, когда пакет был потерян при отправке через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendErrors_*name* {#networksenderrors_name}

Количество раз, когда произошла ошибка (например, повторная передача TCP) при отправке через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendPackets_*name* {#networksendpackets_name}

Количество сетевых пакетов, отправленных через сетевой интерфейс. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### NumberOfDatabases {#numberofdatabases}

Общее количество баз данных на сервере.
### NumberOfDetachedByUserParts {#numberofdetachedbyuserparts}

Общее количество частей, отделенных от таблиц MergeTree пользователями с помощью запроса `ALTER TABLE DETACH` (в отличие от неожиданных, поврежденных или игнорируемых частей). Сервер не беспокоится о отделенных частях, и они могут быть удалены.
### NumberOfDetachedParts {#numberofdetachedparts}

Общее количество частей, отделенных от таблиц MergeTree. Часть может быть отделена пользователем с помощью запроса `ALTER TABLE DETACH` или самим сервером, если часть повреждена, неожиданна или ненужна. Сервер не беспокоится о отделенных частях, и они могут быть удалены.
### NumberOfTables {#numberoftables}

Общее количество таблиц, суммированных по базам данных на сервере, исключая базы данных, которые не могут содержать таблицы MergeTree. Исключенные движки базы данных — это те, которые генерируют набор таблиц на лету, такие как `Lazy`, `MySQL`, `PostgreSQL`, `SQlite`.
### OSContextSwitches {#oscontextswitches}

Количество переключений контекста, которые система пережила на хост-машине. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSGuestNiceTime {#osguestnicetime}

Соотношение времени, затраченного на запуск виртуального CPU для гостевых операционных систем под управлением ядра Linux, когда гость был установлен на более высокий приоритет (См. `man procfs`). Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSGuestNiceTimeCPU_*N* {#osguestnicetimecpu_n}

Соотношение времени, затраченного на запуск виртуального CPU для гостевых операционных систем под управлением ядра Linux, когда гость был установлен на более высокий приоритет (См. `man procfs`). Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSGuestNiceTimeNormalized {#osguestnicetimenormalized}

Значение похоже на `OSGuestNiceTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1], независимо от числа ядер. Это позволяет вам усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер не однородно, и все равно получать среднюю метрику использования ресурсов.
### OSGuestTime {#osguesttime}

Соотношение времени, затраченного на запуск виртуального CPU для гостевых операционных систем под управлением ядра Linux (См. `man procfs`). Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSGuestTimeCPU_*N* {#osguesttimecpu_n}

Соотношение времени, затраченного на запуск виртуального CPU для гостевых операционных систем под управлением ядра Linux (См. `man procfs`). Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSGuestTimeNormalized {#osguesttimenormalized}

Значение похоже на `OSGuestTime`, но делится на количество ядер CPU для измерения в интервале [0..1], независимо от числа ядер. Это позволяет вам усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер не однородно, и все равно получать среднюю метрику использования ресурсов.
### OSIOWaitTime {#osiowaittime}

Соотношение времени, когда ядро CPU не выполняло код, но когда ядро ОС не запускало никакой другой процесс на этом CPU, так как процессы ожидали IO. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIOWaitTimeCPU_*N* {#osiowaittimecpu_n}

Соотношение времени, когда ядро CPU не выполняло код, но когда ядро ОС не запускало никакой другой процесс на этом CPU, так как процессы ожидали IO. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIOWaitTimeNormalized {#osiowaittimenormalized}

Значение похоже на `OSIOWaitTime`, но делится на количество ядер CPU для измерения в интервале [0..1], независимо от числа ядер. Это позволяет вам усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер не однородно, и все равно получать среднюю метрику использования ресурсов.
### OSIdleTime {#osidletime}

Соотношение времени, когда ядро CPU было бездействующим (даже не готовым запускать процесс ожидания IO) с точки зрения ядра ОС. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Это не включает время, когда CPU использовался недостаточно из-за причин, внутренних для CPU (загрузок памяти, задержек в конвейере, неправильных предсказаний ветвлений, работы другого ядра SMT). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIdleTimeCPU_*N* {#osidletimecpu_n}

Соотношение времени, когда ядро CPU было бездействующим (даже не готовым запускать процесс ожидания IO) с точки зрения ядра ОС. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Это не включает время, когда CPU использовался недостаточно из-за причин, внутренних для CPU (загрузок памяти, задержек в конвейере, неправильных предсказаний ветвлений, работы другого ядра SMT). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIdleTimeNormalized {#osidletimenormalized}

Значение похоже на `OSIdleTime`, но делится на количество ядер CPU для измерения в интервале [0..1], независимо от числа ядер. Это позволяет вам усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер не однородно, и все равно получать среднюю метрику использования ресурсов.
### OSInterrupts {#osinterrupts}

Количество прерываний на хост-машине. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSIrqTime {#osirqtime}

Соотношение времени, затраченного на выполнение аппаратных запросов прерывания на CPU. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неправильную конфигурацию оборудования или очень высокую сетевую нагрузку. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIrqTimeCPU_*N* {#osirqtimecpu_n}

Соотношение времени, затраченного на выполнение аппаратных запросов прерывания на CPU. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неправильную конфигурацию оборудования или очень высокую сетевую нагрузку. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..число ядер].
### OSIrqTimeNormalized {#osirqtimenormalized}

Значение похоже на `OSIrqTime`, но делится на количество ядер CPU для измерения в интервале [0..1], независимо от числа ядер. Это позволяет вам усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер не однородно, и все равно получать среднюю метрику использования ресурсов.
### OSMemoryAvailable {#osmemoryavailable}

Количество памяти, доступной для использования программами, в байтах. Это очень похоже на метрику `OSMemoryFreePlusCached`. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryBuffers {#osmemorybuffers}

Количество памяти, используемой буферами ядра ОС, в байтах. Обычно это должно быть небольшим, и большие значения могут указывать на неправильную конфигурацию ОС. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryCached {#osmemorycached}

Количество памяти, используемой кэшем страниц ОС, в байтах. Обычно почти вся доступная память используется кэшем страниц ОС - высокие значения этой метрики нормальны и ожидаемы. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryFreePlusCached {#osmemoryfreepluscached}

Количество свободной памяти плюс память кэша страниц ОС на хост-системе, в байтах. Эта память доступна для использования программами. Значение должно быть очень похоже на `OSMemoryAvailable`. Это метрика, действующая на уровне системы, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryFreeWithoutCached {#osmemoryfreewithoutcached}

Объем свободной памяти на хост-системе, в байтах. Это не включает память, используемую ОС для кэширования страниц, в байтах. Память кэша страниц также доступна для использования программами, поэтому значение этой метрики может быть запутанным. Вместо этого смотрите метрику `OSMemoryAvailable`. Для удобства мы также предоставляем метрику `OSMemoryFreePlusCached`, которая должна быть в некоторой степени аналогична OSMemoryAvailable. См. также https://www.linuxatemyram.com/. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSMemoryTotal {#osmemorytotal}

Общее количество памяти на хост-системе, в байтах.

### OSNiceTime {#osnicetime}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSNiceTimeCPU_*N* {#osnicetimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSNiceTimeNormalized {#osnicetimenormalized}

Значение похоже на `OSNiceTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все же получать среднюю метрику использования ресурсов.

### OSOpenFiles {#osopenfiles}

Общее количество открытых файлов на хост-машине. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSProcessesBlocked {#osprocessesblocked}

Количество потоков, заблокированных в ожидании завершения ввода-вывода (`man procfs`). Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSProcessesCreated {#osprocessescreated}

Количество созданных процессов. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSProcessesRunning {#osprocessesrunning}

Количество исполняемых (работающих или готовых к выполнению) потоков операционной системой. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSSoftIrqTime {#ossoftirqtime}

Соотношение времени, затрачиваемого на выполнение программных прерываний на CPU. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неэффективное программное обеспечение, работающее в системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSSoftIrqTimeCPU_*N* {#ossoftirqtimecpu_n}

Соотношение времени, затрачиваемого на выполнение программных прерываний на CPU. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неэффективное программное обеспечение, работающее в системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSSoftIrqTimeNormalized {#ossoftirqtimenormalized}

Значение похоже на `OSSoftIrqTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все же получать среднюю метрику использования ресурсов.

### OSStealTime {#osstealtime}

Соотношение времени, проведенного в других операционных системах CPU при работе в виртуализированной среде. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Не каждая виртуализированная среда предоставляет эту метрику, и большинство из них этого не делает. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSStealTimeCPU_*N* {#osstealtimecpu_n}

Соотношение времени, проведенного в других операционных системах CPU при работе в виртуализированной среде. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Не каждая виртуализированная среда предоставляет эту метрику, и большинство из них этого не делает. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSStealTimeNormalized {#osstealtimenormalized}

Значение похоже на `OSStealTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все же получать среднюю метрику использования ресурсов.

### OSSystemTime {#ossystemtime}

Соотношение времени, в течение которого ядро CPU выполняло код ядра ОС (системный код). Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSSystemTimeCPU_*N* {#ossystemtimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код ядра ОС (системный код). Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSSystemTimeNormalized {#ossystemtimenormalized}

Значение похоже на `OSSystemTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все же получать среднюю метрику использования ресурсов.

### OSThreadsRunnable {#osthreadsrunnable}

Общее количество «выполняемых» потоков, как это видит планировщик ядра ОС.

### OSThreadsTotal {#osthreadstotal}

Общее количество потоков, как это видит планировщик ядра ОС.

### OSUptime {#osuptime}

Время работы хост-сервера (машина, на которой работает ClickHouse), в секундах.

### OSUserTime {#osusertime}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недостаточно использован по причинам, внутренним для CPU (нагрузки памяти, задержки в конвейере, неверные предсказания ветвления, работа другого SMT-ядра). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSUserTimeCPU_*N* {#osusertimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства. Это метрика, действующая на уровне всей системы, она включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недостаточно использован по причинам, внутренним для CPU (нагрузки памяти, задержки в конвейере, неверные предсказания ветвления, работа другого SMT-ядра). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..num cores].

### OSUserTimeNormalized {#osusertimenormalized}

Значение похоже на `OSUserTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все же получать среднюю метрику использования ресурсов.

### PostgreSQLThreads {#postgresqlthreads}

Количество потоков в сервере протокола совместимости PostgreSQL.

### QueryCacheBytes {#querycachebytes}

Общий размер кэша запросов в байтах.

### QueryCacheEntries {#querycacheentries}

Общее количество записей в кэше запросов.

### ReplicasMaxAbsoluteDelay {#replicasmaxabsolutedelay}

Максимальная разница в секундах между самой свежей реплицированной частью и самой свежей частью данных, которая еще должна быть реплицирована, среди реплицируемых таблиц. Очень высокое значение указывает на реплику без данных.

### ReplicasMaxInsertsInQueue {#replicasmaxinsertsinqueue}

Максимальное количество операций INSERT в очереди (еще не реплицированных) среди реплицируемых таблиц.

### ReplicasMaxMergesInQueue {#replicasmaxmergesinqueue}

Максимальное количество операций слияния в очереди (еще не примененных) среди реплицируемых таблиц.

### ReplicasMaxQueueSize {#replicasmaxqueuesize}

Максимальный размер очереди (в количестве операций, таких как get, merge) среди реплицируемых таблиц.

### ReplicasMaxRelativeDelay {#replicasmaxrelativedelay}

Максимальная разница между задержкой реплики и задержкой самой актуальной реплики той же таблицы среди реплицируемых таблиц.

### ReplicasSumInsertsInQueue {#replicassuminsertsinqueue}

Сумма операций INSERT в очереди (еще не реплицированных) среди реплицируемых таблиц.

### ReplicasSumMergesInQueue {#replicassummergesinqueue}

Сумма операций слияния в очереди (еще не примененных) среди реплицируемых таблиц.

### ReplicasSumQueueSize {#replicassumqueuesize}

Суммарный размер очереди (в количестве операций, таких как get, merge) среди реплицируемых таблиц.

### TCPThreads {#tcpthreads}

Количество потоков в сервере протокола TCP (без TLS).

### Temperature_*N* {#temperature_n}

Температура соответствующего устройства в ℃. Датчик может вернуть нереалистичное значение. Источник: `/sys/class/thermal`

### Temperature_*name* {#temperature_name}

Температура, сообщаемая соответствующим аппаратным монитором и соответствующим датчиком в ℃. Датчик может вернуть нереалистичное значение. Источник: `/sys/class/hwmon`

### TotalBytesOfMergeTreeTables {#totalbytesofmergetreetables}

Общее количество байт (сжатых, включая данные и индексы), хранящихся во всех таблицах семейства MergeTree.

### TotalPartsOfMergeTreeTables {#totalpartsofmergetreetables}

Общее количество частей данных во всех таблицах семейства MergeTree. Числа, превышающие 10 000, негативно повлияют на время запуска сервера и могут указывать на неразумный выбор ключа партиционирования.

### TotalPrimaryKeyBytesInMemory {#totalprimarykeybytesinmemory}

Общее количество памяти (в байтах), используемое значениями первичного ключа (учитывает только активные части).

### TotalPrimaryKeyBytesInMemoryAllocated {#totalprimarykeybytesinmemoryallocated}

Общее количество памяти (в байтах), зарезервированное для значений первичного ключа (учитывает только активные части).

### TotalRowsOfMergeTreeTables {#totalrowsofmergetreetables}

Общее количество строк (записей), хранящихся во всех таблицах семейства MergeTree.

### UncompressedCacheBytes {#uncompressedcachebytes}

Общий размер несжатого кэша в байтах. Несжатый кэш обычно не улучшает производительность и должен в основном избегаться.

### UncompressedCacheCells {#uncompressedcachecells}

Общее количество записей в несжатом кэше. Каждая запись представляет собой декомпрессированный блок данных. Несжатый кэш обычно не улучшает производительность и должен в основном избегаться.

### Uptime {#uptime}

Время работы сервера в секундах. Включает время, затраченное на инициализацию сервера перед приемом соединений.

### jemalloc.active {#jemallocactive}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.allocated {#jemallocallocated}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.arenas.all.dirty_purged {#jemallocarenasalldirty_purged}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.arenas.all.muzzy_purged {#jemallocarenasallmuzzy_purged}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.arenas.all.pactive {#jemallocarenasallpactive}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.arenas.all.pdirty {#jemallocarenasallpdirty}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.arenas.all.pmuzzy {#jemallocarenasallpmuzzy}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.background_thread.num_runs {#jemallocbackground_threadnum_runs}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.background_thread.num_threads {#jemallocbackground_threadnum_threads}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.background_thread.run_intervals {#jemallocbackground_threadrun_intervals}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.epoch {#jemallocepoch}

Внутренний инкрементальный номер обновления статистики jemalloc (распределитель памяти Джейсона Эванса), используемый во всех других метриках `jemalloc`.

### jemalloc.mapped {#jemallocmapped}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.metadata {#jemallocmetadata}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.metadata_thp {#jemallocmetadata_thp}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.resident {#jemallocresident}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.retained {#jemallocretained}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

### jemalloc.prof.active {#jemallocprofactive}

Внутренняя метрика низкоуровневого распределителя памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html

**См. также**

- [Мониторинг](../../operations/monitoring.md) — Основные концепции мониторинга ClickHouse.
- [system.metrics](/operations/system-tables/metrics) — Содержит мгновенно вычисляемые метрики.
- [system.events](/operations/system-tables/events) — Содержит множество событий, которые произошли.
- [system.metric_log](/operations/system-tables/metric_log) — Содержит историю значений метрик из таблиц `system.metrics` и `system.events`.
