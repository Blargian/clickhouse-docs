<br/>
1. ClickHouse Cloudサービスを作成した後、`Connect your app`画面で、ドロップダウンからMySQLを選択します。
<br/>

<div class="eighty-percent">
![Credentials screen - Prompt](./images/mysql1.png)
</div>

2. 特定のサービスに対してMySQLインターフェースを有効にするためにスイッチを切り替えます。これにより、このサービスのためにポート `3306` が開放され、独自のMySQLユーザー名を含むMySQL接続画面が表示されます。

<br/>
<div class="eighty-percent">
![Credentials screen - Enabled MySQL](./images/mysql2.png)
</div>
<br/>

既存のサービスに対してMySQLインターフェースを有効にするには：

3. サービスが`Running`状態であることを確認し、MySQLインターフェースを有効にしたいサービスをクリックします。左メニューから「Connect」を選択します：

<br/>
<div class="eighty-percent">
![Connection screen - Prompt MySQL](./images/mysql3.png)
</div>
<br/>

4. `Connect With`ドロップダウンからMySQLを選択します。

<br/>
![Connection screen - Prompt MySQL](./images/mysql4.png)
<br/>

5. 特定のサービスに対してMySQLインターフェースを有効にするためにスイッチを切り替えます。これにより、このサービスのためにポート `3306` が開放され、独自のMySQLユーザー名を含むMySQL接続画面が表示されます。 

![Connection screen -  MySQL Enabled](./images/mysql5.png)

## ClickHouse Cloudでの複数のMySQLユーザーの作成 {#creating-multiple-mysql-users-in-clickhouse-cloud}

デフォルトで、`mysql4<subdomain>`というビルトインユーザーがあり、`default`のパスワードと同じパスワードを使用します。`<subdomain>`部分は、ClickHouse Cloudホスト名の最初のセグメントです。この形式は、安全な接続を実装するツールで動作するために必要ですが、TLSハンドシェイクで[SNI情報を提供していない](https://www.cloudflare.com/learning/ssl/what-is-sni)ため、ユーザー名に追加のヒントなしに内部ルーティングを行うことが不可能です（MySQLコンソールクライアントはそのようなツールの一つです）。

そのため、MySQLインターフェースで使用するために新しいユーザーを作成する際には、`mysql4<subdomain>_<username>`形式に従うことを**強くお勧め**します。ここで`<subdomain>`はあなたのCloudサービスを識別するためのヒントであり、`<username>`はあなたが選ぶ任意のサフィックスです。

:::tip
ClickHouse Cloudホスト名が`foobar.us-east1.aws.clickhouse.cloud`の場合、`<subdomain>`部分は`foobar`に等しく、カスタムMySQLユーザー名は`mysql4foobar_team1`のようになります。
:::

たとえば、追加の設定を適用する必要がある場合、MySQLインターフェース用に追加のユーザーを作成できます。

1. オプション - カスタムユーザーに適用する[設定プロファイル](/sql-reference/statements/create/settings-profile)を作成します。例えば、次のように、後で作成するユーザーで接続したときにデフォルトで適用される追加の設定を含む`my_custom_profile`を作成します：

    ```sql
    CREATE SETTINGS PROFILE my_custom_profile SETTINGS prefer_column_name_to_alias=1;
    ```

    `prefer_column_name_to_alias`はあくまで例として使用されています。他の設定を使用することもできます。
2. [ユーザーを作成](/sql-reference/statements/create/user)し、次の形式を使用します：`mysql4<subdomain>_<username>`（[上記](#creating-multiple-mysql-users-in-clickhouse-cloud)参照）。パスワードはダブルSHA1形式である必要があります。例えば：

    ```sql
    CREATE USER mysql4foobar_team1 IDENTIFIED WITH double_sha1_password BY 'YourPassword42$';
    ```

    または、このユーザーのためにカスタムプロファイルを使用したい場合は：

    ```sql
    CREATE USER mysql4foobar_team1 IDENTIFIED WITH double_sha1_password BY 'YourPassword42$' SETTINGS PROFILE 'my_custom_profile';
    ```

    ここで、`my_custom_profile`は以前に作成したプロファイルの名前です。
3. [必要な権限を付与](/sql-reference/statements/grant)し、目的のテーブルやデータベースとのインタラクションを可能にします。たとえば、`system.query_log`へのアクセスのみを付与したい場合：

    ```sql
    GRANT SELECT ON system.query_log TO mysql4foobar_team1;
    ```

4. 作成したユーザーを使用して、MySQLインターフェースでClickHouse Cloudサービスに接続します。

### ClickHouse Cloudでの複数のMySQLユーザーのトラブルシューティング {#troubleshooting-multiple-mysql-users-in-clickhouse-cloud}

新しいMySQLユーザーを作成した後、MySQL CLIクライアントを介して接続時に次のエラーが表示される場合：

```
ERROR 2013 (HY000): Lost connection to MySQL server at 'reading authorization packet', system error: 54
```

この場合、ユーザー名が`mysql4<subdomain>_<username>`形式に従っていることを確認してください（[上記](#creating-multiple-mysql-users-in-clickhouse-cloud)を参照）。
