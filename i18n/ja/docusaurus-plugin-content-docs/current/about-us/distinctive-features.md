---
slug: /about-us/distinctive-features
sidebar_label: なぜClickHouseはユニークなのか？
sidebar_position: 50
description: ClickHouseが他のデータベース管理システムと異なる点を理解する
---

# ClickHouseの特異な機能

## 真の列指向データベース管理システム {#true-column-oriented-database-management-system}

真の列指向DBMSでは、値に追加のデータが保存されていません。これは、固定長の値をサポートし、値の横にその長さ「数」を保存しないことを意味します。たとえば、10億のUInt8型値は、圧縮されていない状態で約1GBを消費する必要があり、そうでないとCPUの使用に強く影響します。圧縮されていない場合でもデータをコンパクトに保存することが重要であり（「ゴミ」を含まず）、その理由は解凍の速度（CPU使用）は主に未圧縮データのボリュームに依存するためです。

これは、異なるカラムの値を別々に保存できるが、他のシナリオに最適化されているために分析クエリを効果的に処理できないシステム（HBase、Bigtable、Cassandra、Hypertableなど）とは対照的です。このようなシステムでは、一秒あたり約数十万行のスループットを得ることができますが、数億行のスループットは得られません。

最終的に、ClickHouseは単一のデータベースではなく、データベース管理システムです。テーブルやデータベースをランタイムで作成し、データを読み込み、再設定やサーバーの再起動なしでクエリを実行することができます。

## データ圧縮 {#data-compression}

一部の列指向DBMSはデータ圧縮を使用していません。しかし、データ圧縮は優れたパフォーマンスを達成する上で重要な役割を果たします。

ClickHouseは、ディスク容量とCPU消費のトレードオフの異なる効率的な一般目的の圧縮コーデックに加えて、特定の種類のデータに対する[特殊コーデック](/sql-reference/statements/create/table.md#specialized-codecs)を提供しており、これによりClickHouseは時系列データベースなどのニッチなデータベースに対抗し、上回ることができます。

## データのディスクストレージ {#disk-storage-of-data}

主キーによって物理的にデータがソートされていると、特定の値や値の範囲に基づいてデータを低遅延で取得することが可能になります。SAP HANAやGoogle PowerDrillなどの一部の列指向DBMSは、RAMでのみ動作します。このアプローチは、リアルタイム分析に必要以上に大きなハードウェア予算を要求します。

ClickHouseは通常のハードディスク上で動作するように設計されており、これによりデータストレージあたりのコストが低くなりますが、SSDおよび追加のRAMも利用可能であれば完全に活用されます。

## 複数コアでの並列処理 {#parallel-processing-on-multiple-cores}

大規模クエリは自然に並列化され、現在のサーバー上で利用可能なすべてのリソースを使用します。

## 複数サーバーでの分散処理 {#distributed-processing-on-multiple-servers}

上記の列指向DBMSのほとんどは、分散クエリ処理をサポートしていません。

ClickHouseでは、データが異なるシャードに存在することがあります。各シャードは、フォールトトレランスのために使用されるレプリカのグループになることがあります。すべてのシャードは、ユーザーに対して透過的に、クエリを並列で実行するために使用されます。

## SQLサポート {#sql-support}

ClickHouseは、ANSI SQL標準と主に互換性のある[SQL言語](/sql-reference/)をサポートしています。

サポートされているクエリには、[GROUP BY](../sql-reference/statements/select/group-by.md)、[ORDER BY](../sql-reference/statements/select/order-by.md)、[FROM](../sql-reference/statements/select/from.md)でのサブクエリ、[JOIN](../sql-reference/statements/select/join.md)句、[IN](../sql-reference/operators/in.md)演算子、[ウィンドウ関数](../sql-reference/window-functions/index.md)およびスカラサブクエリが含まれます。

相関（依存）サブクエリは執筆時点でサポートされていませんが、将来的に利用可能になる可能性があります。

## ベクトル計算エンジン {#vector-engine}

データはカラムによってのみ保存されるのではなく、ベクトル（カラムの部分）によって処理され、これにより高いCPU効率が実現されます。

## リアルタイムデータ挿入 {#real-time-data-updates}

ClickHouseは主キーを持つテーブルをサポートしています。主キーの範囲に対して迅速にクエリを実行するために、データはマージツリーを使用して徐々にソートされます。これにより、データをテーブルに連続的に追加することができます。新しいデータを取り込む際にロックはされません。

## 主インデックス {#primary-index}

主キーによって物理的にデータがソートされていると、特定の値や値の範囲に基づいてデータを低遅延で取得することが可能になります。

## 副インデックス {#secondary-indexes}

他のデータベース管理システムとは異なり、ClickHouseの副インデックスは特定の行や行の範囲を指し示しません。代わりに、データベースは、特定のデータ部分のすべての行がクエリのフィルタリング条件に一致しないことを事前に知り、それらを全く読み込まないことを可能にします。そのため、これを[データスキッピングインデックス](../engines/table-engines/mergetree-family/mergetree.md#table_engine-mergetree-data_skipping-indexes)と呼びます。

## オンラインクエリに適している {#suitable-for-online-queries}

ほとんどのOLAPデータベース管理システムは、サブ秒の遅延を持つオンラインクエリを目指していません。他のシステムでは、報告生成の時間が数十秒または数分かかることはしばしば許容されます。場合によっては、さらに時間がかかり、システムがレポートをオフラインで準備する（事前にまたは「後でお戻りください」と応答する）ことを強いられます。

ClickHouseにおける「低遅延」とは、クエリが遅延なしに処理でき、ユーザーインターフェースページが読み込まれる瞬間に即座に応答を準備することなく処理できることを意味します。言い換えれば、オンラインであるということです。

## 近似計算のサポート {#support-for-approximated-calculations}

ClickHouseは、パフォーマンスのために精度をトレードオフするさまざまな方法を提供します：

1.  異なる値の個数、中央値、分位数の近似計算のための集約関数。
2.  データの一部分（[SAMPLE](../sql-reference/statements/select/sample.md)）に基づいてクエリを実行し、近似結果を取得します。この場合、ディスクから取得されるデータは相対的に少なくなります。
3.  すべてのキーではなく、限られた数のランダムキーで集約を実行します。データ内でのキー分布の特定の条件に従えば、これによりリソースを少なく使いながら、相当な精度の結果が得られます。

## 適応型結合アルゴリズム {#adaptive-join-algorithm}

ClickHouseは、複数のテーブルをどのように[JOIN](../sql-reference/statements/select/join.md)するかを適応的に選択し、ハッシュ結合アルゴリズムを優先し、複数の大きなテーブルがある場合にはマージ結合アルゴリズムにフォールバックします。

## データレプリケーションとデータ整合性サポート {#data-replication-and-data-integrity-support}

ClickHouseは非同期のマルチマスターレプリケーションを使用しています。任意の利用可能なレプリカに書き込まれた後、残りのレプリカはバックグラウンドでコピーを取得します。システムは異なるレプリカ間で同一のデータを維持します。ほとんどの障害からの回復は自動的に、または複雑な場合には半自動的に行われます。

詳細については、[データレプリケーション](../engines/table-engines/mergetree-family/replication.md)のセクションを参照してください。

## ロールベースのアクセス制御 {#role-based-access-control}

ClickHouseは、SQLクエリを使用したユーザーアカウント管理を実装し、ANSI SQL標準や一般的なリレーショナルデータベース管理システムで見られるような[ロールベースのアクセス制御構成](/guides/sre/user-management/index.md)を許可します。

## 不利と見なされる可能性のある機能 {#clickhouse-features-that-can-be-considered-disadvantages}

1.  完全なトランザクションが存在しない。
2.  高速かつ低遅延で挿入済みデータを変更または削除する能力が欠如している。データをクリーンアップまたは変更するためのバッチ削除と更新が利用可能であり、例えば[GDPR](https://gdpr-info.eu)に準拠するために利用されます。
3.  スパースインデックスは、ClickHouseがキーによって単一の行を取得するポイントクエリに対してあまり期待通りに機能しない要因となります。
