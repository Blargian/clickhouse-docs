---
sidebar_label: 'Обновления'
slug: /manage/updates
title: 'Обновления'
description: 'С ClickHouse Cloud вам больше не нужно беспокоиться о патчах и обновлениях. Мы периодически развертываем обновления, которые включают исправления, новые функции и улучшения производительности.'
---

import Image from '@theme/IdealImage';
import EnterprisePlanFeatureBadge from '@theme/badges/EnterprisePlanFeatureBadge'
import ScalePlanFeatureBadge from '@theme/badges/ScalePlanFeatureBadge'
import fast_release from '@site/static/images/cloud/manage/fast_release.png';
import enroll_fast_release from '@site/static/images/cloud/manage/enroll_fast_release.png';
import scheduled_upgrades from '@site/static/images/cloud/manage/scheduled_upgrades.png';
import scheduled_upgrade_window from '@site/static/images/cloud/manage/scheduled_upgrade_window.png';


# Обновления

С ClickHouse Cloud вам больше не нужно беспокоиться о патчах и обновлениях. Мы периодически развертываем обновления, которые включают исправления, новые функции и улучшения производительности. Для получения полного списка нововведений в ClickHouse обратитесь к нашему [Cloud changelog](/cloud/reference/changelog.md).

:::note
Мы вводим новый механизм обновлений, концепцию, которую мы называем "make before break" (или MBB). С этим новым подходом мы добавляем обновленную реплику(и) перед удалением старой(их) во время операции обновления. Это приводит к более бесшовным обновлениям, которые менее разрушительны для работающих нагрузок.

В рамках этого изменения данные исторических системных таблиц будут сохраняться в течение максимум 30 дней в рамках событий обновления. Кроме того, любые данные системных таблиц старше 19 декабря 2024 года для сервисов на AWS или GCP и старше 14 января 2025 года для сервисов на Azure не будут сохраняться в рамках миграции на новые организационные уровни.
:::

## Совместимость версий {#version-compatibility}

Когда вы создаете сервис, настройка [`compatibility`](/operations/settings/settings#compatibility) устанавливается на самую актуальную версию ClickHouse, предлагаемую в ClickHouse Cloud на момент первоначального развертывания вашего сервиса.

Настройка `compatibility` позволяет вам использовать значения настроек по умолчанию из предыдущих версий. Когда ваш сервис обновляется до новой версии, версия, указанная для настройки `compatibility`, не меняется. Это означает, что значения по умолчанию для настроек, которые существовали на момент создания вашего сервиса, не изменятся (если вы уже не переопределили эти значения по умолчанию, в этом случае они останутся после обновления).

Вы не можете управлять настройкой `compatibility` для вашего сервиса. Вам нужно [связаться с поддержкой](https://clickhouse.com/support/program), если вы хотите изменить версию, установленную для вашей настройки `compatibility`.

## Режим обслуживания {#maintenance-mode}

Иногда может потребоваться обновить ваш сервис, что может потребовать отключения некоторых функций, таких как масштабирование или недоступность. В редких случаях нам может потребоваться принять меры по сервису, который испытывает проблемы, и вернуть его в здоровое состояние. Во время такого обслуживания вы увидите Banner на странице сервиса с надписью _"Обновление в процессе"_. Вы все равно можете использовать сервис для запросов в это время.

Вам не будет выставлен счет за время, когда сервис находится в режиме обслуживания. _Режим обслуживания_ — это редкое событие и его не следует путать с обычными обновлениями сервиса.

## Каналы выпуска (график обновлений) {#release-channels-upgrade-schedule}

Вы можете задать график обновления для вашего сервиса ClickHouse Cloud, подписавшись на конкретный канал выпуска.

### Канал быстрого выпуска (ранние обновления) {#fast-release-channel-early-upgrades}

<ScalePlanFeatureBadge feature="Канал быстрого выпуска"/>

Помимо регулярного графика обновлений, мы предлагаем **Канал быстрого выпуска**, если вы хотите, чтобы ваши сервисы получали обновления раньше обычного графика выпуска.

В частности, услуги будут:

- Получать последние версии ClickHouse
- Чаще обновляться по мере тестирования новых релизов

Вы можете изменить график выпуска сервиса в облачной консоли, как показано ниже:

<div class="eighty-percent">
    <Image img={fast_release} size="lg" alt="Выбор плана" border/>
</div>
<br/>

<div class="eighty-percent">
    <Image img={enroll_fast_release} size="lg" alt="Выбор плана" border/>
</div>
<br/>

Этот **Канал быстрого выпуска** подходит для тестирования новых функций в некритических средах. **Не рекомендуется для рабочих нагрузок в производстве с жесткими требованиями к времени безотказной работы и надежности.**

### Обычный канал выпуска {#regular-release-channel}

Для всех услуг уровня Scale и Enterprise, у которых не настроен канал выпуска или график обновлений, обновления будут выполняться в рамках обычного канала выпуска. Это рекомендуется для производственных сред.

Обновления для обычного канала выпуска обычно выполняются через две недели после **Канала быстрого выпуска**.

:::note
Сервисы уровня Basic обновляются вскоре после Канала быстрого выпуска.
:::

## Запланированные обновления {#scheduled-upgrades}

<EnterprisePlanFeatureBadge feature="Запланированные обновления" linking_verb_are="true"/>

Пользователи могут настроить окно обновления для услуг на уровне Enterprise.

Выберите сервис, для которого вы хотите указать запланированное обновление, затем `Настройки` из левого меню. Прокрутите до `Запланированные обновления`.

<div class="eighty-percent">
    <Image img={scheduled_upgrades} size="lg" alt="Запланированные обновления" border/>
</div>
<br/>

Выбор этой опции позволит пользователям выбрать день недели/временной интервал для обновлений базы данных и облака.

<div class="eighty-percent">
    <Image img={scheduled_upgrade_window} size="lg" alt="Запланированное окно обновления" border/>
</div>
<br/>
:::note
Хотя запланированные обновления следуют установленному графику, исключения применимы для критических патчей безопасности и исправлений уязвимостей. В случаях, когда обнаруживается срочная проблема безопасности, обновления могут быть выполнены вне запланированного окна. Клиенты будут уведомлены об таких исключениях при необходимости.
:::
