---
slug: /guides/sre/scaling-clusters
sidebar_label: 'シャードの再バランス'
sidebar_position: 20
description: 'ClickHouseは自動シャード再バランスをサポートしていないため、シャードの再バランスを行うためのベストプラクティスをいくつか提供します。'
title: 'データの再バランス'
---


# データの再バランス

ClickHouseは自動シャード再バランスをサポートしていません。しかし、以下の順序でシャードを再バランスする方法があります：

1. [分散テーブル](/engines/table-engines/special/distributed.md)のシャードを調整し、新しいシャードへの書き込みを偏らせることができます。これにより、クラスタ内での負荷の不均衡やホットスポットが発生する可能性がありますが、書き込みスループットが非常に高くない限り、ほとんどのシナリオで実行可能です。ユーザーは書き込みターゲットを変更する必要がなく、分散テーブルのままで構いません。これは既存のデータの再バランスには役立ちません。

2. （1）の代替策として、既存のクラスタを変更し、新しいシャードのみに書き込み、クラスタが均等になるまで手動で書き込みの重み付けを行います。これは（1）と同じ制限があります。

3. 既存のデータを再バランスする必要があり、データをパーティション分割している場合は、パーティションを切り離してから別のノードに手動で移動し、新しいシャードに再接続することを検討してください。これは以降の方法よりも手動ですが、より迅速でリソース集約的でない場合があります。これは手動操作であり、データの再バランスを考慮する必要があります。

4. [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select)を使用して、ソースクラスタから新しいクラスタにデータをエクスポートします。これは非常に大きなデータセットではパフォーマンスが良くなく、ソースクラスタに対してかなりのIOが発生し、 considerable network resourcesを使用する可能性があります。これは最終手段を表します。
