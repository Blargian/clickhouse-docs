---
title: "Postgresの生成カラム: 問題点とベストプラクティス"
slug: /integrations/clickpipes/postgres/generated_columns
---

PostgreSQLの生成カラムをレプリケートされているテーブルで使用する場合、いくつかの重要な考慮事項があります。これらの問題は、レプリケーションプロセスおよびデスティネーションシステムでのデータ整合性に影響を与える可能性があります。

## 生成カラムの問題 {#the-problem-with-generated-columns}

1. **`pgoutput`を介して公開されない:** 生成カラムは`pgoutput`論理レプリケーションプラグインを通じて公開されません。つまり、PostgreSQLから別のシステムにデータをレプリケートする際に、生成カラムの値はレプリケーションストリームに含まれません。

2. **主キーに関する問題:** 生成カラムが主キーの一部になっている場合、デスティネーションでの重複排除に問題が生じる可能性があります。生成カラムの値がレプリケートされないため、デスティネーションシステムには行を適切に特定し、重複を排除するための必要な情報がありません。

## ベストプラクティス {#best-practices}

これらの制限を回避するために、以下のベストプラクティスを考慮してください：

1. **デスティネーションでの生成カラムの再作成:** 生成カラムを処理するためにレプリケーションプロセスに依存するのではなく、dbt（データビルドツール）や他のデータ変換メカニズムを使用してデスティネーションでこれらのカラムを再作成することをお勧めします。

2. **主キーに生成カラムを使用しない:** レプリケートされるテーブルを設計する際には、生成カラムを主キーの一部として含めることを避けるのが最善です。

## UIの今後の改善 {#upcoming-improvements-to-ui}

今後のバージョンでは、ユーザーの支援のために以下のUIを追加する計画です：

1. **生成カラムが含まれるテーブルの特定:** UIには、生成カラムを含むテーブルを特定する機能が追加されます。これにより、ユーザーはこの問題の影響を受けるテーブルを理解することができます。

2. **ドキュメントとベストプラクティス:** UIには、レプリケートされたテーブルでの生成カラムの使用に関するベストプラクティスが含まれ、一般的な落とし穴を避けるためのガイダンスが提供されます。
