---
sidebar_label: 'Сервисы'
title: 'Сервисы'
slug: /cloud/manage/api/services-api-reference
description: 'Документация по Cloud API для сервисов'
---

## Список сервисов организации

Возвращает список всех сервисов в организации.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УБЕЖДЕНО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктивные сервисы масштабируемы, разработки - фиксированного размера. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Минимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Максимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и меньше или равно 360 для неплатных сервисов или 708 для платных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время авто-масштабирования в Гб. Должно быть кратно 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время авто-масштабирования в Гб.  Должно быть кратно 4 и меньше или равно 120* для неплатных сервисов или 236* для платных сервисов.* - максимальный размер реплики зависит от доступности оборудования облачного провайдера в вашем выбранном регионе.  | 
| numReplicas | number | Число реплик для сервиса. Число реплик должно быть от 2 до 20 для первого сервиса в складе. Сервисы, созданные в существующем складе, могут иметь количество реплик, равное 1. Могут действовать дополнительные ограничения в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, сервис может масштабироваться до нуля при простое. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальный тайм-аут простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Дополнительный пользовательский ключ шифрования диска | 
| encryptionAssumedRoleIdentifier | string | Дополнительная роль для использования шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис только для чтения. Он может быть только для чтения, если указан идентификатор хранилища данных. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). При указании параметра byocId также требуются параметры minReplicaMemoryGb и maxReplicaGb с значениями из следующих размеров: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Создать новый сервис

Создает новый сервис в организации и возвращает текущее состояние сервиса и пароль для доступа к сервису. Сервис запускается асинхронно.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, которая будет владелицей сервиса. |

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| tier | string | УБЕЖДЕНО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктивные сервисы масштабируемы, разработки - фиксированного размера. Сервисы Azure не поддерживают уровень разработки. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| minTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Минимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Максимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и меньше или равно 360 для неплатных сервисов или 708 для платных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время авто-масштабирования в Гб. Должно быть кратно 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время авто-масштабирования в Гб.  Должно быть кратно 4 и меньше или равно 120* для неплатных сервисов или 236* для платных сервисов.* - максимальный размер реплики зависит от доступности оборудования облачного провайдера в вашем выбранном регионе.  | 
| numReplicas | number | Число реплик для сервиса. Число реплик должно быть от 2 до 20 для первого сервиса в складе. Сервисы, созданные в существующем складе, могут иметь количество реплик, равное 1. Могут действовать дополнительные ограничения в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, сервис может масштабироваться до нуля при простое. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальный тайм-аут простоя (в минутах). Должно быть >= 5 минут. | 
| isReadonly | boolean | True, если этот сервис только для чтения. Он может быть только для чтения, если указан идентификатор хранилища данных. | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| backupId | string | Дополнительный идентификатор резервной копии, используемый в качестве исходного состояния для нового сервиса. При использовании регион и уровень нового экземпляра должны совпадать со значениями оригинального экземпляра. | 
| encryptionKey | string | Дополнительный пользовательский ключ шифрования диска | 
| encryptionAssumedRoleIdentifier | string | Дополнительная роль для использования шифрования диска | 
| privateEndpointIds | array | Список частных конечных точек | 
| privatePreviewTermsChecked | boolean | Принять условия частного превью. Это требуется только при создании первого сервиса в организации в случае частного превью. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). При указании параметра byocId также требуются параметры minReplicaMemoryGb и maxReplicaGb с значениями из следующих размеров: 28, 60, 124, 188, 252, 380. | 
| endpoints | array | Список конечных точек сервиса для включения или отключения |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| service.id | uuid | Уникальный ID сервиса. | 
| service.name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| service.provider | string | Облачный провайдер | 
| service.region | string | Регион сервиса. | 
| service.state | string | Текущее состояние сервиса. | 
| service.endpoints | array | Список всех конечных точек сервиса. | 
| service.tier | string | УБЕЖДЕНО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктивные сервисы масштабируемы, разработки - фиксированного размера. Сервисы Azure не поддерживают уровень разработки. | 
| service.minTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Минимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и больше или равно 24. | 
| service.maxTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Максимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и меньше или равно 360 для неплатных сервисов или 708 для платных сервисов. | 
| service.minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время авто-масштабирования в Гб. Должно быть кратно 4 и больше или равно 8. | 
| service.maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время авто-масштабирования в Гб.  Должно быть кратно 4 и меньше или равно 120* для неплатных сервисов или 236* для платных сервисов.* - максимальный размер реплики зависит от доступности оборудования облачного провайдера в вашем выбранном регионе.  | 
| service.numReplicas | number | Число реплик для сервиса. Число реплик должно быть от 2 до 20 для первого сервиса в складе. Сервисы, созданные в существующем складе, могут иметь количество реплик, равное 1. Могут действовать дополнительные ограничения в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| service.idleScaling | boolean | Когда установлено в true, сервис может масштабироваться до нуля при простое. По умолчанию true. | 
| service.idleTimeoutMinutes | number | Установите минимальный тайм-аут простоя (в минутах). Должно быть >= 5 минут. | 
| service.ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| service.createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| service.encryptionKey | string | Дополнительный пользовательский ключ шифрования диска | 
| service.encryptionAssumedRoleIdentifier | string | Дополнительная роль для использования шифрования диска | 
| service.iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| service.privateEndpointIds | array | Список частных конечных точек | 
| service.availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| service.dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| service.isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| service.isReadonly | boolean | True, если этот сервис только для чтения. Он может быть только для чтения, если указан идентификатор хранилища данных. | 
| service.releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| service.byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). При указании параметра byocId также требуются параметры minReplicaMemoryGb и maxReplicaGb с значениями из следующих размеров: 28, 60, 124, 188, 252, 380. | 
| password | string | Пароль для вновь созданного сервиса. |

#### Пример ответа

```json
{
  "service": {
    "id": "uuid",
    "name": "string",
    "provider": "string",
    "region": "string",
    "state": "string",
    "endpoints": "Array",
    "tier": "string",
    "minTotalMemoryGb": 0,
    "maxTotalMemoryGb": 0,
    "minReplicaMemoryGb": 0,
    "maxReplicaMemoryGb": 0,
    "numReplicas": 0,
    "idleScaling": "boolean",
    "idleTimeoutMinutes": 0,
    "ipAccessList": "Array",
    "createdAt": "date-time",
    "encryptionKey": "string",
    "encryptionAssumedRoleIdentifier": "string",
    "iamRole": "string",
    "privateEndpointIds": "Array",
    "availablePrivateEndpointIds": "Array",
    "dataWarehouseId": "string",
    "isPrimary": "boolean",
    "isReadonly": "boolean",
    "releaseChannel": "string",
    "byocId": "string"
  },
  "password": "string"
}
```

## Получить детали сервиса

Возвращает сервис, принадлежащий организации

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID запрашиваемого сервиса. |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УБЕЖДЕНО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктивные сервисы масштабируемы, разработки - фиксированного размера. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Минимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Максимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и меньше или равно 360 для неплатных сервисов или 708 для платных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время авто-масштабирования в Гб. Должно быть кратно 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время авто-масштабирования в Гб.  Должно быть кратно 4 и меньше или равно 120* для неплатных сервисов или 236* для платных сервисов.* - максимальный размер реплики зависит от доступности оборудования облачного провайдера в вашем выбранном регионе.  | 
| numReplicas | number | Число реплик для сервиса. Число реплик должно быть от 2 до 20 для первого сервиса в складе. Сервисы, созданные в существующем складе, могут иметь количество реплик, равное 1. Могут действовать дополнительные ограничения в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, сервис может масштабироваться до нуля при простое. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальный тайм-аут простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Дополнительный пользовательский ключ шифрования диска | 
| encryptionAssumedRoleIdentifier | string | Дополнительная роль для использования шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис только для чтения. Он может быть только для чтения, если указан идентификатор хранилища данных. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). При указании параметра byocId также требуются параметры minReplicaMemoryGb и maxReplicaGb с значениями из следующих размеров: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Обновить основные детали сервиса

Обновляет основные данные сервиса, такие как имя сервиса или список доступа по IP.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для обновления. |

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| ipAccessList |  |  | 
| privateEndpointIds |  |  | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| endpoints | array | Список конечных точек сервиса для изменения |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущее состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УБЕЖДЕНО для уровней организации BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктивные сервисы масштабируемы, разработки - фиксированного размера. Сервисы Azure не поддерживают уровень разработки. | 
| minTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Минимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УБЕЖДЕНО - неточные для сервисов с нестандартным числом реплик. Максимальная память трех рабочих во время авто-масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратно 12 и меньше или равно 360 для неплатных сервисов или 708 для платных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время авто-масштабирования в Гб. Должно быть кратно 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время авто-масштабирования в Гб.  Должно быть кратно 4 и меньше или равно 120* для неплатных сервисов или 236* для платных сервисов.* - максимальный размер реплики зависит от доступности оборудования облачного провайдера в вашем выбранном регионе.  | 
| numReplicas | number | Число реплик для сервиса. Число реплик должно быть от 2 до 20 для первого сервиса в складе. Сервисы, созданные в существующем складе, могут иметь количество реплик, равное 1. Могут действовать дополнительные ограничения в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Когда установлено в true, сервис может масштабироваться до нуля при простое. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальный тайм-аут простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список IP-адресов, разрешенных для доступа к сервису | 
| createdAt | date-time | Временная метка создания сервиса. ISO-8601. | 
| encryptionKey | string | Дополнительный пользовательский ключ шифрования диска | 
| encryptionAssumedRoleIdentifier | string | Дополнительная роль для использования шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис только для чтения. Он может быть только для чтения, если указан идентификатор хранилища данных. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse сразу после их выхода. Вы получите новые функции быстрее, но с более высоким риском ошибок. Эта функция доступна только для продуктивных сервисов. | 
| byocId | string | Это ID, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). При указании параметра byocId также требуются параметры minReplicaMemoryGb и maxReplicaGb с значениями из следующих размеров: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Удалить сервис

Удаляет сервис. Сервис должен быть в состоянии остановлен и удаляется асинхронно после этого вызова метода.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для удаления. |

## Получить конфигурацию частной конечной точки

Информация, необходимая для настройки частной конечной точки

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/privateEndpointConfig` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| endpointServiceId | string | Уникальный идентификатор интерфейсной конечной точки, которую вы создали в вашем VPC с ресурсом AWS (Имя сервиса), GCP (Целевая служба) или AZURE (Услуга частной ссылки) | 
| privateDnsHostname | string | Частное DNS-имя VPC, которое вы создали |

#### Пример ответа

```
{
  "endpointServiceId": "string",
  "privateDnsHostname": "string"
}
```

## Получить конечную точку запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой для ее включения.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | ID конечной точки запроса сервиса | 
| openApiKeys | array | Список OpenAPI ключей, которые могут получить доступ к конечной точке запроса сервиса | 
| roles | array | Список ролей, которые могут получить доступ к конечной точке запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |

#### Пример ответа

```
{
  "id": "string",
  "openApiKeys": "Array",
  "roles": "Array",
  "allowedOrigins": "string"
}
```

## Удалить конечную точку запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой для ее включения.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |

## Вставка/Обновление конечной точки запроса сервиса для данного экземпляра

Это экспериментальная функция. Пожалуйста, свяжитесь с поддержкой для ее включения.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/serviceQueryEndpoint` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| serviceId | uuid | ID запрашиваемого сервиса. |

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| roles | array | Роли | 
| openApiKeys | array | Версия конечной точки запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |

### Ответ
#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | ID конечной точки запроса сервиса | 
| openApiKeys | array | Список OpenAPI ключей, которые могут получить доступ к конечной точке запроса сервиса | 
| roles | array | Список ролей, которые могут получить доступ к конечной точке запроса сервиса | 
| allowedOrigins | string | Разрешенные источники в виде списка доменов, разделенных запятыми |

#### Пример ответа

```
{
  "id": "string",
  "openApiKeys": "Array",
  "roles": "Array",
  "allowedOrigins": "string"
}
```

## Обновить состояние сервиса

Запускает или останавливает сервис

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/state` |

### Запрос
#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей сервисом. | 
| serviceId | uuid | ID сервиса для обновления состояния. |

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| command | string | Команда для изменения состояния: 'start', 'stop'. |
### Ответ

```yaml
title: 'Схема ответа'
sidebar_label: 'Схема ответа'
keywords: ['response', 'schema', 'clickhouse', 'api']
description: 'Схема ответа для API ClickHouse.'
```

#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущая состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕВШИЙ для организаций BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, Разработка имеет фиксированный размер. Сервисы Azure не поддерживают уровень Development | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Минимальная память для трех рабочих узлов во время автомасштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Максимальная память для трех рабочих узлов во время автогождения в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньшим или равным 360 для неоплаченных сервисов или 708 для оплаченных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автослужебного масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автослужебного масштабирования в Гб. Должно быть кратным 4 и меньшим или равным 120* для неоплаченных сервисов или 236* для оплаченных сервисов.* - максимальный размер реплики зависит от доступности аппаратного обеспечения облачного провайдера в вашем выбранном регионе. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть от 2 до 20 для первого сервиса в хранилище данных. Сервисы, которые создаются в существующем хранилище данных, могут иметь количество реплик до 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может сокращаться до нуля, когда он неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список разрешенных IP-адресов для доступа к сервису | 
| createdAt | date-time | Время создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только доступным для чтения, если предоставлен dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они будут доступны. Вы получите новые функции быстрее, но с более высоким риском появления ошибок. Эта функция доступна только для продуктовых сервисов. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда указан параметр byocId, также требуются параметры minReplicaMemoryGb и maxReplicaGb с размерами среди следующих значений: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Обновить настройки автмасштабирования сервиса

Обновляет минимальные и максимальные лимиты памяти и поведение масштабирования в режиме ожидания для сервиса. Настройки памяти доступны только для "продуктовых" сервисов и должны быть кратным 12, начиная с 24 Гб. Пожалуйста, свяжитесь с поддержкой, чтобы активировать настройку numReplicas.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/scaling` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса для обновления параметров масштабирования. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Минимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Максимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньшим или равным 360 для неоплаченных сервисов или 708 для оплаченных сервисов. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть от 2 до 20 для первого сервиса в хранилище данных. Сервисы, которые создаются в существующем хранилище данных, могут иметь количество реплик до 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может сокращаться до нуля, когда он неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущая состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕВШИЙ для организаций BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, Разработка имеет фиксированный размер. Сервисы Azure не поддерживают уровень Development | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Минимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Максимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньшим или равным 360 для неоплаченных сервисов или 708 для оплаченных сервисов. | 
| minReplicaMemoryGb | number | Минимальная общая память каждой реплики во время автослужебного масштабирования в Гб. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная общая память каждой реплики во время автослужебного масштабирования в Гб. Должно быть кратным 4 и меньшим или равным 120* для неоплаченных сервисов или 236* для оплаченных сервисов. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть от 2 до 20 для первого сервиса в хранилище данных. Сервисы, которые создаются в существующем хранилище данных, могут иметь количество реплик до 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может сокращаться до нуля, когда он неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список разрешенных IP-адресов для доступа к сервису | 
| createdAt | date-time | Время создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только доступным для чтения, если предоставлен dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они будут доступны. Вы получите новые функции быстрее, но с более высоким риском появления ошибок. Эта функция доступна только для продуктовых сервисов. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда указан параметр byocId, также требуются параметры minReplicaMemoryGb и maxReplicaGb с размерами среди следующих значений: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Обновить настройки автмасштабирования реплик сервиса

Обновляет минимальные и максимальные лимиты памяти для каждой реплики и поведение масштабирования в режиме ожидания для сервиса. Настройки памяти доступны только для "продуктовых" сервисов и должны быть кратным 4, начиная с 8 Гб. Пожалуйста, свяжитесь с поддержкой, чтобы активировать настройку numReplicas.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/replicaScaling` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса для обновления параметров масштабирования. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| minReplicaMemoryGb | number | Минимальная память для автослужебного масштабирования в Гб для одной реплики. Доступно только для 'production' сервисов. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная память для автослужебного масштабирования в Гб для одной реплики. Доступно только для 'production' сервисов. Должно быть кратным 4 и меньшим или равным 120 для неоплаченных сервисов или 236 для оплаченных сервисов. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть от 2 до 20 для первого сервиса в хранилище данных. Сервисы, которые создаются в существующем хранилище данных, могут иметь количество реплик до 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может сокращаться до нуля, когда он неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор сервиса. | 
| name | string | Название сервиса. Алфавитно-цифровая строка с пробелами до 50 символов. | 
| provider | string | Облачный провайдер | 
| region | string | Регион сервиса. | 
| state | string | Текущая состояние сервиса. | 
| endpoints | array | Список всех конечных точек сервиса. | 
| tier | string | УСТАРЕВШИЙ для организаций BASIC, SCALE и ENTERPRISE. Уровень сервиса: 'development', 'production', 'dedicated_high_mem', 'dedicated_high_cpu', 'dedicated_standard', 'dedicated_standard_n2d_standard_4', 'dedicated_standard_n2d_standard_8', 'dedicated_standard_n2d_standard_32', 'dedicated_standard_n2d_standard_128', 'dedicated_standard_n2d_standard_32_16SSD', 'dedicated_standard_n2d_standard_64_24SSD'. Продуктовые сервисы масштабируются, Разработка имеет фиксированный размер. Сервисы Azure не поддерживают уровень Development | 
| minTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Минимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и больше или равно 24. | 
| maxTotalMemoryGb | number | УСТАРЕВШИЙ - неточный для сервисов с нестандартным количеством реплик. Максимальная память трех рабочих узлов во время автослужебного масштабирования в Гб. Доступно только для 'production' сервисов. Должно быть кратным 12 и меньшим или равным 360 для неоплаченных сервисов или 708 для оплаченных сервисов. | 
| minReplicaMemoryGb | number | Минимальная память для автослужебного масштабирования в Гб для одной реплики. Доступно только для 'production' сервисов. Должно быть кратным 4 и больше или равно 8. | 
| maxReplicaMemoryGb | number | Максимальная память для автослужебного масштабирования в Гб для одной реплики. Доступно только для 'production' сервисов. Должно быть кратным 4 и меньшим или равным 120 для неоплаченных сервисов или 236 для оплаченных сервисов. | 
| numReplicas | number | Количество реплик для сервиса. Количество реплик должно быть от 2 до 20 для первого сервиса в хранилище данных. Сервисы, которые создаются в существующем хранилище данных, могут иметь количество реплик до 1. Дополнительные ограничения могут применяться в зависимости от уровня вашей организации. По умолчанию 1 для уровня BASIC и 3 для уровней SCALE и ENTERPRISE. | 
| idleScaling | boolean | Если установлено в true, сервис может сокращаться до нуля, когда он неактивен. По умолчанию true. | 
| idleTimeoutMinutes | number | Установите минимальное время простоя (в минутах). Должно быть >= 5 минут. | 
| ipAccessList | array | Список разрешенных IP-адресов для доступа к сервису | 
| createdAt | date-time | Время создания сервиса. ISO-8601. | 
| encryptionKey | string | Необязательный ключ шифрования диска, предоставленный клиентом | 
| encryptionAssumedRoleIdentifier | string | Необязательная роль для использования для шифрования диска | 
| iamRole | string | IAM роль, используемая для доступа к объектам в s3 | 
| privateEndpointIds | array | Список частных конечных точек | 
| availablePrivateEndpointIds | array | Список доступных идентификаторов частных конечных точек, которые можно прикрепить к сервису | 
| dataWarehouseId | string | Хранилище данных, содержащее этот сервис | 
| isPrimary | boolean | True, если этот сервис является основным в хранилище данных | 
| isReadonly | boolean | True, если этот сервис доступен только для чтения. Он может быть только доступным для чтения, если предоставлен dataWarehouseId. | 
| releaseChannel | string | Выберите fast, если хотите получать новые релизы ClickHouse, как только они будут доступны. Вы получите новые функции быстрее, но с более высоким риском появления ошибок. Эта функция доступна только для продуктовых сервисов. | 
| byocId | string | Это идентификатор, возвращаемый после настройки региона для Bring Your Own Cloud (BYOC). Когда указан параметр byocId, также требуются параметры minReplicaMemoryGb и maxReplicaGb с размерами среди следующих значений: 28, 60, 124, 188, 252, 380. |

#### Пример ответа

```json
{
  "id": "uuid",
  "name": "string",
  "provider": "string",
  "region": "string",
  "state": "string",
  "endpoints": "Array",
  "tier": "string",
  "minTotalMemoryGb": 0,
  "maxTotalMemoryGb": 0,
  "minReplicaMemoryGb": 0,
  "maxReplicaMemoryGb": 0,
  "numReplicas": 0,
  "idleScaling": "boolean",
  "idleTimeoutMinutes": 0,
  "ipAccessList": "Array",
  "createdAt": "date-time",
  "encryptionKey": "string",
  "encryptionAssumedRoleIdentifier": "string",
  "iamRole": "string",
  "privateEndpointIds": "Array",
  "availablePrivateEndpointIds": "Array",
  "dataWarehouseId": "string",
  "isPrimary": "boolean",
  "isReadonly": "boolean",
  "releaseChannel": "string",
  "byocId": "string"
}
```

## Обновить пароль сервиса

Устанавливает новый пароль для сервиса

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/password` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса для обновления пароля. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| newPasswordHash | string | Необязательный хеш пароля. Используется для предотвращения передачи пароля по сети. Если не предоставлен, генерируется новый пароль и передается в ответе. В противном случае используется этот хеш. Алгоритм: echo -n "yourpassword" | sha256sum | tr -d '-' | xxd -r -p | base64 | 
| newDoubleSha1Hash | string | Необязательный двойной SHA1 хеш пароля для протокола MySQL. Если newPasswordHash не предоставлен, этот ключ будет проигнорирован, и будет использоваться сгенерированный пароль. Алгоритм: echo -n "yourpassword" | sha1sum | tr -d '-' | xxd -r -p | sha1sum | tr -d '-' |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| password | string | Новый пароль сервиса. Предоставляется только если в запросе не было 'newPasswordHash' |

#### Пример ответа

```
{
  "password": "string"
}
```

## Создать частную конечную точку.

Создать новую частную конечную точку. Частная конечная точка будет связана с этим сервисом и организацией

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/privateEndpoint` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор запрашиваемой организации. | 
| serviceId | uuid | Идентификатор запрашиваемого сервиса. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | Идентификатор частной конечной точки | 
| description | string | Описание частной конечной точки |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | string | Идентификатор частной конечной точки | 
| description | string | Описание частной конечной точки | 
| cloudProvider | string | Облачный провайдер, в котором расположена частная конечная точка | 
| region | string | Регион, в котором расположена частная конечная точка |

#### Пример ответа

```
{
  "id": "string",
  "description": "string",
  "cloudProvider": "string",
  "region": "string"
}
```

## Получить метрики prometheus

Возвращает метрики prometheus для сервиса.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/prometheus` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор запрашиваемого сервиса. | 
| filtered_metrics | boolean | Вернуть отфильтрованный список метрик Prometheus. |

## Список резервных копий сервиса

Возвращает список всех резервных копий для сервиса. Самые недавние резервные копии приходят первыми в списке.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backups` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей резервной копией. | 
| serviceId | uuid | Идентификатор сервиса, из которого была создана резервная копия. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор резервной копии. | 
| status | string | Статус резервной копии: 'done', 'error', 'in_progress'. | 
| serviceId | string | Название  | 
| startedAt | date-time | Время начала резервного копирования. ISO-8601. | 
| finishedAt | date-time | Время завершения резервного копирования. ISO-8601. Доступно только для завершенных резервных копий | 
| sizeInBytes | number | Размер резервной копии в байтах. | 
| durationInSeconds | number | Время в секундах, затраченное на создание резервной копии. Если статус все еще в процессе, это время в секундах с начала резервного копирования до текущего момента. | 
| type | string | Тип резервной копии ("full" или "incremental"). |

#### Пример ответа

```
{
  "id": "uuid",
  "status": "string",
  "serviceId": "string",
  "startedAt": "date-time",
  "finishedAt": "date-time",
  "sizeInBytes": 0,
  "durationInSeconds": 0,
  "type": "string"
}
```

## Получить детали резервной копии

Возвращает информацию о одной резервной копии.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backups/{backupId}` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей резервной копией. | 
| serviceId | uuid | Идентификатор сервиса, из которого была создана резервная копия. | 
| backupId | uuid | Идентификатор запрашиваемой резервной копии. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор резервной копии. | 
| status | string | Статус резервной копии: 'done', 'error', 'in_progress'. | 
| serviceId | string | Название  | 
| startedAt | date-time | Время начала резервного копирования. ISO-8601. | 
| finishedAt | date-time | Время завершения резервного копирования. ISO-8601. Доступно только для завершенных резервных копий | 
| sizeInBytes | number | Размер резервной копии в байтах. | 
| durationInSeconds | number | Время в секундах, затраченное на создание резервной копии. Если статус все еще в процессе, это время в секундах с начала резервного копирования до текущего момента. | 
| type | string | Тип резервной копии ("full" или "incremental"). |

#### Пример ответа

```
{
  "id": "uuid",
  "status": "string",
  "serviceId": "string",
  "startedAt": "date-time",
  "finishedAt": "date-time",
  "sizeInBytes": 0,
  "durationInSeconds": 0,
  "type": "string"
}
```

## Получить конфигурацию резервного копирования сервиса

Возвращает конфигурацию резервного копирования сервиса.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/backupConfiguration` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии будут доступны. | 
| backupStartTime | string | Время в формате HH:MM, когда будут выполняться резервные копии (оценивается в часовом поясе UTC). Когда он определен, период резервного копирования сбрасывается на каждые 24 часа. |

#### Пример ответа

```
{
  "backupPeriodInHours": 0,
  "backupRetentionPeriodInHours": 0,
  "backupStartTime": "string"
}
```

## Обновить конфигурацию резервного копирования сервиса

Обновляет конфигурацию резервного копирования сервиса. Требуется роль ADMIN auth key. Установка свойств с нулевым значением сбросит свойства на их значения по умолчанию.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/backupConfiguration` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии будут доступны. | 
| backupStartTime | string | Время в формате HH:MM, когда будут выполняться резервные копии (оценивается в часовом поясе UTC). Когда он определен, период резервного копирования сбрасывается на каждые 24 часа. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| backupPeriodInHours | number | Интервал в часах между каждой резервной копией. | 
| backupRetentionPeriodInHours | number | Минимальная продолжительность в часах, в течение которой резервные копии будут доступны. | 
| backupStartTime | string | Время в формате HH:MM, когда будут выполняться резервные копии (оценивается в часовом поясе UTC). Когда он определен, период резервного копирования сбрасывается на каждые 24 часа. |

#### Пример ответа

```
{
  "backupPeriodInHours": 0,
  "backupRetentionPeriodInHours": 0,
  "backupStartTime": "string"
}
```

## Список ClickPipes

**Этот конечный пункт находится в альфа-версии и может быть изменен.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Возвращает список ClickPipes.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, которому принадлежит ClickPipe. |

### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельности. Только для труб S3. Если установлено в 0, параллельность масштабируется автоматически на основе памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Является ли таблица управляемой ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиции. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |

#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```

## Создать ClickPipe

**Этот конечный пункт находится в альфа-версии и может быть изменен.** Свяжитесь с поддержкой ClickHouse для получения дополнительной информации.<br /><br /> Создайте новый ClickPipe.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, для которого создается ClickPipe. |

### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| source |  |  | 
| destination |  |  | 
| fieldMappings | array | Соответствия полей ClickPipe. |
```
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных выполнений. Только для S3 труб. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиционирования. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```json
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Получить ClickPipe

**Этот конец точки находится на альфа-стадии и может быть изменен.** Свяжитесь со службой поддержки ClickHouse для получения дополнительной информации.<br /><br /> Возвращает указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, владеющего ClickPipe. | 
| clickPipeId | uuid | Идентификатор запрашиваемого ClickPipe. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных выполнений. Только для S3 труб. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиционирования. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Обновить ClickPipe

**Этот конец точки находится на альфа-стадии и может быть изменен.** Свяжитесь со службой поддержки ClickHouse для получения дополнительной информации.<br /><br /> Обновите указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, для которого создается ClickPipe. | 
| clickPipeId | uuid | Идентификатор запрашиваемого ClickPipe. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| source |  |  | 
| destination |  |  | 
| fieldMappings | array | Соответствия полей ClickPipe. Это не обновит схему таблицы, только конфигурацию ClickPipe. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных выполнений. Только для S3 труб. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиционирования. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```json
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```
## Удалить ClickPipe

**Этот конец точки находится на альфа-стадии и может быть изменен.** Свяжитесь со службой поддержки ClickHouse для получения дополнительной информации.<br /><br /> Удалите указанный ClickPipe.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, владеющего ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для удаления. |
## Масштабирование ClickPipe

**Этот конец точки находится на альфа-стадии и может быть изменен.** Свяжитесь со службой поддержки ClickHouse для получения дополнительной информации.<br /><br /> Измените настройки масштабирования для указанного ClickPipe.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}/scaling` |
### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, владеющего ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для обновления настроек масштабирования. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| replicas | integer | Количество реплик, к которому необходимо масштабироваться. Используйте для масштабирования Kafka труб. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных выполнений. Только для S3 труб. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиционирования. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |
#### Пример ответа

```json
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```

## Обновить состояние ClickPipe

**Этот конец точки находится на альфа-стадии и может быть изменен.** Свяжитесь со службой поддержки ClickHouse для получения дополнительной информации.<br /><br /> Запустите или остановите ClickPipe. Остановка ClickPipe остановит процесс приема из любого состояния. Запуск разрешен для ClickPipes в состоянии "Stopped" или с состоянием "Failed".

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/services/{serviceId}/clickpipes/{clickPipeId}/state` |

### Запрос
#### Параметры пути

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | Идентификатор организации, владеющей сервисом. | 
| serviceId | uuid | Идентификатор сервиса, владеющего ClickPipe. | 
| clickPipeId | uuid | Идентификатор ClickPipe для обновления состояния. |
### Параметры тела

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| command | string | Команда для изменения состояния: 'start', 'stop'. |
### Ответ
#### Схема ответа

| Название | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный идентификатор ClickPipe. | 
| serviceId | uuid | Идентификатор сервиса, к которому принадлежит этот ClickPipe. | 
| name | string | Название ClickPipe. | 
| description | string | Описание ClickPipe. | 
| state | string | Текущее состояние ClickPipe. | 
| scaling.replicas | integer | Желаемое количество реплик. Только для масштабируемых труб. | 
| scaling.concurrency | integer | Желаемое количество параллельных выполнений. Только для S3 труб. Если установлено в 0, параллелизм автоматически масштабируется в зависимости от памяти кластера. | 
| source.kafka |  |  | 
| source.objectStorage |  |  | 
| source.kinesis |  |  | 
| source.postgres |  |  | 
| destination.database | string | Целевая база данных. | 
| destination.table | string | Целевая таблица. Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.managedTable | boolean | Управляется ли таблица ClickPipes? Обязательное поле для всех типов труб, кроме Postgres. | 
| destination.tableDefinition.engine.type | string | Тип движка целевой таблицы. В настоящее время единственным поддерживаемым движком является MergeTree. | 
| destination.tableDefinition.sortingKey | array | Ключ сортировки целевой таблицы. Список колонок. | 
| destination.tableDefinition.partitionBy | string | SQL выражение ключа партиционирования. | 
| destination.tableDefinition.primaryKey | string | Первичный ключ SQL выражения. | 
| destination.columns | array | Колонки целевой таблицы. Обязательное поле для всех типов труб, кроме Postgres. | 
| fieldMappings | array | Соответствия полей ClickPipe. | 
| createdAt | string | Дата создания ClickPipe. | 
| updatedAt | string | Дата последнего обновления ClickPipe. |

#### Пример ответа

```json
{
  "id": "uuid",
  "serviceId": "uuid",
  "name": "string",
  "description": "string",
  "state": "string",
  "scaling": {},
  "source": {},
  "destination": {
    "database": "string",
    "table": "string",
    "managedTable": "boolean",
    "tableDefinition": {
      "engine": {
        "type": "string"
      },
      "sortingKey": "Array",
      "partitionBy": "string",
      "primaryKey": "string"
    },
    "columns": "Array"
  },
  "fieldMappings": "Array",
  "createdAt": "string",
  "updatedAt": "string"
}
```