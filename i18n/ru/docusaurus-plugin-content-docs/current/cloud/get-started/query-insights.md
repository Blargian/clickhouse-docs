---
sidebar_title: 'Инсайты Запросов'
slug: /cloud/get-started/query-insights
description: 'Визуализируйте данные system.query_log для упрощения отладки запросов и оптимизации производительности'
keywords: ['инсайты запросов', 'журнал запросов', 'интерфейс журнала запросов', 'инсайты system.query_log']
title: 'Инсайты Запросов'
---

import Image from '@theme/IdealImage';
import insights_overview from '@site/static/images/cloud/sqlconsole/insights_overview.png';
import insights_latency from '@site/static/images/cloud/sqlconsole/insights_latency.png';
import insights_recent from '@site/static/images/cloud/sqlconsole/insights_recent.png';
import insights_drilldown from '@site/static/images/cloud/sqlconsole/insights_drilldown.png';
import insights_query_info from '@site/static/images/cloud/sqlconsole/insights_query_info.png';


# Инсайты Запросов

Функция **Инсайты Запросов** упрощает использование встроенного журнала запросов ClickHouse через различные визуализации и таблицы. Таблица `system.query_log` ClickHouse является ключевым источником информации для оптимизации запросов, отладки и мониторинга общего состояния и производительности кластера.

## Обзор Запросов {#query-overview}

После выбора сервиса, элемент навигации **Мониторинг** в левой боковой панели должен раскрыться, чтобы показать новый подпункт **Инсайты Запросов**. Нажатие на этот вариант открывает новую страницу Инсайтов Запросов:

<Image img={insights_overview} size="md" alt="Обзор интерфейса Инсайтов Запросов" border/>

## Метрики верхнего уровня {#top-level-metrics}

Статистические блоки в верхней части представляют собой некоторые основные метрики запросов верхнего уровня за выбранный период времени. Под ними мы показываем три графика временных рядов, представляющих объем запросов, задержку и уровень ошибок, разбитые по типам запросов (select, insert, другие) за выбранное временное окно. График задержки можно дополнительно настроить для отображения p50, p90 и p99 задержек:

<Image img={insights_latency} size="md" alt="График задержки интерфейса Инсайтов Запросов" border/>

## Недавние запросы {#recent-queries}

Под метриками верхнего уровня таблица отображает записи журнала запросов (группированные по нормализованному хешу запроса и пользователю) за выбранное временное окно:

<Image img={insights_recent} size="md" alt="Таблица Недавних Запросов интерфейса Инсайтов Запросов" border/>

Недавние запросы могут быть отфильтрованы и отсортированы по любому доступному полю. Таблица также может быть настроена для отображения или скрытия дополнительных полей, таких как таблицы, p90 и p99 задержки.

## Детализация Запроса {#query-drill-down}

Выбор запроса из таблицы недавних запросов откроет всплывающее окно с метриками и информацией, специфичными для выбранного запроса:

<Image img={insights_drilldown} size="md" alt="Детализация Запроса интерфейса Инсайтов Запросов" border/>

Как мы видим из всплывающего окна, этот конкретный запрос был выполнен более 3000 раз за последние 24 часа. Все метрики на вкладке **Информация о Запросе** являются агрегированными метриками, но мы также можем просмотреть метрики из отдельных запусков, выбрав вкладку **История Запросов**:

<Image img={insights_query_info} size="sm" alt="Информация о Запросе интерфейса Инсайтов Запросов" border/>

<br />

Из этой панели можно развернуть элементы `Настройки` и `События Профилирования` для каждого выполнения запроса, чтобы получить дополнительную информацию.
