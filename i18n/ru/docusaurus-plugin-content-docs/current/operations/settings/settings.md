---
title: 'Настройки Сессии'
sidebar_label: 'Настройки Сессии'
slug: /operations/settings/settings
toc_max_heading_level: 2
description: 'Настройки, которые находятся в таблице system.settings.'
---

import ExperimentalBadge from '@theme/badges/ExperimentalBadge';
import BetaBadge from '@theme/badges/BetaBadge';
import CloudAvailableBadge from '@theme/badges/CloudAvailableBadge';

<!-- Autogenerated -->
Все нижеуказанные настройки также доступны в таблице [system.settings](/docs/operations/system-tables/settings). Эти настройки автоматически сгенерированы из [source](https://github.com/ClickHouse/ClickHouse/blob/master/src/Core/Settings.cpp).
## add_http_cors_header {#add_http_cors_header}



Тип: Bool

Значение по умолчанию: 0

Включить добавление http CORS заголовка.
## additional_result_filter {#additional_result_filter}



Тип: String

Значение по умолчанию: 

Дополнительное выражение фильтра, которое применяется к результату запроса `SELECT`.
Эта настройка не применяется к подзапросам.

**Пример**

```sql
INSERT INTO table_1 VALUES (1, 'a'), (2, 'bb'), (3, 'ccc'), (4, 'dddd');
SElECT * FROM table_1;
```
```response
┌─x─┬─y────┐
│ 1 │ a    │
│ 2 │ bb   │
│ 3 │ ccc  │
│ 4 │ dddd │
└───┴──────┘
```
```sql
SELECT *
FROM table_1
SETTINGS additional_result_filter = 'x != 2'
```
```response
┌─x─┬─y────┐
│ 1 │ a    │
│ 3 │ ccc  │
│ 4 │ dddd │
└───┴──────┘
```
## additional_table_filters {#additional_table_filters}



Тип: Map

Значение по умолчанию: {}

Дополнительное выражение фильтра, которое применяется после чтения из заданной таблицы.

**Пример**

```sql
INSERT INTO table_1 VALUES (1, 'a'), (2, 'bb'), (3, 'ccc'), (4, 'dddd');
SELECT * FROM table_1;
```
```response
┌─x─┬─y────┐
│ 1 │ a    │
│ 2 │ bb   │
│ 3 │ ccc  │
│ 4 │ dddd │
└───┴──────┘
```
```sql
SELECT *
FROM table_1
SETTINGS additional_table_filters = {'table_1': 'x != 2'}
```
```response
┌─x─┬─y────┐
│ 1 │ a    │
│ 3 │ ccc  │
│ 4 │ dddd │
└───┴──────┘
```
## aggregate_functions_null_for_empty {#aggregate_functions_null_for_empty}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает переписывание всех агрегатных функций в запросе, добавляя суффикс [-OrNull](/sql-reference/aggregate-functions/combinators#-ornull) к ним. Включите его для совместимости со стандартами SQL.
Это реализуется через переписывание запроса (аналогично настройке [count_distinct_implementation](#count_distinct_implementation)) для получения согласованных результатов для распределенных запросов.

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

**Пример**

Рассмотрим следующий запрос с агрегатными функциями:
```sql
SELECT SUM(-1), MAX(0) FROM system.one WHERE 0;
```

При `aggregate_functions_null_for_empty = 0` результат будет:
```text
┌─SUM(-1)─┬─MAX(0)─┐
│       0 │      0 │
└─────────┴────────┘
```

При `aggregate_functions_null_for_empty = 1` результат будет:
```text
┌─SUMOrNull(-1)─┬─MAXOrNull(0)─┐
│          NULL │         NULL │
└───────────────┴──────────────┘
```
## aggregation_in_order_max_block_bytes {#aggregation_in_order_max_block_bytes}



Тип: UInt64

Значение по умолчанию: 50000000

Максимальный размер блока в байтах, накапливаемого во время агрегации по порядку первичного ключа. Более низкий размер блока позволяет параллелить более финальную стадию слияния агрегации.
## aggregation_memory_efficient_merge_threads {#aggregation_memory_efficient_merge_threads}



Тип: UInt64

Значение по умолчанию: 0

Число потоков, используемых для объединения промежуточных результатов агрегации в режиме экономии памяти. Чем больше, тем больше используется памяти. 0 означает - то же самое, что и 'max_threads'.
## allow_aggregate_partitions_independently {#allow_aggregate_partitions_independently}



Тип: Bool

Значение по умолчанию: 0

Включить независимую агрегацию партиций в отдельных потоках, когда ключ партиционирования соответствует ключу группировки. Полезно, когда количество партиций близко к количеству ядер и парции примерно одинакового размера.
## allow_archive_path_syntax {#allow_archive_path_syntax}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 1

Движки файлов/S3 и табличные функции будут разбирать пути с помощью '::' как `<archive> :: <file>\`, если архив имеет правильное расширение.
## allow_asynchronous_read_from_io_pool_for_merge_tree {#allow_asynchronous_read_from_io_pool_for_merge_tree}



Тип: Bool

Значение по умолчанию: 0

Использовать фоновый I/O пул для чтения из таблиц MergeTree. Эта настройка может увеличить производительность для I/O-ограниченных запросов.
## allow_changing_replica_until_first_data_packet {#allow_changing_replica_until_first_data_packet}



Тип: Bool

Значение по умолчанию: 0

Если включено, в хеджируемых запросах мы можем начать новое соединение до получения первого пакета данных, даже если мы уже сделали некоторый прогресс
(но прогресс не обновился в течение таймаута `receive_data_timeout`), в противном случае мы отключаем изменение реплики после первого достижения прогресса.
## allow_create_index_without_type {#allow_create_index_without_type}



Тип: Bool

Значение по умолчанию: 0

Разрешить запрос CREATE INDEX без типа. Запрос будет проигнорирован. Сделано для тестов на совместимость с SQL.
## allow_custom_error_code_in_throwif {#allow_custom_error_code_in_throwif}



Тип: Bool

Значение по умолчанию: 0

Включить пользовательский код ошибки в функции throwIf(). Если true, выбрасываемые исключения могут иметь неожиданные коды ошибок.
## allow_ddl {#allow_ddl}



Тип: Bool

Значение по умолчанию: 1

Если это значение установлено в true, то пользователю разрешено выполнять DDL-запросы.
## allow_deprecated_database_ordinary {#allow_deprecated_database_ordinary}



Тип: Bool

Значение по умолчанию: 0

Разрешить создание баз данных с устаревшим Ordinary движком.
## allow_deprecated_error_prone_window_functions {#allow_deprecated_error_prone_window_functions}



Тип: Bool

Значение по умолчанию: 0

Разрешить использование устаревших оконных функций, подверженных ошибкам (neighbor, runningAccumulate, runningDifferenceStartingWithFirstValue, runningDifference).
## allow_deprecated_snowflake_conversion_functions {#allow_deprecated_snowflake_conversion_functions}



Тип: Bool

Значение по умолчанию: 0

Функции `snowflakeToDateTime`, `snowflakeToDateTime64`, `dateTimeToSnowflake` и `dateTime64ToSnowflake` устарели и по умолчанию отключены.
Пожалуйста, используйте функции `snowflakeIDToDateTime`, `snowflakeIDToDateTime64`, `dateTimeToSnowflakeID` и `dateTime64ToSnowflakeID` вместо них.

Чтобы повторно включить устаревшие функции (например, в переходный период), пожалуйста, установите эту настройку в `true`.
## allow_deprecated_syntax_for_merge_tree {#allow_deprecated_syntax_for_merge_tree}



Тип: Bool

Значение по умолчанию: 0

Разрешить создание таблиц *MergeTree с устаревшим синтаксисом определения движка.
## allow_distributed_ddl {#allow_distributed_ddl}



Тип: Bool

Значение по умолчанию: 1

Если это значение установлено в true, то пользователю разрешено выполнять распределенные DDL-запросы.
## allow_drop_detached {#allow_drop_detached}



Тип: Bool

Значение по умолчанию: 0

Разрешить выполнение запросов ALTER TABLE ... DROP DETACHED PART[ITION] ...
## allow_execute_multiif_columnar {#allow_execute_multiif_columnar}



Тип: Bool

Значение по умолчанию: 1

Разрешить выполнение функции multiIf в столбцовом формате.
## allow_experimental_analyzer {#allow_experimental_analyzer}



Тип: Bool

Значение по умолчанию: 1

Разрешить новый анализатор запросов.
## allow_experimental_codecs {#allow_experimental_codecs}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Если это значение установлено в true, разрешить указание экспериментальных кодеков сжатия (но у нас их еще нет, и эта опция ничего не делает).
## allow_experimental_database_glue_catalog {#allow_experimental_database_glue_catalog}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить экспериментальный движок базы данных DataLakeCatalog с catalog_type = 'glue'.
## allow_experimental_database_iceberg {#allow_experimental_database_iceberg}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить экспериментальный движок базы данных DataLakeCatalog с catalog_type = 'iceberg'.
## allow_experimental_database_materialized_postgresql {#allow_experimental_database_materialized_postgresql}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить создание базы данных с Engine=MaterializedPostgreSQL(...).
## allow_experimental_database_unity_catalog {#allow_experimental_database_unity_catalog}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить экспериментальный движок базы данных DataLakeCatalog с catalog_type = 'unity'.
## allow_experimental_dynamic_type {#allow_experimental_dynamic_type}



Тип: Bool

Значение по умолчанию: 1

Разрешает создание [Dynamic](../../sql-reference/data-types/dynamic.md) типа данных.
## allow_experimental_full_text_index {#allow_experimental_full_text_index}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Если это значение установлено в true, разрешить использование экспериментального полнотекстового индекса.
## allow_experimental_funnel_functions {#allow_experimental_funnel_functions}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить экспериментальные функции для анализа воронок.
## allow_experimental_hash_functions {#allow_experimental_hash_functions}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить экспериментальные хеш-функции.
## allow_experimental_inverted_index {#allow_experimental_inverted_index}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Если это значение установлено в true, разрешить использование экспериментированного обратного индекса.
## allow_experimental_join_condition {#allow_experimental_join_condition}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Поддерживать соединения с неравенствами, которые включают столбцы из обеих таблиц, слева и справа. Например, `t1.y < t2.y`.
## allow_experimental_join_right_table_sorting {#allow_experimental_join_right_table_sorting}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Если это значение установлено в true, и соблюдены условия `join_to_sort_minimum_perkey_rows` и `join_to_sort_maximum_table_rows`, произвести переупорядочение правой таблицы по ключу для улучшения производительности в левом или внутреннем хеш-соединении.
## allow_experimental_json_type {#allow_experimental_json_type}



Тип: Bool

Значение по умолчанию: 1

Разрешает создание [JSON](../../sql-reference/data-types/newjson.md) типа данных.
## allow_experimental_kafka_offsets_storage_in_keeper {#allow_experimental_kafka_offsets_storage_in_keeper}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить экспериментальную функцию хранения смещений, связанных с Kafka, в ClickHouse Keeper. Когда включено, путь к ClickHouse Keeper и имя реплики можно указать для Kafka table engine. В результате вместо обычного движка Kafka будет использоваться новый тип движка хранения, который хранит зафиксированные смещения преимущественно в ClickHouse Keeper.
## allow_experimental_kusto_dialect {#allow_experimental_kusto_dialect}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить язык запросов Kusto (KQL) - альтернативу SQL.
## allow_experimental_live_view {#allow_experimental_live_view}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешает создание устаревшего LIVE VIEW.

Возможные значения:

- 0 — Работа с live-представлениями отключена.
- 1 — Работа с live-представлениями включена.
## allow_experimental_materialized_postgresql_table {#allow_experimental_materialized_postgresql_table}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешает использование движка таблицы MaterializedPostgreSQL. Отключено по умолчанию, так как эта функция является экспериментальной.
## allow_experimental_nlp_functions {#allow_experimental_nlp_functions}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить экспериментальные функции для обработки естественного языка.
## allow_experimental_object_type {#allow_experimental_object_type}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить устаревший тип данных Object.
## allow_experimental_parallel_reading_from_replicas {#allow_experimental_parallel_reading_from_replicas}
<BetaBadge/>


Тип: UInt64

Значение по умолчанию: 0

Использовать до `max_parallel_replicas` количество реплик из каждого шарда для выполнения запроса SELECT. Чтение параллелизуется и координируется динамически. 0 - отключено, 1 - включено, отключается без предупреждений в случае ошибки, 2 - включено, выбрасывать исключение в случае ошибки.
## allow_experimental_prql_dialect {#allow_experimental_prql_dialect}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить PRQL - альтернативу SQL.
## allow_experimental_query_deduplication {#allow_experimental_query_deduplication}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Экспериментальная дедупликация данных для SELECT-запросов на основе UUID частей.
## allow_experimental_shared_set_join {#allow_experimental_shared_set_join}
<ExperimentalBadge/>

<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 1

Действует только в ClickHouse Cloud. Разрешить создание ShareSet и SharedJoin.
## allow_experimental_statistics {#allow_experimental_statistics}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешает определение столбцов со [статистикой](../../engines/table-engines/mergetree-family/mergetree.md/#table_engine-mergetree-creating-a-table) и [манипуляцию статистикой](../../engines/table-engines/mergetree-family/mergetree.md/#column-statistics).
## allow_experimental_time_series_table {#allow_experimental_time_series_table}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешает создание таблиц с движком таблицы [TimeSeries](../../engines/table-engines/integrations/time-series.md).

Возможные значения:

- 0 — движок таблицы [TimeSeries](../../engines/table-engines/integrations/time-series.md) отключен.
- 1 — движок таблицы [TimeSeries](../../engines/table-engines/integrations/time-series.md) включен.
## allow_experimental_ts_to_grid_aggregate_function {#allow_experimental_ts_to_grid_aggregate_function}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Экспериментальная агрегатная функция tsToGrid для ресемплинга временных рядов, похожего на Prometheus. Только для облака.
## allow_experimental_variant_type {#allow_experimental_variant_type}



Тип: Bool

Значение по умолчанию: 1

Разрешает создание [Variant](../../sql-reference/data-types/variant.md) типа данных.
## allow_experimental_vector_similarity_index {#allow_experimental_vector_similarity_index}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешить экспериментальный индекс сходства векторов.
## allow_experimental_window_view {#allow_experimental_window_view}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Включить WINDOW VIEW. Достаточно незрелый.
## allow_general_join_planning {#allow_general_join_planning}



Тип: Bool

Значение по умолчанию: 1

Разрешает более общий алгоритм планирования соединений, который может обрабатывать более сложные условия, но работает только с хеш-соединениями. Если хеш-соединение не включено, используется обычный алгоритм планирования соединений, независимо от значения этой настройки.
## allow_get_client_http_header {#allow_get_client_http_header}



Тип: Bool

Значение по умолчанию: 0

Разрешить использование функции `getClientHTTPHeader`, которая позволяет получить значение заголовка текущего HTTP-запроса. По соображениям безопасности по умолчанию отключено, так как некоторые заголовки, такие как `Cookie`, могут содержать конфиденциальную информацию. Обратите внимание, что заголовки `X-ClickHouse-*` и `Authentication` всегда ограничены и не могут быть получены с помощью этой функции.
## allow_hyperscan {#allow_hyperscan}



Тип: Bool

Значение по умолчанию: 1

Разрешить функции, использующие библиотеку Hyperscan. Отключить, чтобы избежать потенциально долгих времен компиляции и чрезмерного использования ресурсов.
## allow_introspection_functions {#allow_introspection_functions}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает [функции интроспекции](../../sql-reference/functions/introspection.md) для профилирования запросов.

Возможные значения:

- 1 — Функции интроспекции включены.
- 0 — Функции интроспекции отключены.

**См. также**

- [Профилировщик запросов с выборкой](../../operations/optimizing-performance/sampling-query-profiler.md)
- Системная таблица [trace_log](/operations/system-tables/trace_log)
## allow_materialized_view_with_bad_select {#allow_materialized_view_with_bad_select}



Тип: Bool

Значение по умолчанию: 0

Разрешить CREATE MATERIALIZED VIEW с запросом SELECT, который ссылается на несуществующие таблицы или столбцы. Он все равно должен быть синтаксически корректен. Не применяется к обновляемым MV. Не применяется, если схема MV должна быть выведена из запроса SELECT (т.е. если CREATE не имеет списка столбцов и не содержит таблицы TO). Может использоваться для создания MV до его исходной таблицы.
## allow_named_collection_override_by_default {#allow_named_collection_override_by_default}



Тип: Bool

Значение по умолчанию: 1

Разрешить переопределение полей именованных коллекций по умолчанию.
## allow_non_metadata_alters {#allow_non_metadata_alters}



Тип: Bool

Значение по умолчанию: 1

Разрешить выполнение изменений, которые влияют не только на метаданные таблиц, но и на данные на диске.
## allow_nonconst_timezone_arguments {#allow_nonconst_timezone_arguments}



Тип: Bool

Значение по умолчанию: 0

Разрешить неконстантные аргументы часового пояса в некоторых функциях, связанных со временем, таких как toTimeZone(), fromUnixTimestamp*(), snowflakeToDateTime*().
## allow_nondeterministic_mutations {#allow_nondeterministic_mutations}



Тип: Bool

Значение по умолчанию: 0

Настройка уровня пользователя, которая позволяет мутирования в реплицированных таблицах использовать недетерминированные функции, такие как `dictGet`.

Учитывая, что, например, словари могут быть несинхронизированы между узлами, мутации, которые извлекают значения из них, по умолчанию запрещены в реплицированных таблицах. Включение этой настройки позволяет такое поведение, оставляя за пользователем ответственность за обеспечение синхронизации данных между всеми узлами.

**Пример**

```xml
<profiles>
    <default>
        <allow_nondeterministic_mutations>1</allow_nondeterministic_mutations>

        <!-- ... -->
    </default>

    <!-- ... -->

</profiles>
```
## allow_nondeterministic_optimize_skip_unused_shards {#allow_nondeterministic_optimize_skip_unused_shards}



Тип: Bool

Значение по умолчанию: 0

Разрешить недетерминированные (такие как `rand` или `dictGet`, поскольку последняя имеет некоторые нюансы с обновлениями) функции в ключе шардирования.

Возможные значения:

- 0 — Запрещено.
- 1 — Разрешено.
## allow_not_comparable_types_in_comparison_functions {#allow_not_comparable_types_in_comparison_functions}



Тип: Bool

Значение по умолчанию: 0

Разрешает или ограничивает использование несравнимых типов (таких как JSON/Object/AggregateFunction) в функциях сравнения `equal/less/greater/etc`.
## allow_not_comparable_types_in_order_by {#allow_not_comparable_types_in_order_by}



Тип: Bool

Значение по умолчанию: 0

Разрешает или ограничивает использование несравнимых типов (таких как JSON/Object/AggregateFunction) в ключах ORDER BY.
## allow_prefetched_read_pool_for_local_filesystem {#allow_prefetched_read_pool_for_local_filesystem}



Тип: Bool

Значение по умолчанию: 0

Предпочтение префетченного пула потоков, если все части находятся на локальной файловой системе.
## allow_prefetched_read_pool_for_remote_filesystem {#allow_prefetched_read_pool_for_remote_filesystem}



Тип: Bool

Значение по умолчанию: 1

Предпочтение префетченного пула потоков, если все части находятся на удаленной файловой системе.
## allow_push_predicate_ast_for_distributed_subqueries {#allow_push_predicate_ast_for_distributed_subqueries}



Тип: Bool

Значение по умолчанию: 1

Разрешает применение предиката на уровне AST для распределенных подзапросов с включенным анализатором.
## allow_push_predicate_when_subquery_contains_with {#allow_push_predicate_when_subquery_contains_with}



Тип: Bool

Значение по умолчанию: 1

Разрешает применение предиката, когда подзапрос содержит оператор WITH.
## allow_reorder_prewhere_conditions {#allow_reorder_prewhere_conditions}



Тип: Bool

Значение по умолчанию: 1

При перемещении условий из WHERE в PREWHERE, разрешить их переупорядочение для оптимизации фильтрации.
## allow_settings_after_format_in_insert {#allow_settings_after_format_in_insert}



Тип: Bool

Значение по умолчанию: 0

Контролирует, разрешено ли использование `SETTINGS` после `FORMAT` в запросах `INSERT`. Не рекомендуется использовать это, так как это может интерпретировать часть `SETTINGS` как значения.

Пример:

```sql
INSERT INTO FUNCTION null('foo String') SETTINGS max_threads=1 VALUES ('bar');
```

Но следующий запрос будет работать только с `allow_settings_after_format_in_insert`:

```sql
SET allow_settings_after_format_in_insert=1;
INSERT INTO FUNCTION null('foo String') VALUES ('bar') SETTINGS max_threads=1;
```

Возможные значения:

- 0 — Запретить.
- 1 — Разрешить.

:::note
Используйте эту настройку только для обратной совместимости, если ваши случаи использования зависят от старого синтаксиса.
:::
## allow_simdjson {#allow_simdjson}



Тип: Bool

Значение по умолчанию: 1

Разрешить использование библиотеки simdjson в функциях 'JSON*', если доступны инструкции AVX2. Если отключено, будет использоваться rapidjson.
## allow_statistics_optimize {#allow_statistics_optimize}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Разрешает использование статистики для оптимизации запросов.
## allow_suspicious_codecs {#allow_suspicious_codecs}



Тип: Bool

Значение по умолчанию: 0

Если это значение установлено в true, разрешить указание бессмысленных кодеков сжатия.
## allow_suspicious_fixed_string_types {#allow_suspicious_fixed_string_types}



Тип: Bool

Значение по умолчанию: 0

В операторе CREATE TABLE разрешается создание столбцов типа FixedString(n) с n > 256. FixedString с длиной >= 256 является подозрительным и, скорее всего, указывает на неправильное использование.
## allow_suspicious_indices {#allow_suspicious_indices}



Тип: Bool

Значение по умолчанию: 0

Отклонить первичные/вторичные индексы и ключи сортировки с идентичными выражениями.
## allow_suspicious_low_cardinality_types {#allow_suspicious_low_cardinality_types}



Тип: Bool

Значение по умолчанию: 0

Разрешает или ограничивает использование [LowCardinality](../../sql-reference/data-types/lowcardinality.md) с типами данных фиксированного размера 8 байт или меньше: числовые типы данных и `FixedString(8_bytes_or_less)`.

Для маленьких фиксированных значений использование `LowCardinality` обычно неэффективно, поскольку ClickHouse хранит числовой индекс для каждой строки. В результате:

- Использование дискового пространства может увеличиться.
- Потребление оперативной памяти может быть выше в зависимости от размера словаря.
- Некоторые функции могут работать медленнее из-за дополнительных операций кодирования/декодирования.

Время слияния в таблицах на движке [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md) может увеличиться по всем вышеперечисленным причинам.

Возможные значения:

- 1 — Использование `LowCardinality` не ограничено.
- 0 — Использование `LowCardinality` ограничено.
## allow_suspicious_primary_key {#allow_suspicious_primary_key}



Тип: Bool

Значение по умолчанию: 0

Разрешить подозрительные `PRIMARY KEY`/`ORDER BY` для MergeTree (т.е. SimpleAggregateFunction).
## allow_suspicious_ttl_expressions {#allow_suspicious_ttl_expressions}



Тип: Bool

Значение по умолчанию: 0

Отклонять TTL-выражения, которые не зависят от каких-либо столбцов таблицы. Это чаще всего указывает на ошибку пользователя.
## allow_suspicious_types_in_group_by {#allow_suspicious_types_in_group_by}



Тип: Bool

Значение по умолчанию: 0

Разрешает или ограничивает использование [Variant](../../sql-reference/data-types/variant.md) и [Dynamic](../../sql-reference/data-types/dynamic.md) типов в ключах GROUP BY.
## allow_suspicious_types_in_order_by {#allow_suspicious_types_in_order_by}



Тип: Bool

Значение по умолчанию: 0

Разрешает или ограничивает использование [Variant](../../sql-reference/data-types/variant.md) и [Dynamic](../../sql-reference/data-types/dynamic.md) типов в ключах ORDER BY.
## allow_suspicious_variant_types {#allow_suspicious_variant_types}



Тип: Bool

Значение по умолчанию: 0

В операторе CREATE TABLE разрешает указание типа Variant с похожими вариантными типами (например, с разными числовыми или датированными типами). Включение этой настройки может привести к некоторой неоднозначности при работе со значениями с похожими типами.
## allow_unrestricted_reads_from_keeper {#allow_unrestricted_reads_from_keeper}



Тип: Bool

Значение по умолчанию: 0

Разрешить неограниченные (без условий на путь) чтения из системной таблицы zookeeper, может быть удобно, но не безопасно для zookeeper.
## alter_move_to_space_execute_async {#alter_move_to_space_execute_async}



Тип: Bool

Значение по умолчанию: 0

Выполнить ALTER TABLE MOVE ... TO [DISK|VOLUME] асинхронно.
## alter_partition_verbose_result {#alter_partition_verbose_result}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает отображение информации о частях, к которым операции манипуляции с партициями и частями были успешно применены.
Применимо к [ATTACH PARTITION|PART](/sql-reference/statements/alter/partition#attach-partitionpart) и к [FREEZE PARTITION](/sql-reference/statements/alter/partition#freeze-partition).

Возможные значения:

- 0 — отключить многословие.
- 1 — включить многословие.

**Пример**

```sql
CREATE TABLE test(a Int64, d Date, s String) ENGINE = MergeTree PARTITION BY toYYYYMDECLARE(d) ORDER BY a;
INSERT INTO test VALUES(1, '2021-01-01', '');
INSERT INTO test VALUES(1, '2021-01-01', '');
ALTER TABLE test DETACH PARTITION ID '202101';

ALTER TABLE test ATTACH PARTITION ID '202101' SETTINGS alter_partition_verbose_result = 1;

┌─command_type─────┬─partition_id─┬─part_name────┬─old_part_name─┐
│ ATTACH PARTITION │ 202101       │ 202101_7_7_0 │ 202101_5_5_0  │
│ ATTACH PARTITION │ 202101       │ 202101_8_8_0 │ 202101_6_6_0  │
└──────────────────┴──────────────┴──────────────┴───────────────┘

ALTER TABLE test FREEZE SETTINGS alter_partition_verbose_result = 1;

┌─command_type─┬─partition_id─┬─part_name────┬─backup_name─┬─backup_path───────────────────┬─part_backup_path────────────────────────────────────────────┐
│ FREEZE ALL   │ 202101       │ 202101_7_7_0 │ 8           │ /var/lib/clickhouse/shadow/8/ │ /var/lib/clickhouse/shadow/8/data/default/test/202101_7_7_0 │
│ FREEZE ALL   │ 202101       │ 202101_8_8_0 │ 8           │ /var/lib/clickhouse/shadow/8/ │ /var/lib/clickhouse/shadow/8/data/default/test/202101_8_8_0 │
└──────────────┴──────────────┴──────────────┴─────────────┴───────────────────────────────┴─────────────────────────────────────────────────────────────┘
```
## alter_sync {#alter_sync}



Тип: UInt64

Значение по умолчанию: 1

Разрешает устанавливать ожидание выполнения действий на репликах для [ALTER](../../sql-reference/statements/alter/index.md), [OPTIMIZE](../../sql-reference/statements/optimize.md) или [TRUNCATE](../../sql-reference/statements/truncate.md) запросов.

Возможные значения:

- 0 — Не ждать.
- 1 — Ждать собственного выполнения.
- 2 — Ждать всех.

Значение по умолчанию для облака: `0`.

:::note
`alter_sync` применим только к `Replicated` таблицам, он ничего не делает для изменений не `Replicated` таблиц.
:::
## analyze_index_with_space_filling_curves {#analyze_index_with_space_filling_curves}



Тип: Bool

Значение по умолчанию: 1

Если у таблицы есть кривая заполнения пространства в его индексе, например, `ORDER BY mortonEncode(x, y)` или `ORDER BY hilbertEncode(x, y)`, и запрос содержит условия на его аргументы, например, `x >= 10 AND x <= 20 AND y >= 20 AND y <= 30`, используйте кривую заполнения пространства для анализа индекса.
## analyzer_compatibility_join_using_top_level_identifier {#analyzer_compatibility_join_using_top_level_identifier}



Тип: Bool

Значение по умолчанию: 0

Заставить разрешать идентификатор в JOIN USING из проекции (например, в `SELECT a + 1 AS b FROM t1 JOIN t2 USING (b)` соединение будет выполняться по `t1.a + 1 = t2.b`, а не `t1.b = t2.b`).
## any_join_distinct_right_table_keys {#any_join_distinct_right_table_keys}



Тип: Bool

Значение по умолчанию: 0

Включает поведение сервера ClickHouse в наследии в операциях `ANY INNER|LEFT JOIN`.

:::note
Используйте эту настройку только для обратной совместимости, если ваши случаи использования зависят от поведения `JOIN` в наследии.
:::

Когда поведение в наследии включено:

- Результаты операций `t1 ANY LEFT JOIN t2` и `t2 ANY RIGHT JOIN t1` не равны, поскольку ClickHouse использует логику с множественным сопоставлением ключей левой и правой таблицы.
- Результаты операций `ANY INNER JOIN` содержат все строки из левой таблицы, как это делают операции `SEMI LEFT JOIN`.

Когда поведение в наследии отключено:

- Результаты операций `t1 ANY LEFT JOIN t2` и `t2 ANY RIGHT JOIN t1` равны, поскольку ClickHouse использует логику, которая обеспечивает множественное сопоставление ключей в операциях `ANY RIGHT JOIN`.
- Результаты операций `ANY INNER JOIN` содержат одну строку на ключ из обеих левых и правых таблиц.

Возможные значения:

- 0 — Поведение в наследии отключено.
- 1 — Поведение в наследии включено.

См. также:

- [Строгость JOIN](/sql-reference/statements/select/join#settings)
## apply_deleted_mask {#apply_deleted_mask}



Тип: Bool

Значение по умолчанию: 1

Включает фильтрацию строк, удаленных с помощью легковесного DELETE. Если отключено, запрос сможет читать эти строки. Это полезно для отладки и сценариев "восстановления удаления".
## apply_mutations_on_fly {#apply_mutations_on_fly}



Тип: Bool

Значение по умолчанию: 0

Если true, мутации (UPDATE и DELETE), которые не материализованы в части данных, будут применяться к SELECT.
## apply_settings_from_server {#apply_settings_from_server}



Тип: Bool

Значение по умолчанию: 1

Должен ли клиент принимать настройки от сервера.

Это касается только операций, выполняемых на стороне клиента, в частности, разбора входных данных запроса INSERT и форматирования результата запроса. Большая часть выполнения запроса происходит на сервере и не затрагивается этой настройкой.

Обычно эта настройка должна устанавливаться в профиле пользователя (users.xml или запросы типа `ALTER USER`), а не через клиент (аргументы командной строки клиента, запрос `SET` или раздел `SETTINGS` запроса `SELECT`). Через клиент она может быть изменена на false, но не может быть изменена на true (поскольку сервер не отправит настройки, если в профиле пользователя указано `apply_settings_from_server = false`).

Обратите внимание, что изначально (24.12) существовала серверная настройка (`send_settings_to_client`), но позже она была заменена этой клиентской настройкой для лучшей удобства.
## asterisk_include_alias_columns {#asterisk_include_alias_columns}



Тип: Bool

Значение по умолчанию: 0

Включить [ALIAS](../../sql-reference/statements/create/table.md/#alias) столбцы для запроса с подстановочным знаком (`SELECT *`).

Возможные значения:

- 0 - отключено
- 1 - включено
## asterisk_include_materialized_columns {#asterisk_include_materialized_columns}



Тип: Bool

Значение по умолчанию: 0

Включить [MATERIALIZED](/sql-reference/statements/create/view#materialized-view) столбцы для запроса с подстановочным знаком (`SELECT *`).

Возможные значения:

- 0 - отключено
- 1 - включено
## async_insert {#async_insert}



Тип: Bool

Значение по умолчанию: 0

Если true, данные из запроса INSERT хранятся в очереди и позже сбрасываются в таблицу в фоновом режиме. Если wait_for_async_insert равно false, запрос INSERT обрабатывается почти мгновенно, в противном случае клиент будет ждать, пока данные будут сброшены в таблицу.
```yaml
title: 'Настройки ClickHouse'
sidebar_label: 'Настройки ClickHouse'
keywords: ['настройки', 'ClickHouse', 'базы данных']
description: 'Документация по настройкам ClickHouse.'
```

## async_insert_busy_timeout_decrease_rate {#async_insert_busy_timeout_decrease_rate}



Type: Double

Default value: 0.2

Экспоненциальная скорость роста, при которой адаптивный таймаут асинхронной вставки уменьшается.
## async_insert_busy_timeout_increase_rate {#async_insert_busy_timeout_increase_rate}



Type: Double

Default value: 0.2

Экспоненциальная скорость роста, при которой адаптивный таймаут асинхронной вставки увеличивается.
## async_insert_busy_timeout_max_ms {#async_insert_busy_timeout_max_ms}



Type: Milliseconds

Default value: 200

Максимальное время ожидания перед сбросом собранных данных по запросу с момента появления первых данных.
## async_insert_busy_timeout_min_ms {#async_insert_busy_timeout_min_ms}



Type: Milliseconds

Default value: 50

Если автонастройка включена через async_insert_use_adaptive_busy_timeout, минимальное время ожидания перед сбросом собранных данных по запросу с момента появления первых данных. Это также служит в качестве начального значения для адаптивного алгоритма.
## async_insert_deduplicate {#async_insert_deduplicate}



Type: Bool

Default value: 0

Для асинхронных запросов INSERT в реплицированной таблице указывает, что должна выполняться дедупликация вставляемых блоков.
## async_insert_max_data_size {#async_insert_max_data_size}



Type: UInt64

Default value: 10485760

Максимальный размер в байтах непарсенных данных, собранных по запросу перед вставкой.
## async_insert_max_query_number {#async_insert_max_query_number}



Type: UInt64

Default value: 450

Максимальное количество запросов вставки перед выполнением вставки.
## async_insert_poll_timeout_ms {#async_insert_poll_timeout_ms}



Type: Milliseconds

Default value: 10

Таймаут для опроса данных из очереди асинхронных вставок.
## async_insert_use_adaptive_busy_timeout {#async_insert_use_adaptive_busy_timeout}



Type: Bool

Default value: 1

Если установлено в true, использовать адаптивный таймаут занятости для асинхронных вставок.
## async_query_sending_for_remote {#async_query_sending_for_remote}



Type: Bool

Default value: 1

Включает создание асинхронных соединений и отправку запросов при выполнении удаленных запросов.

Включено по умолчанию.
## async_socket_for_remote {#async_socket_for_remote}



Type: Bool

Default value: 1

Включает асинхронное чтение из сокета при выполнении удаленных запросов.

Включено по умолчанию.
## azure_allow_parallel_part_upload {#azure_allow_parallel_part_upload}



Type: Bool

Default value: 1

Использовать несколько потоков для загрузки многокомпонентных файлов в Azure.
## azure_check_objects_after_upload {#azure_check_objects_after_upload}



Type: Bool

Default value: 0

Проверять каждый загруженный объект в хранилище блobs Azure, чтобы убедиться, что загрузка прошла успешно.
## azure_create_new_file_on_insert {#azure_create_new_file_on_insert}



Type: Bool

Default value: 0

Включает или отключает создание нового файла при каждой вставке в таблицах с движком Azure.
## azure_ignore_file_doesnt_exist {#azure_ignore_file_doesnt_exist}



Type: Bool

Default value: 0

Игнорировать отсутствие файла, если он не существует, при чтении определенных ключей.

Возможные значения:
- 1 — `SELECT` возвращает пустой результат.
- 0 — `SELECT` вызывает исключение.
## azure_list_object_keys_size {#azure_list_object_keys_size}



Type: UInt64

Default value: 1000

Максимальное количество файлов, которые могут быть возвращены пакетом запросом ListObject.
## azure_max_blocks_in_multipart_upload {#azure_max_blocks_in_multipart_upload}



Type: UInt64

Default value: 50000

Максимальное количество блоков в многокомпонентной загрузке для Azure.
## azure_max_inflight_parts_for_one_file {#azure_max_inflight_parts_for_one_file}



Type: UInt64

Default value: 20

Максимальное количество одновременно загружаемых частей в запросе многокомпонентной загрузки. 0 означает неограниченное количество.
## azure_max_single_part_copy_size {#azure_max_single_part_copy_size}



Type: UInt64

Default value: 268435456

Максимальный размер объекта для копирования с помощью одномоментного копирования в хранилище блobs Azure.
## azure_max_single_part_upload_size {#azure_max_single_part_upload_size}



Type: UInt64

Default value: 104857600

Максимальный размер объекта для загрузки с помощью одномоментной загрузки в хранилище блobs Azure.
## azure_max_single_read_retries {#azure_max_single_read_retries}



Type: UInt64

Default value: 4

Максимальное количество повторных попыток при чтении из хранилища блobs Azure.
## azure_max_unexpected_write_error_retries {#azure_max_unexpected_write_error_retries}



Type: UInt64

Default value: 4

Максимальное количество попыток повторного выполнения в случае неожиданных ошибок при записи в хранилище блobs Azure.
## azure_max_upload_part_size {#azure_max_upload_part_size}



Type: UInt64

Default value: 5368709120

Максимальный размер части для загрузки во время многокомпонентной загрузки в хранилище блobs Azure.
## azure_min_upload_part_size {#azure_min_upload_part_size}



Type: UInt64

Default value: 16777216

Минимальный размер части для загрузки во время многокомпонентной загрузки в хранилище блobs Azure.
## azure_sdk_max_retries {#azure_sdk_max_retries}



Type: UInt64

Default value: 10

Максимальное количество попыток повторной отправки в Azure SDK.
## azure_sdk_retry_initial_backoff_ms {#azure_sdk_retry_initial_backoff_ms}



Type: UInt64

Default value: 10

Минимальный интервал между попытками повторной отправки в Azure SDK.
## azure_sdk_retry_max_backoff_ms {#azure_sdk_retry_max_backoff_ms}



Type: UInt64

Default value: 1000

Максимальный интервал между попытками повторной отправки в Azure SDK.
## azure_skip_empty_files {#azure_skip_empty_files}



Type: Bool

Default value: 0

Включает или отключает пропуск пустых файлов в движке S3.

Возможные значения:
- 0 — `SELECT` вызывает исключение, если пустой файл несовместим с запрошенным форматом.
- 1 — `SELECT` возвращает пустой результат для пустого файла.
## azure_strict_upload_part_size {#azure_strict_upload_part_size}



Type: UInt64

Default value: 0

Точный размер части для загрузки во время многокомпонентной загрузки в хранилище блobs Azure.
## azure_throw_on_zero_files_match {#azure_throw_on_zero_files_match}



Type: Bool

Default value: 0

Вызывает ошибку, если совпадает ноль файлов в соответствии с правилами расширения glob.

Возможные значения:
- 1 — `SELECT` вызывает исключение.
- 0 — `SELECT` возвращает пустой результат.
## azure_truncate_on_insert {#azure_truncate_on_insert}



Type: Bool

Default value: 0

Включает или отключает обрезку перед вставкой в таблицах с движком Azure.
## azure_upload_part_size_multiply_factor {#azure_upload_part_size_multiply_factor}



Type: UInt64

Default value: 2

Умножает azure_min_upload_part_size на этот коэффициент каждый раз, когда azure_multiply_parts_count_threshold частей загружается из одной записи в хранилище блobs Azure.
## azure_upload_part_size_multiply_parts_count_threshold {#azure_upload_part_size_multiply_parts_count_threshold}



Type: UInt64

Default value: 500

Каждый раз, когда это количество частей загружается в хранилище блobs Azure, azure_min_upload_part_size умножается на azure_upload_part_size_multiply_factor.
## backup_restore_batch_size_for_keeper_multi {#backup_restore_batch_size_for_keeper_multi}



Type: UInt64

Default value: 1000

Максимальный размер пакета для многократного запроса к [Zoo]Keeper во время резервного копирования или восстановления.
## backup_restore_batch_size_for_keeper_multiread {#backup_restore_batch_size_for_keeper_multiread}



Type: UInt64

Default value: 10000

Максимальный размер пакета для многократного чтения к [Zoo]Keeper во время резервного копирования или восстановления.
## backup_restore_failure_after_host_disconnected_for_seconds {#backup_restore_failure_after_host_disconnected_for_seconds}



Type: UInt64

Default value: 3600

Если хост во время операции BACKUP ON CLUSTER или RESTORE ON CLUSTER не воссоздает свой эфирный узел 'alive' в ZooKeeper в течение этого времени, вся операция резервного копирования или восстановления считается неудачной.
Это значение должно быть больше любого разумного времени для повторного подключения хоста к ZooKeeper после сбоя.
Ноль означает неограниченное время ожидания.
## backup_restore_finish_timeout_after_error_sec {#backup_restore_finish_timeout_after_error_sec}



Type: UInt64

Default value: 180

Как долго инициатор должен ждать, пока другой хост отреагирует на узел 'error' и прекратит выполнение текущей операции BACKUP ON CLUSTER или RESTORE ON CLUSTER.
## backup_restore_keeper_fault_injection_probability {#backup_restore_keeper_fault_injection_probability}



Type: Float

Default value: 0

Приблизительная вероятность сбоя для запроса к Keeper во время резервного копирования или восстановления. Допустимое значение находится в интервале [0.0f, 1.0f].
## backup_restore_keeper_fault_injection_seed {#backup_restore_keeper_fault_injection_seed}



Type: UInt64

Default value: 0

0 - случайное значение, в противном случае значение настройки.
## backup_restore_keeper_max_retries {#backup_restore_keeper_max_retries}



Type: UInt64

Default value: 1000

Максимальное количество попыток для операций [Zoo]Keeper во время выполнения операции BACKUP или RESTORE.
Должно быть достаточно большим, чтобы вся операция не завершилась неудачей из-за временной ошибки [Zoo]Keeper.
## backup_restore_keeper_max_retries_while_handling_error {#backup_restore_keeper_max_retries_while_handling_error}



Type: UInt64

Default value: 20

Максимальное количество попыток для операций [Zoo]Keeper при обработке ошибки операции BACKUP ON CLUSTER или RESTORE ON CLUSTER.
## backup_restore_keeper_max_retries_while_initializing {#backup_restore_keeper_max_retries_while_initializing}



Type: UInt64

Default value: 20

Максимальное количество попыток для операций [Zoo]Keeper во время инициализации операции BACKUP ON CLUSTER или RESTORE ON CLUSTER.
## backup_restore_keeper_retry_initial_backoff_ms {#backup_restore_keeper_retry_initial_backoff_ms}



Type: UInt64

Default value: 100

Начальный таймаут ожидания для операций [Zoo]Keeper во время резервного копирования или восстановления.
## backup_restore_keeper_retry_max_backoff_ms {#backup_restore_keeper_retry_max_backoff_ms}



Type: UInt64

Default value: 5000

Максимальный таймаут ожидания для операций [Zoo]Keeper во время резервного копирования или восстановления.
## backup_restore_keeper_value_max_size {#backup_restore_keeper_value_max_size}



Type: UInt64

Default value: 1048576

Максимальный размер данных узла [Zoo]Keeper во время резервного копирования.
## backup_restore_s3_retry_attempts {#backup_restore_s3_retry_attempts}



Type: UInt64

Default value: 1000

Настройка для Aws::Client::RetryStrategy, Aws::Client выполняет повторные попытки самостоятельно, 0 означает отсутствие попыток повторного выполнения. Это относится только к резервному копированию/восстановлению.
## cache_warmer_threads {#cache_warmer_threads}


<CloudAvailableBadge/>

Type: UInt64

Default value: 4

Имеет эффект только в ClickHouse Cloud. Количество фоновых потоков для спекулятивной загрузки новых частей данных в файл кэша, когда [cache_populated_by_fetch](merge-tree-settings.md/#cache_populated_by_fetch) включен. Ноль отключает эту функцию.
## calculate_text_stack_trace {#calculate_text_stack_trace}



Type: Bool

Default value: 1

Выдавать текстовый трассировку стека в случае исключений во время выполнения запроса. Это значение по умолчанию. Это требует поиска символов, что может замедлить тесты на невалидные запросы при выполнении большого количества неверных запросов. В обычных случаях не следует отключать эту настройку.
## cancel_http_readonly_queries_on_client_close {#cancel_http_readonly_queries_on_client_close}



Type: Bool

Default value: 0

Отменяет HTTP-запросы только для чтения (например, SELECT), когда клиент закрывает соединение, не дожидаясь ответа.

Значение по умолчанию в Cloud: `1`.
## cast_ipv4_ipv6_default_on_conversion_error {#cast_ipv4_ipv6_default_on_conversion_error}



Type: Bool

Default value: 0

Оператор CAST в IPv4, оператор CAST в тип IPV6, функции toIPv4, toIPv6 будут возвращать значение по умолчанию вместо вызова исключения при ошибке преобразования.
## cast_keep_nullable {#cast_keep_nullable}



Type: Bool

Default value: 0

Включает или отключает сохранение типа данных `Nullable` в операциях [CAST](/sql-reference/functions/type-conversion-functions#cast).

Когда настройка включена и аргумент функции `CAST` является `Nullable`, результат также преобразуется в тип `Nullable`. Когда настройка отключена, результат всегда имеет точно заданный тип назначения.

Возможные значения:

- 0 — Результат `CAST` имеет точно заданный тип назначения.
- 1 — Если тип аргумента `Nullable`, результат `CAST` преобразуется в `Nullable(DestinationDataType)`.

**Примеры**

Следующий запрос возвращает точно заданный тип данных назначения:

```sql
SET cast_keep_nullable = 0;
SELECT CAST(toNullable(toInt32(0)) AS Int32) as x, toTypeName(x);
```

Результат:

```text
┌─x─┬─toTypeName(CAST(toNullable(toInt32(0)), 'Int32'))─┐
│ 0 │ Int32                                             │
└───┴───────────────────────────────────────────────────┘
```

Следующий запрос возвращает модификацию `Nullable` для типа данных назначения:

```sql
SET cast_keep_nullable = 1;
SELECT CAST(toNullable(toInt32(0)) AS Int32) as x, toTypeName(x);
```

Результат:

```text
┌─x─┬─toTypeName(CAST(toNullable(toInt32(0)), 'Int32'))─┐
│ 0 │ Nullable(Int32)                                   │
└───┴───────────────────────────────────────────────────┘
```

**Смотрите также**

- [CAST](/sql-reference/functions/type-conversion-functions#cast) функция.
## cast_string_to_dynamic_use_inference {#cast_string_to_dynamic_use_inference}



Type: Bool

Default value: 0

Использовать вывод типов при преобразовании String в Dynamic.
## check_query_single_value_result {#check_query_single_value_result}



Type: Bool

Default value: 1

Определяет уровень детализации результата запроса [CHECK TABLE](/sql-reference/statements/check-table) для семейства движков MergeTree.

Возможные значения:

- 0 — запрос показывает статус проверки для каждого отдельного блока данных таблицы.
- 1 — запрос показывает общий статус проверки таблицы.
## check_referential_table_dependencies {#check_referential_table_dependencies}



Type: Bool

Default value: 0

Проверяет, что DDL-запрос (например, DROP TABLE или RENAME) не нарушит взаимные зависимости.
## check_table_dependencies {#check_table_dependencies}



Type: Bool

Default value: 1

Проверяет, что DDL-запрос (например, DROP TABLE или RENAME) не нарушит зависимости.
## checksum_on_read {#checksum_on_read}



Type: Bool

Default value: 1

Валидировать контрольные суммы при чтении. Это значение включено по умолчанию и должно всегда быть включено в производственной среде. Пожалуйста, не ожидайте никаких преимуществ от отключения этой настройки. Она может использоваться только для экспериментов и бенчмарков. Настройка применяется только к таблицам семейства MergeTree. Контрольные суммы всегда проверяются для других движков таблиц и при получении данных по сети.
## cloud_mode {#cloud_mode}



Type: Bool

Default value: 0

Облачный режим.
## cloud_mode_database_engine {#cloud_mode_database_engine}



Type: UInt64

Default value: 1

Движок базы данных, разрешенный в облаке. 1 - переписывать DDL для использования реплицированной базы данных, 2 - переписывать DDL для использования общей базы данных.
## cloud_mode_engine {#cloud_mode_engine}



Type: UInt64

Default value: 1

Разрешенная семейство движков в облаке.

- 0 - разрешить все
- 1 - переписывать DDL для использования *ReplicatedMergeTree
- 2 - переписывать DDL для использования SharedMergeTree
- 3 - переписывать DDL для использования SharedMergeTree, за исключением когда явно указан удаленный диск

UInt64 для минимизации публичной части.
## cluster_for_parallel_replicas {#cluster_for_parallel_replicas}
<BetaBadge/>


Type: String

Default value: 

Кластер для шардирования, в котором расположен текущий сервер.
## collect_hash_table_stats_during_aggregation {#collect_hash_table_stats_during_aggregation}



Type: Bool

Default value: 1

Включает сбор статистики хеш-таблиц для оптимизации выделения памяти.
## collect_hash_table_stats_during_joins {#collect_hash_table_stats_during_joins}



Type: Bool

Default value: 1

Включает сбор статистики хеш-таблиц для оптимизации выделения памяти.
## compatibility {#compatibility}



Type: String

Default value: 

Настройка `compatibility` заставляет ClickHouse использовать настройки по умолчанию предыдущей версии ClickHouse, где предыдущая версия указанна как настройка.

Если настройки установлены в ненастройки по умолчанию, они будут уважаться (только настройки, которые не были изменены, затрагиваются настройкой `compatibility`).

Эта настройка принимает номер версии ClickHouse в виде строки, например, `22.3`, `22.8`. Пустое значение означает, что эта настройка отключена.

По умолчанию отключена.

:::note
В ClickHouse Cloud настройка совместимости должна быть установлена поддержкой ClickHouse Cloud. Пожалуйста, [откройте обращение](https://clickhouse.cloud/support) для ее установки.
:::
## compatibility_ignore_auto_increment_in_create_table {#compatibility_ignore_auto_increment_in_create_table}



Type: Bool

Default value: 0

Игнорировать ключевое слово AUTO_INCREMENT в объявлении столбца, если true, иначе вернуть ошибку. Это упрощает миграцию из MySQL.
## compatibility_ignore_collation_in_create_table {#compatibility_ignore_collation_in_create_table}



Type: Bool

Default value: 1

Совместимость игнорировать сортировку при создании таблицы.
## compile_aggregate_expressions {#compile_aggregate_expressions}



Type: Bool

Default value: 1

Включает или отключает JIT-компиляцию агрегатных функций в нативный код. Включение этой настройки может повысить производительность.

Возможные значения:

- 0 — Агрегация выполняется без JIT-компиляции.
- 1 — Агрегация выполняется с использованием JIT-компиляции.

**Смотрите также**

- [min_count_to_compile_aggregate_expression](#min_count_to_compile_aggregate_expression).
## compile_expressions {#compile_expressions}



Type: Bool

Default value: 0

Компилировать некоторые скалярные функции и операторы в нативный код. Из-за ошибки в инфраструктуре компилятора LLVM на машинах AArch64 это может привести к разыменованию указателя null и, следовательно, сбою сервера. Не включайте эту настройку.
## compile_sort_description {#compile_sort_description}



Type: Bool

Default value: 1

Компилировать описание сортировки в нативный код.
## connect_timeout {#connect_timeout}



Type: Seconds

Default value: 10

Таймаут подключения, если нет реплик.
## connect_timeout_with_failover_ms {#connect_timeout_with_failover_ms}



Type: Milliseconds

Default value: 1000

Таймаут в миллисекундах для подключения к удаленному серверу для движка распределенной таблицы, если в определении кластера используются секции 'shard' и 'replica'.
Если не удается, выполняется несколько попыток подключения к различным репликам.
## connect_timeout_with_failover_secure_ms {#connect_timeout_with_failover_secure_ms}



Type: Milliseconds

Default value: 1000

Таймаут подключения для выбора первой работающей реплики (для защищенных соединений).
## connection_pool_max_wait_ms {#connection_pool_max_wait_ms}



Type: Milliseconds

Default value: 0

Время ожидания в миллисекундах для соединения, когда пул соединений полон.

Возможные значения:

- Положительное целое число.
- 0 — Неограниченный таймаут.
## connections_with_failover_max_tries {#connections_with_failover_max_tries}



Type: UInt64

Default value: 3

Максимальное количество попыток подключения к каждой реплике для движка распределенной таблицы.
## convert_query_to_cnf {#convert_query_to_cnf}



Type: Bool

Default value: 0

Когда установлено в `true`, запрос `SELECT` будет преобразован в конъюнктивную нормальную форму (CNF). Существуют сценарии, где переписывание запроса в CNF может выполниться быстрее (посмотрите эту [проблему на GitHub](https://github.com/ClickHouse/ClickHouse/issues/11749) для объяснения).

Например, обратите внимание, как следующий запрос `SELECT` не изменяется (поведение по умолчанию):

```sql
EXPLAIN SYNTAX
SELECT *
FROM
(
    SELECT number AS x
    FROM numbers(20)
) AS a
WHERE ((x >= 1) AND (x <= 5)) OR ((x >= 10) AND (x <= 15))
SETTINGS convert_query_to_cnf = false;
```

Результат:

```response
┌─explain────────────────────────────────────────────────────────┐
│ SELECT x                                                       │
│ FROM                                                           │
│ (                                                              │
│     SELECT number AS x                                         │
│     FROM numbers(20)                                           │
│     WHERE ((x >= 1) AND (x <= 5)) OR ((x >= 10) AND (x <= 15)) │
│ ) AS a                                                         │
│ WHERE ((x >= 1) AND (x <= 5)) OR ((x >= 10) AND (x <= 15))     │
│ SETTINGS convert_query_to_cnf = 0                              │
└────────────────────────────────────────────────────────────────┘
```

Давайте установим `convert_query_to_cnf` в `true` и посмотрим, что изменится:

```sql
EXPLAIN SYNTAX
SELECT *
FROM
(
    SELECT number AS x
    FROM numbers(20)
) AS a
WHERE ((x >= 1) AND (x <= 5)) OR ((x >= 10) AND (x <= 15))
SETTINGS convert_query_to_cnf = true;
```

Обратите внимание, что конструкция `WHERE` переписывается в CNF, но результирующий набор идентичен — логика булевых выражений остается неизменной:

```response
┌─explain───────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ SELECT x                                                                                                              │
│ FROM                                                                                                                  │
│ (                                                                                                                     │
│     SELECT number AS x                                                                                                │
│     FROM numbers(20)                                                                                                  │
│     WHERE ((x <= 15) OR (x <= 5)) AND ((x <= 15) OR (x >= 1)) AND ((x >= 10) OR (x <= 5)) AND ((x >= 10) OR (x >= 1)) │
│ ) AS a                                                                                                                │
│ WHERE ((x >= 10) OR (x >= 1)) AND ((x >= 10) OR (x <= 5)) AND ((x <= 15) OR (x >= 1)) AND ((x <= 15) OR (x <= 5))     │
│ SETTINGS convert_query_to_cnf = 1                                                                                     │
└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

Возможные значения: true, false.
## count_distinct_implementation {#count_distinct_implementation}



Type: String

Default value: uniqExact

Указывает, какая из функций `uniq*` должна использоваться для выполнения конструкции [COUNT(DISTINCT ...)](/sql-reference/aggregate-functions/reference/count).

Возможные значения:

- [uniq](/sql-reference/aggregate-functions/reference/uniq)
- [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
- [uniqCombined64](/sql-reference/aggregate-functions/reference/uniqcombined64)
- [uniqHLL12](/sql-reference/aggregate-functions/reference/uniqhll12)
- [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
## count_distinct_optimization {#count_distinct_optimization}



Type: Bool

Default value: 0

Переписывать count distinct в подзапрос group by.
## create_if_not_exists {#create_if_not_exists}



Type: Bool

Default value: 0

Включить `IF NOT EXISTS` для команды `CREATE` по умолчанию. Если либо эта настройка, либо `IF NOT EXISTS` указаны и таблица с данным именем уже существует, исключение не будет выдано.
## create_index_ignore_unique {#create_index_ignore_unique}



Type: Bool

Default value: 0

Игнорировать уникальный ключевое слово при создании UNIQUE INDEX. Создано для совместимости с тестами SQL.
## create_replicated_merge_tree_fault_injection_probability {#create_replicated_merge_tree_fault_injection_probability}



Type: Float

Default value: 0

Вероятность инъекции ошибки во время создания таблицы после создания метаданных в ZooKeeper.
## create_table_empty_primary_key_by_default {#create_table_empty_primary_key_by_default}



Type: Bool

Default value: 0

Позволяет создавать *MergeTree таблицы с пустым первичным ключом, когда ORDER BY и PRIMARY KEY не указаны.
## cross_join_min_bytes_to_compress {#cross_join_min_bytes_to_compress}



Type: UInt64

Default value: 1073741824

Минимальный размер блока для сжатия в CROSS JOIN. Нулевое значение означает - отключить этот порог. Этот блок сжимается, когда достигается любой из двух порогов (по строкам или по байтам).
## cross_join_min_rows_to_compress {#cross_join_min_rows_to_compress}



Type: UInt64

Default value: 10000000

Минимальное количество строк для сжатия блока в CROSS JOIN. Нулевое значение означает - отключить этот порог. Этот блок сжимается, когда достигается любой из двух порогов (по строкам или по байтам).
## data_type_default_nullable {#data_type_default_nullable}



Type: Bool

Default value: 0

Разрешает типы данных без явных модификаторов [NULL или NOT NULL](/sql-reference/statements/create/table#null-or-not-null-modifiers) в определении столбца быть [Nullable](/sql-reference/data-types/nullable).

Возможные значения:

- 1 — Типы данных в определениях столбцов по умолчанию устанавливаются как `Nullable`.
- 0 — Типы данных в определениях столбцов по умолчанию устанавливаются как не `Nullable`.
## database_atomic_wait_for_drop_and_detach_synchronously {#database_atomic_wait_for_drop_and_detach_synchronously}



Type: Bool

Default value: 0

Добавляет модификатор `SYNC` ко всем запросам `DROP` и `DETACH`.

Возможные значения:

- 0 — Запросы будут выполняться с задержкой.
- 1 — Запросы будут выполняться без задержки.
## database_replicated_allow_explicit_uuid {#database_replicated_allow_explicit_uuid}



Type: UInt64

Default value: 0

0 - Не разрешать явно указывать UUID для таблиц в реплицированных базах данных. 1 - Разрешить. 2 - Разрешить, но игнорировать указанный UUID и генерировать случайный вместо него.
## database_replicated_allow_heavy_create {#database_replicated_allow_heavy_create}



Type: Bool

Default value: 0

Разрешать долго выполняющиеся DDL-запросы (CREATE AS SELECT и POPULATE) в реплицированном движке базы данных. Обратите внимание, что это может заблокировать очередь DDL на длительное время.
## database_replicated_allow_only_replicated_engine {#database_replicated_allow_only_replicated_engine}



Type: Bool

Default value: 0

Разрешать создавать только реплицированные таблицы в базе данных с реплицированным движком.
## database_replicated_allow_replicated_engine_arguments {#database_replicated_allow_replicated_engine_arguments}



Type: UInt64

Default value: 0

0 - Не разрешать явно указывать путь ZooKeeper и имя реплики для *MergeTree таблиц в реплицированных базах данных. 1 - Разрешить. 2 - Разрешить, но игнорировать указанный путь и использовать по умолчанию. 3 - Разрешить и не логировать предупреждение.
## database_replicated_always_detach_permanently {#database_replicated_always_detach_permanently}



Type: Bool

Default value: 0

Выполнять DETACH TABLE как DETACH TABLE PERMANENTLY, если движок базы данных реплицирован.
## database_replicated_enforce_synchronous_settings {#database_replicated_enforce_synchronous_settings}



Type: Bool

Default value: 0

Принуждает синхронное ожидание некоторых запросов (также смотрите database_atomic_wait_for_drop_and_detach_synchronously, mutations_sync, alter_sync). Не рекомендуется включать эти настройки.
## database_replicated_initial_query_timeout_sec {#database_replicated_initial_query_timeout_sec}



Type: UInt64

Default value: 300

Устанавливает, как долго начальный DDL-запрос должен ждать, чтобы реплицированная база данных обработала предыдущие записи в очереди DDL, в секундах.

Возможные значения:

- Положительное целое число.
- 0 — Неограничено.
## decimal_check_overflow {#decimal_check_overflow}



Type: Bool

Default value: 1

Проверять переполнение десятичных арифметических/сравнительных операций.
## deduplicate_blocks_in_dependent_materialized_views {#deduplicate_blocks_in_dependent_materialized_views}



Type: Bool

Default value: 0

Включает или отключает проверку дедупликации для материализованных представлений, которые получают данные из таблиц Replicated*.

Возможные значения:

      0 — Отключено.
      1 — Включено.

Использование

По умолчанию дедупликация не выполняется для материализованных представлений, но производится на уровне источника, в исходной таблице.
Если вставленный блок пропускается из-за дедупликации в исходной таблице, вставка в прикрепленные материализованные представления не произойдет. Это поведение существует, чтобы позволить вставку сильно агрегированных данных в материализованные представления, для случаев, когда вставленные блоки идентичны после агрегации в материализованном представлении, но происходят из разных вставок в исходную таблицу.
В то же время, это поведение "ломает" идемпотентность `INSERT`. Если `INSERT` в главную таблицу был успешным, и `INSERT` в материализованное представление потерпел неудачу (например, из-за сбоя связи с ClickHouse Keeper), клиент получит ошибку и может повторить операцию. Однако материализованное представление не получит вторую вставку, потому что она будет отброшена дедупликацией в главной (исходной) таблице. Настройка `deduplicate_blocks_in_dependent_materialized_views` позволяет изменить это поведение. При повторной попытке материализованное представление получит повторную вставку и выполнит проверку дедупликации самостоятельно,
игнорируя результат проверки для исходной таблицы, и вставит строки, потерянные из-за первой ошибки.
## default_materialized_view_sql_security {#default_materialized_view_sql_security}



Type: SQLSecurityType

Default value: DEFINER

Позволяет установить значение по умолчанию для параметра SQL SECURITY при создании материализованного представления. [Подробнее о безопасности SQL](../../sql-reference/statements/create/view.md/#sql_security).

Значение по умолчанию — `DEFINER`.
## default_max_bytes_in_join {#default_max_bytes_in_join}



Type: UInt64

Default value: 1000000000

Максимальный размер правой таблицы, если требуется ограничение, но `max_bytes_in_join` не установлен.
## default_normal_view_sql_security {#default_normal_view_sql_security}



Type: SQLSecurityType

Default value: INVOKER

Позволяет установить значение `SQL SECURITY` по умолчанию при создании обычного представления. [Подробнее о безопасности SQL](../../sql-reference/statements/create/view.md/#sql_security).

Значение по умолчанию — `INVOKER`.

## default_table_engine {#default_table_engine}



Тип: DefaultTableEngine

Значение по умолчанию: MergeTree

Движок таблицы по умолчанию, который будет использоваться, когда `ENGINE` не установлен в операторе `CREATE`.

Допустимые значения:

- строка, представляющая любое допустимое имя движка таблицы

Значение по умолчанию в облаке: `SharedMergeTree`.

**Пример**

Запрос:

```sql
SET default_table_engine = 'Log';

SELECT name, value, changed FROM system.settings WHERE name = 'default_table_engine';
```

Результат:

```response
┌─name─────────────────┬─value─┬─changed─┐
│ default_table_engine │ Log   │       1 │
└──────────────────────┴───────┴─────────┘
```

В этом примере любая новая таблица, не указывающая `Engine`, будет использовать движок таблицы `Log`:

Запрос:

```sql
CREATE TABLE my_table (
    x UInt32,
    y UInt32
);

SHOW CREATE TABLE my_table;
```

Результат:

```response
┌─statement────────────────────────────────────────────────────────────────┐
│ CREATE TABLE default.my_table
(
    `x` UInt32,
    `y` UInt32
)
ENGINE = Log
└──────────────────────────────────────────────────────────────────────────┘
```
## default_temporary_table_engine {#default_temporary_table_engine}



Тип: DefaultTableEngine

Значение по умолчанию: Memory

То же, что и [default_table_engine](#default_table_engine), но для временных таблиц.

В этом примере любая новая временная таблица, не указывающая `Engine`, будет использовать движок таблицы `Log`:

Запрос:

```sql
SET default_temporary_table_engine = 'Log';

CREATE TEMPORARY TABLE my_table (
    x UInt32,
    y UInt32
);

SHOW CREATE TEMPORARY TABLE my_table;
```

Результат:

```response
┌─statement────────────────────────────────────────────────────────────────┐
│ CREATE TEMPORARY TABLE default.my_table
(
    `x` UInt32,
    `y` UInt32
)
ENGINE = Log
└──────────────────────────────────────────────────────────────────────────┘
```
## default_view_definer {#default_view_definer}



Тип: String

Значение по умолчанию: CURRENT_USER

Позволяет установить значение `DEFINER` по умолчанию при создании представления. [Подробнее об SQL безопасности](../../sql-reference/statements/create/view.md/#sql_security).

Значение по умолчанию: `CURRENT_USER`.
## describe_compact_output {#describe_compact_output}



Тип: Bool

Значение по умолчанию: 0

Если true, включает только имена колонок и типы в результат запроса DESCRIBE
## describe_extend_object_types {#describe_extend_object_types}



Тип: Bool

Значение по умолчанию: 0

Выводит конкретный тип колонок типа Object в запросе DESCRIBE
## describe_include_subcolumns {#describe_include_subcolumns}



Тип: Bool

Значение по умолчанию: 0

Включает описание подколонок для запроса [DESCRIBE](../../sql-reference/statements/describe-table.md). Например, элементы [Tuple](../../sql-reference/data-types/tuple.md) или подколонки типа [Map](/sql-reference/data-types/map#reading-subcolumns-of-map), [Nullable](../../sql-reference/data-types/nullable.md/#finding-null) или [Array](../../sql-reference/data-types/array.md/#array-size).

Допустимые значения:

- 0 — Подколонки не включены в запросы `DESCRIBE`.
- 1 — Подколонки включены в запросы `DESCRIBE`.

**Пример**

Смотрите пример для оператора [DESCRIBE](../../sql-reference/statements/describe-table.md).
## describe_include_virtual_columns {#describe_include_virtual_columns}



Тип: Bool

Значение по умолчанию: 0

Если true, виртуальные колонки таблицы будут включены в результат запроса DESCRIBE
## dialect {#dialect}



Тип: Dialect

Значение по умолчанию: clickhouse

Какой диалект будет использоваться для разбора запроса
## dictionary_validate_primary_key_type {#dictionary_validate_primary_key_type}



Тип: Bool

Значение по умолчанию: 0

Проверять тип первичного ключа для словарей. По умолчанию тип id для простых макетов будет неявно преобразован в UInt64.
## distinct_overflow_mode {#distinct_overflow_mode}



Тип: OverflowMode

Значение по умолчанию: throw

Устанавливает, что происходит, когда количество данных превышает один из лимитов.

Допустимые значения:
- `throw`: выбросить исключение (по умолчанию).
- `break`: прекратить выполнение запроса и вернуть частичный результат, как если бы исходные данные закончились.
## distributed_aggregation_memory_efficient {#distributed_aggregation_memory_efficient}



Тип: Bool

Значение по умолчанию: 1

Режим экономии памяти для распределенной агрегации включен.
## distributed_background_insert_batch {#distributed_background_insert_batch}



Тип: Bool

Значение по умолчанию: 0

Включает/выключает отправку вставленных данных батчами.

Когда отправка батчами включена, движок таблицы [Distributed](../../engines/table-engines/special/distributed.md) пытается отправить несколько файлов вставленных данных в одной операции, а не отправлять их отдельно. Отправка батчами улучшает производительность кластера, лучше используя ресурсы сервера и сети.

Допустимые значения:

- 1 — Включено.
- 0 — Отключено.
## distributed_background_insert_max_sleep_time_ms {#distributed_background_insert_max_sleep_time_ms}



Тип: Milliseconds

Значение по умолчанию: 30000

Максимальный интервал для движка таблицы [Distributed](../../engines/table-engines/special/distributed.md) для отправки данных. Ограничивает экспоненциальный рост интервала, установленного в настройке [distributed_background_insert_sleep_time_ms](#distributed_background_insert_sleep_time_ms).

Допустимые значения:

- Положительное целое число миллисекунд.
## distributed_background_insert_sleep_time_ms {#distributed_background_insert_sleep_time_ms}



Тип: Milliseconds

Значение по умолчанию: 100

Базовый интервал для движка таблицы [Distributed](../../engines/table-engines/special/distributed.md) для отправки данных. Фактический интервал растет экспоненциально в случае ошибок.

Допустимые значения:

- Положительное целое число миллисекунд.
## distributed_background_insert_split_batch_on_failure {#distributed_background_insert_split_batch_on_failure}



Тип: Bool

Значение по умолчанию: 0

Включает/выключает разделение батчей в случае ошибок.

Иногда отправка конкретного батча на удаленный шард может завершиться неудачей из-за сложного конвейера после (например, `MATERIALIZED VIEW` с `GROUP BY`) из-за `Память превышена` или аналогичных ошибок. В этом случае повторная попытка не поможет (и это заблокирует распределенные отправки для таблицы), но отправка файлов из этого батча по одному может помочь вставке.

Таким образом, установка этой настройки на `1` отключит батчирование для таких батчей (то есть временно отключает `distributed_background_insert_batch` для неудачных батчей).

Допустимые значения:

- 1 — Включено.
- 0 — Отключено.

:::note
Эта настройка также влияет на поврежденные батчи (которые могут появляться из-за абнормального завершения работы сервера (компьютера) и отсутствия `fsync_after_insert`/`fsync_directories` для движка таблиц [Distributed](../../engines/table-engines/special/distributed.md)).
:::

:::note
Не следует полагаться на автоматическое разделение батчей, так как это может ухудшить производительность.
:::
## distributed_background_insert_timeout {#distributed_background_insert_timeout}



Тип: UInt64

Значение по умолчанию: 0

Тайм-аут для вставки запроса в распределенный. Настройка используется только с включенной вставкой синхронно (insert_distributed_sync). Значение ноль означает отсутствие тайм-аута.
## distributed_cache_bypass_connection_pool {#distributed_cache_bypass_connection_pool}


<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 0

Влияет только в ClickHouse Cloud. Разрешает обход пула соединений к распределенному кэшу
## distributed_cache_connect_max_tries {#distributed_cache_connect_max_tries}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 20

Влияет только в ClickHouse Cloud. Количество попыток подключения к распределенному кэшу в случае неудачи
## distributed_cache_data_packet_ack_window {#distributed_cache_data_packet_ack_window}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 5

Влияет только в ClickHouse Cloud. Окно для отправки ACK для последовательности DataPacket в одном запросе чтения из распределенного кэша
## distributed_cache_discard_connection_if_unread_data {#distributed_cache_discard_connection_if_unread_data}


<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 1

Влияет только в ClickHouse Cloud. Отключить соединение, если имеются нечитанные данные.
## distributed_cache_fetch_metrics_only_from_current_az {#distributed_cache_fetch_metrics_only_from_current_az}


<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 1

Влияет только в ClickHouse Cloud. Получает метрики только из текущей зоны доступности в system.distributed_cache_metrics, system.distributed_cache_events
## distributed_cache_log_mode {#distributed_cache_log_mode}


<CloudAvailableBadge/>

Тип: DistributedCacheLogMode

Значение по умолчанию: on_error

Влияет только в ClickHouse Cloud. Режим записи в system.distributed_cache_log
## distributed_cache_max_unacked_inflight_packets {#distributed_cache_max_unacked_inflight_packets}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 10

Влияет только в ClickHouse Cloud. Максимальное количество неподтвержденных пакетов в одном запросе чтения из распределенного кэша
## distributed_cache_min_bytes_for_seek {#distributed_cache_min_bytes_for_seek}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 0

Влияет только в ClickHouse Cloud. Минимальное количество байт для выполнения поиска в распределенном кэше.
## distributed_cache_pool_behaviour_on_limit {#distributed_cache_pool_behaviour_on_limit}


<CloudAvailableBadge/>

Тип: DistributedCachePoolBehaviourOnLimit

Значение по умолчанию: wait

Влияет только в ClickHouse Cloud. Определяет поведение соединения к распределенному кэшу при достижении предела пула
## distributed_cache_read_alignment {#distributed_cache_read_alignment}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 0

Влияет только в ClickHouse Cloud. Настройка для тестирования, не изменяйте её
## distributed_cache_receive_response_wait_milliseconds {#distributed_cache_receive_response_wait_milliseconds}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 60000

Влияет только в ClickHouse Cloud. Время ожидания в миллисекундах для получения данных по запросу из распределенного кэша
## distributed_cache_receive_timeout_milliseconds {#distributed_cache_receive_timeout_milliseconds}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 10000

Влияет только в ClickHouse Cloud. Время ожидания в миллисекундах для получения любого рода ответа от распределенного кэша
## distributed_cache_throw_on_error {#distributed_cache_throw_on_error}


<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 0

Влияет только в ClickHouse Cloud. Повторный выброс исключения, произошедшего во время общения с распределенным кэшем или полученного от распределенного кэша. В противном случае происходит переход к пропуску распределенного кэша в случае ошибки
## distributed_cache_wait_connection_from_pool_milliseconds {#distributed_cache_wait_connection_from_pool_milliseconds}


<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 100

Влияет только в ClickHouse Cloud. Время ожидания в миллисекундах для получения подключения из пула соединений, если distributed_cache_pool_behaviour_on_limit установлен в wait
## distributed_connections_pool_size {#distributed_connections_pool_size}



Тип: UInt64

Значение по умолчанию: 1024

Максимальное количество одновременных соединений с удаленными серверами для распределенной обработки всех запросов к одной таблице Distributed. Рекомендуется устанавливать значение не меньше количества серверов в кластере.
## distributed_ddl_entry_format_version {#distributed_ddl_entry_format_version}



Тип: UInt64

Значение по умолчанию: 5

Версия совместимости для распределенных запросов DDL (ON CLUSTER)
## distributed_ddl_output_mode {#distributed_ddl_output_mode}



Тип: DistributedDDLOutputMode

Значение по умолчанию: throw

Устанавливает формат результата запроса распределенного DDL.

Допустимые значения:

- `throw` — Возвращает набор результатов с состоянием выполнения запроса для всех хостов, где запрос завершен. Если запрос завершился с ошибкой на некоторых хостах, будет повторно выброшено первое исключение. Если запрос еще не завершен на некоторых хостах, и превышено значение [distributed_ddl_task_timeout](#distributed_ddl_task_timeout), то выбрасывается исключение `TIMEOUT_EXCEEDED`.
- `none` — Похоже на throw, но запрос распределенного DDL не возвращает набор результатов.
- `null_status_on_timeout` — Возвращает `NULL` в качестве состояния выполнения в некоторых строках результата вместо выбрасывания `TIMEOUT_EXCEEDED`, если запрос не завершен на соответствующих хостах.
- `never_throw` — Не выбрасывать `TIMEOUT_EXCEEDED` и не повторно выбрасывать исключения, если запрос завершился с ошибкой на некоторых хостах.
- `none_only_active` - похоже на `none`, но не ждет неактивные реплики базы данных `Replicated`. Примечание: с этим режимом невозможно узнать, что запрос не был выполнен на какой-то реплике и будет выполняться в фоновом режиме.
- `null_status_on_timeout_only_active` — похоже на `null_status_on_timeout`, но не ждет неактивные реплики базы данных `Replicated`.
- `throw_only_active` — похоже на `throw`, но не ждет неактивные реплики базы данных `Replicated`.

Значение по умолчанию в облаке: `none`.
## distributed_ddl_task_timeout {#distributed_ddl_task_timeout}



Тип: Int64

Значение по умолчанию: 180

Устанавливает тайм-аут для ответов DDL-запросов от всех хостов в кластере. Если DDL-запрос не был выполнен на всех хостах, ответ будет содержать ошибку времени ожидания, и запрос будет выполнен в асинхронном режиме. Отрицательное значение означает бесконечность.

Допустимые значения:

- Положительное целое число.
- 0 — Асинхронный режим.
- Отрицательное целое число — бесконечный тайм-аут.
## distributed_foreground_insert {#distributed_foreground_insert}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает синхронную вставку данных в таблицу [Distributed](/engines/table-engines/special/distributed).

По умолчанию, при вставке данных в таблицу `Distributed`, сервер ClickHouse отправляет данные на узлы кластера в фоновом режиме. Когда `distributed_foreground_insert=1`, данные обрабатываются синхронно, и операция `INSERT` завершается успешно только после того, как все данные сохранены на всех шардов (по крайней мере одна реплика для каждого шард, если `internal_replication` истинно).

Допустимые значения:

- 0 — Данные вставляются в фоновом режиме.
- 1 — Данные вставляются в синхронном режиме.

Значение по умолчанию в облаке: `1`.

**Смотрите также**

- [Движок таблиц Distributed](/engines/table-engines/special/distributed)
- [Управление распределенными таблицами](/sql-reference/statements/system#managing-distributed-tables)
## distributed_group_by_no_merge {#distributed_group_by_no_merge}



Тип: UInt64

Значение по умолчанию: 0

Не объединять состояния агрегации с разных серверов для распределенной обработки запросов, вы можете использовать это, если точно известно, что на разных шарах разные ключи

Допустимые значения:

- `0` — Отключено (окончательная обработка запроса выполняется на узле инициаторе).
- `1` - Не объединять состояния агрегации с разных серверов для распределенной обработки запроса (запрос полностью обрабатывается на шард, инициатор только проксирует данные), можно использовать, если точно известно, что на разных шарах разные ключи.
- `2` - То же самое, что и `1`, но применяется `ORDER BY` и `LIMIT` (это невозможно, когда запрос полностью обрабатывается на удаленном узле, как для `distributed_group_by_no_merge=1`) на инициаторе (можно использовать для запросов с `ORDER BY` и/или `LIMIT`).

**Пример**

```sql
SELECT *
FROM remote('127.0.0.{2,3}', system.one)
GROUP BY dummy
LIMIT 1
SETTINGS distributed_group_by_no_merge = 1
FORMAT PrettyCompactMonoBlock

┌─dummy─┐
│     0 │
│     0 │
└───────┘
```

```sql
SELECT *
FROM remote('127.0.0.{2,3}', system.one)
GROUP BY dummy
LIMIT 1
SETTINGS distributed_group_by_no_merge = 2
FORMAT PrettyCompactMonoBlock

┌─dummy─┐
│     0 │
└───────┘
```
## distributed_insert_skip_read_only_replicas {#distributed_insert_skip_read_only_replicas}



Тип: Bool

Значение по умолчанию: 0

Включает пропуск только для чтения реплик для запросов INSERT в распределенные таблицы.

Допустимые значения:

- 0 — INSERT выполняется как обычно, если он будет направлен на реплику только для чтения, он завершится с ошибкой.
- 1 — Инициатор пропустит реплики только для чтения перед отправкой данных на шары.
## distributed_product_mode {#distributed_product_mode}



Тип: DistributedProductMode

Значение по умолчанию: deny

Изменяет поведение [распределенных подзапросов](../../sql-reference/operators/in.md).

ClickHouse применяет эту настройку, когда запрос содержит произведение распределенных таблиц, т.е. когда запрос для распределенной таблицы содержит не-GLOBAL подзапрос для распределенной таблицы.

Ограничения:

- Применяется только для подзапросов IN и JOIN.
- Только если секция FROM использует распределенную таблицу, содержащую более одного шара.
- Если подзапрос касается распределенной таблицы, содержащей более одного шара.
- Не используется для функции таблицы [remote](../../sql-reference/table-functions/remote.md).

Допустимые значения:

- `deny` — Значение по умолчанию. Запрещает использование этих типов подзапросов (возвращает исключение "Запрещены двойные распределенные подзапросы IN/JOIN").
- `local` — Заменяет базу данных и таблицу в подзапросе на локальные для целевого сервера (шара), оставляя обычные `IN`/`JOIN.`
- `global` — Заменяет `IN`/`JOIN` запрос на `GLOBAL IN`/`GLOBAL JOIN.`
- `allow` — Разрешает использование этих типов подзапросов.
## distributed_push_down_limit {#distributed_push_down_limit}



Тип: UInt64

Значение по умолчанию: 1

Включает или отключает применение [LIMIT](#limit) на каждом шарде отдельно.

Это позволит избежать:
- Отправки лишних строк по сети;
- Обработки строк, превышающих лимит, на инициаторе.

Начиная с версии 21.9, вы больше не можете получать неаккуратные результаты, так как `distributed_push_down_limit` изменяет выполнение запроса только в том случае, если выполнено хотя бы одно из условий:
- [distributed_group_by_no_merge](#distributed_group_by_no_merge) > 0.
- Запрос **не содержит** `GROUP BY`/`DISTINCT`/`LIMIT BY`, но имеет `ORDER BY`/`LIMIT`.
- Запрос **содержит** `GROUP BY`/`DISTINCT`/`LIMIT BY` с `ORDER BY`/`LIMIT` и:
    - [optimize_skip_unused_shards](#optimize_skip_unused_shards) включен.
    - [optimize_distributed_group_by_sharding_key](#optimize_distributed_group_by_sharding_key) включен.

Допустимые значения:

- 0 — Отключено.
- 1 — Включено.

Смотрите также:

- [distributed_group_by_no_merge](#distributed_group_by_no_merge)
- [optimize_skip_unused_shards](#optimize_skip_unused_shards)
- [optimize_distributed_group_by_sharding_key](#optimize_distributed_group_by_sharding_key)
## distributed_replica_error_cap {#distributed_replica_error_cap}



Тип: UInt64

Значение по умолчанию: 1000

- Тип: беззнаковое целое
- Значение по умолчанию: 1000

Количество ошибок для каждой реплики ограничено этим значением, предотвращая накопление слишком большого количества ошибок в одной реплике.

Смотрите также:

- [load_balancing](#load_balancing-round_robin)
- [Движок таблицы Distributed](../../engines/table-engines/special/distributed.md)
- [distributed_replica_error_half_life](#distributed_replica_error_half_life)
- [distributed_replica_max_ignored_errors](#distributed_replica_max_ignored_errors)
## distributed_replica_error_half_life {#distributed_replica_error_half_life}



Тип: Seconds

Значение по умолчанию: 60

- Тип: секунды
- Значение по умолчанию: 60 секунд

Контролирует, как быстро ошибки в распределенных таблицах обнуляются. Если реплика недоступна некоторое время, накапливает 5 ошибок, и distributed_replica_error_half_life установлен на 1 секунду, тогда реплика считается нормальной через 3 секунды после последней ошибки.

Смотрите также:

- [load_balancing](#load_balancing-round_robin)
- [Движок таблицы Distributed](../../engines/table-engines/special/distributed.md)
- [distributed_replica_error_cap](#distributed_replica_error_cap)
- [distributed_replica_max_ignored_errors](#distributed_replica_max_ignored_errors)
## distributed_replica_max_ignored_errors {#distributed_replica_max_ignored_errors}



Тип: UInt64

Значение по умолчанию: 0

- Тип: беззнаковое целое
- Значение по умолчанию: 0

Количество ошибок, которые будут игнорироваться при выборе реплик (в соответствии с алгоритмом `load_balancing`).

Смотрите также:

- [load_balancing](#load_balancing-round_robin)
- [Движок таблицы Distributed](../../engines/table-engines/special/distributed.md)
- [distributed_replica_error_cap](#distributed_replica_error_cap)
- [distributed_replica_error_half_life](#distributed_replica_error_half_life)
## do_not_merge_across_partitions_select_final {#do_not_merge_across_partitions_select_final}



Тип: Bool

Значение по умолчанию: 0

Объединять части только в одной партиции в select final
## empty_result_for_aggregation_by_constant_keys_on_empty_set {#empty_result_for_aggregation_by_constant_keys_on_empty_set}



Тип: Bool

Значение по умолчанию: 1

Возвращать пустой результат при агрегации по постоянным ключам на пустом наборе.
## empty_result_for_aggregation_by_empty_set {#empty_result_for_aggregation_by_empty_set}



Тип: Bool

Значение по умолчанию: 0

Возвращать пустой результат при агрегации без ключей на пустом наборе.
## enable_adaptive_memory_spill_scheduler {#enable_adaptive_memory_spill_scheduler}
<ExperimentalBadge/>


Тип: Bool

Значение по умолчанию: 0

Запускать процессор для адаптивной выгрузки данных во внешнее хранилище. На данный момент поддерживается объединение grace.
## enable_blob_storage_log {#enable_blob_storage_log}



Тип: Bool

Значение по умолчанию: 1

Записывать информацию о операциях с объектным хранилищем в таблицу system.blob_storage_log
## enable_deflate_qpl_codec {#enable_deflate_qpl_codec}



Тип: Bool

Значение по умолчанию: 0

Если включен, кодек DEFLATE_QPL может использоваться для сжатия колонок.
## enable_early_constant_folding {#enable_early_constant_folding}



Тип: Bool

Значение по умолчанию: 1

Включает оптимизацию запросов, при которой мы анализируем результаты функции и подзапросов и переписываем запрос, если в них есть константы.
## enable_extended_results_for_datetime_functions {#enable_extended_results_for_datetime_functions}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает возврат результатов типа:
- `Date32` с расширенным диапазоном (по сравнению с типом `Date`) для функций [toStartOfYear](../../sql-reference/functions/date-time-functions.md/#tostartofyear), [toStartOfISOYear](../../sql-reference/functions/date-time-functions.md/#tostartofisoyear), [toStartOfQuarter](../../sql-reference/functions/date-time-functions.md/#tostartofquarter), [toStartOfMonth](../../sql-reference/functions/date-time-functions.md/#tostartofmonth), [toLastDayOfMonth](../../sql-reference/functions/date-time-functions.md/#tolastdayofmonth), [toStartOfWeek](../../sql-reference/functions/date-time-functions.md/#tostartofweek), [toLastDayOfWeek](../../sql-reference/functions/date-time-functions.md/#tolastdayofweek) и [toMonday](../../sql-reference/functions/date-time-functions.md/#tomonday).
- `DateTime64` с расширенным диапазоном (по сравнению с типом `DateTime`) для функций [toStartOfDay](../../sql-reference/functions/date-time-functions.md/#tostartofday), [toStartOfHour](../../sql-reference/functions/date-time-functions.md/#tostartofhour), [toStartOfMinute](../../sql-reference/functions/date-time-functions.md/#tostartofminute), [toStartOfFiveMinutes](../../sql-reference/functions/date-time-functions.md/#tostartoffiveminutes), [toStartOfTenMinutes](../../sql-reference/functions/date-time-functions.md/#tostartoftenminutes), [toStartOfFifteenMinutes](../../sql-reference/functions/date-time-functions.md/#tostartoffifteenminutes) и [timeSlot](../../sql-reference/functions/date-time-functions.md/#timeslot).

Допустимые значения:

- 0 — Функции возвращают `Date` или `DateTime` для всех типов аргументов.
- 1 — Функции возвращают `Date32` или `DateTime64` для аргументов `Date32` или `DateTime64` и `Date` или `DateTime` в противном случае.
## enable_filesystem_cache {#enable_filesystem_cache}



Тип: Bool

Значение по умолчанию: 1

Использовать кэш для удаленной файловой системы. Эта настройка не включает/выключает кэш для дисков (это должно выполняться через конфигурацию диска), но позволяет обойти кэш для некоторых запросов, если это необходимо.
## enable_filesystem_cache_log {#enable_filesystem_cache_log}



Тип: Bool

Значение по умолчанию: 0

Позволяет записывать журнал кэширования файловой системы для каждого запроса
## enable_filesystem_cache_on_write_operations {#enable_filesystem_cache_on_write_operations}



Тип: Bool

Значение по умолчанию: 0

Запись в кэш при операциях записи. Чтобы эта настройка работала, она также должна быть добавлена в конфигурацию диска.
## enable_filesystem_read_prefetches_log {#enable_filesystem_read_prefetches_log}



Тип: Bool

Значение по умолчанию: 0

Записывать в журнал system.filesystem prefetch_log во время запроса. Следует использовать только для тестирования или отладки, не рекомендуется включать по умолчанию.
## enable_global_with_statement {#enable_global_with_statement}



Тип: Bool

Значение по умолчанию: 1

Распространять оператор WITH на запросы UNION и все подзапросы
## enable_hdfs_pread {#enable_hdfs_pread}



Тип: Bool

Значение по умолчанию: 1

Включить или отключить предавторизацию для файлов HDFS. По умолчанию используется `hdfsPread`. Если отключено, будут использоваться `hdfsRead` и `hdfsSeek` для чтения файлов hdfs.
## enable_http_compression {#enable_http_compression}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает сжатие данных в ответе на HTTP-запрос.

Для получения дополнительной информации читайте [описание HTTP интерфейса](../../interfaces/http.md).

Допустимые значения:

- 0 — Отключено.
- 1 — Включено.
## enable_job_stack_trace {#enable_job_stack_trace}



Тип: Bool

Значение по умолчанию: 1

Выводить трассировку стека создателя задания, когда задание завершает с исключением
## enable_lightweight_delete {#enable_lightweight_delete}



Тип: Bool

Значение по умолчанию: 1

Включить легковесные мутации DELETE для таблиц mergetree.
## enable_memory_bound_merging_of_aggregation_results {#enable_memory_bound_merging_of_aggregation_results}



Тип: Bool

Значение по умолчанию: 1

Включить стратегию слияния, ограниченную по памяти, для агрегации.
## enable_multiple_prewhere_read_steps {#enable_multiple_prewhere_read_steps}



Тип: Bool

Значение по умолчанию: 1

Переместить больше условий из WHERE в PREWHERE и выполнить чтение с диска и фильтрацию в несколько этапов, если есть несколько условий, объединенных с помощью AND.
## enable_named_columns_in_function_tuple {#enable_named_columns_in_function_tuple}



Тип: Bool

Значение по умолчанию: 0

Генерировать именованные кортежи в функции tuple(), когда все имена уникальны и могут интерпретироваться как неэкранированные идентификаторы.
## enable_optimize_predicate_expression {#enable_optimize_predicate_expression}



Тип: Bool

Значение по умолчанию: 1

Включает прокси-оптимизацию в запросах `SELECT`.

Прокси-оптимизация может значительно сократить сетевой трафик для распределенных запросов.

Допустимые значения:

- 0 — Отключено.
- 1 — Включено.

Использование

Рассмотрим следующие запросы:

1.  `SELECT count() FROM test_table WHERE date = '2018-10-10'`
2.  `SELECT count() FROM (SELECT * FROM test_table) WHERE date = '2018-10-10'`

Если `enable_optimize_predicate_expression = 1`, то время выполнения этих запросов будет одинаковым, потому что ClickHouse применяет `WHERE` к подзапросу во время его обработки.

Если `enable_optimize_predicate_expression = 0`, то время выполнения второго запроса будет значительно больше, потому что оператор `WHERE` применяется ко всем данным после завершения подзапроса.
## enable_optimize_predicate_expression_to_final_subquery {#enable_optimize_predicate_expression_to_final_subquery}



Тип: Bool

Значение по умолчанию: 1

Разрешить прокси-предикат для конечного подзапроса.
## enable_order_by_all {#enable_order_by_all}



Тип: Bool

Значение по умолчанию: 1

Включает или отключает сортировку с синтаксисом `ORDER BY ALL`, см. [ORDER BY](../../sql-reference/statements/select/order-by.md).

Допустимые значения:

- 0 — Отключить ORDER BY ALL.
- 1 — Включить ORDER BY ALL.

**Пример**

Запрос:

```sql
CREATE TABLE TAB(C1 Int, C2 Int, ALL Int) ENGINE=Memory();

INSERT INTO TAB VALUES (10, 20, 30), (20, 20, 10), (30, 10, 20);

SELECT * FROM TAB ORDER BY ALL; -- возвращает ошибку, что ALL неоднозначно

SELECT * FROM TAB ORDER BY ALL SETTINGS enable_order_by_all = 0;
```

Результат:

```text
┌─C1─┬─C2─┬─ALL─┐
│ 20 │ 20 │  10 │
│ 30 │ 10 │  20 │
│ 10 │ 20 │  30 │
└────┴────┴─────┘
```
## enable_parsing_to_custom_serialization {#enable_parsing_to_custom_serialization}



Тип: Bool

Значение по умолчанию: 1

Если true, данные могут анализироваться непосредственно в колонки с пользовательской сериализацией (например, Sparse) согласно подсказкам для сериализации, полученным от таблицы.
## enable_positional_arguments {#enable_positional_arguments}



Тип: Bool

Значение по умолчанию: 1

Включает или отключает поддержку позиционных аргументов для операторов [GROUP BY](/sql-reference/statements/select/group-by), [LIMIT BY](../../sql-reference/statements/select/limit-by.md), [ORDER BY](../../sql-reference/statements/select/order-by.md).

Допустимые значения:

- 0 — Позиционные аргументы не поддерживаются.
- 1 — Позиционные аргументы поддерживаются: номера колонок могут использоваться вместо имен колонок.

**Пример**

Запрос:

```sql
CREATE TABLE positional_arguments(one Int, two Int, three Int) ENGINE=Memory();

INSERT INTO positional_arguments VALUES (10, 20, 30), (20, 20, 10), (30, 10, 20);

SELECT * FROM positional_arguments ORDER BY 2,3;
```

Результат:

```text
┌─one─┬─two─┬─three─┐
│  30 │  10 │   20  │
│  20 │  20 │   10  │
│  10 │  20 │   30  │
└─────┴─────┴───────┘
```
## enable_reads_from_query_cache {#enable_reads_from_query_cache}



Тип: Bool

Значение по умолчанию: 1

Если включено, результаты запросов `SELECT` извлекаются из [кэша запросов](../query-cache.md).

Допустимые значения:

- 0 - Отключено
- 1 - Включено
## enable_s3_requests_logging {#enable_s3_requests_logging}



Тип: Bool

Значение по умолчанию: 0

Включить очень явное логирование запросов S3. Имеет смысл только для отладки.
## enable_scalar_subquery_optimization {#enable_scalar_subquery_optimization}



Тип: Bool

Значение по умолчанию: 1

Если установлено в true, предотвратить (де)сериализацию больших скалярных значений в скалярных подзапросах и, возможно, избежать выполнения одного и того же подзапроса более одного раза.
## enable_sharing_sets_for_mutations {#enable_sharing_sets_for_mutations}



Тип: Bool

Значение по умолчанию: 1

Позволяет совместное использование объектов множества, созданных для подзапросов IN, между различными задачами одной мутации. Это снижает использование памяти и потребление CPU.
## enable_software_prefetch_in_aggregation {#enable_software_prefetch_in_aggregation}



Тип: Bool

Значение по умолчанию: 1

Включить использование программного предвыборки в агрегации.
## enable_unaligned_array_join {#enable_unaligned_array_join}



Тип: Bool

Значение по умолчанию: 0

Разрешить ARRAY JOIN с несколькими массивами разной длины. Когда эта настройка включена, массивы будут изменены на самый длинный.

## enable_url_encoding {#enable_url_encoding}

Тип: Bool

Значение по умолчанию: 1

Позволяет включить/выключить декодирование/кодирование пути в uri в таблицах движка [URL](../../engines/table-engines/special/url.md).

Включено по умолчанию.
## enable_vertical_final {#enable_vertical_final}

Тип: Bool

Значение по умолчанию: 1

Если включено, удаляются дублированные строки во время FINAL, помечая строки как удаленные и фильтруя их позже вместо объединения строк.
## enable_writes_to_query_cache {#enable_writes_to_query_cache}

Тип: Bool

Значение по умолчанию: 1

Если включено, результаты запросов `SELECT` сохраняются в [кэше запросов](../query-cache.md).

Возможные значения:

- 0 - Отключено
- 1 - Включено
## enable_zstd_qat_codec {#enable_zstd_qat_codec}

Тип: Bool

Значение по умолчанию: 0

Если включено, кодек ZSTD_QAT может быть использован для сжатия колонок.
## enforce_strict_identifier_format {#enforce_strict_identifier_format}

Тип: Bool

Значение по умолчанию: 0

Если включено, разрешает только имена идентификаторов, содержащие буквенно-цифровые символы и подчеркивания.
## engine_file_allow_create_multiple_files {#engine_file_allow_create_multiple_files}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает создание нового файла при каждой вставке в таблицы файла, если формат имеет суффикс (`JSON`, `ORC`, `Parquet` и т. д.). Если включено, при каждой вставке будет создан новый файл с именем, соответствующим этому шаблону:

`data.Parquet` -> `data.1.Parquet` -> `data.2.Parquet` и т. д.

Возможные значения:
- 0 — запрос `INSERT` добавляет новые данные в конец файла.
- 1 — запрос `INSERT` создает новый файл.
## engine_file_empty_if_not_exists {#engine_file_empty_if_not_exists}

Тип: Bool

Значение по умолчанию: 0

Позволяет выбирать данные из таблицы файлового движка без файла.

Возможные значения:
- 0 — `SELECT` выбрасывает исключение.
- 1 — `SELECT` возвращает пустой результат.
## engine_file_skip_empty_files {#engine_file_skip_empty_files}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает пропуск пустых файлов в таблицах движка [File](../../engines/table-engines/special/file.md).

Возможные значения:
- 0 — `SELECT` выбрасывает исключение, если пустой файл несовместим с запрашиваемым форматом.
- 1 — `SELECT` возвращает пустой результат для пустого файла.
## engine_file_truncate_on_insert {#engine_file_truncate_on_insert}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает усечение перед вставкой в таблицы [File](../../engines/table-engines/special/file.md).

Возможные значения:
- 0 — запрос `INSERT` добавляет новые данные в конец файла.
- 1 — запрос `INSERT` заменяет существующее содержимое файла новыми данными.
## engine_url_skip_empty_files {#engine_url_skip_empty_files}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает пропуск пустых файлов в таблицах движка [URL](../../engines/table-engines/special/url.md).

Возможные значения:
- 0 — `SELECT` выбрасывает исключение, если пустой файл несовместим с запрашиваемым форматом.
- 1 — `SELECT` возвращает пустой результат для пустого файла.
## except_default_mode {#except_default_mode}

Тип: SetOperationMode

Значение по умолчанию: ALL

Устанавливает режим по умолчанию в запросе EXCEPT. Возможные значения: пустая строка, 'ALL', 'DISTINCT'. Если пусто, запрос без режима выбросит исключение.
## external_storage_connect_timeout_sec {#external_storage_connect_timeout_sec}

Тип: UInt64

Значение по умолчанию: 10

Таймаут подключения в секундах. В настоящее время поддерживается только для MySQL.
## external_storage_max_read_bytes {#external_storage_max_read_bytes}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает максимальное количество байтов, когда таблица с внешним движком должна сбросить историю данных. В настоящее время поддерживается только для движка таблицы MySQL, движка базы данных и словаря. Если равно 0, эта настройка отключена.
## external_storage_max_read_rows {#external_storage_max_read_rows}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает максимальное количество строк, когда таблица с внешним движком должна сбросить историю данных. В настоящее время поддерживается только для движка таблицы MySQL, движка базы данных и словаря. Если равно 0, эта настройка отключена.
## external_storage_rw_timeout_sec {#external_storage_rw_timeout_sec}

Тип: UInt64

Значение по умолчанию: 300

Таймаут чтения/записи в секундах. В настоящее время поддерживается только для MySQL.
## external_table_functions_use_nulls {#external_table_functions_use_nulls}

Тип: Bool

Значение по умолчанию: 1

Определяет, как таблицы функций [mysql](../../sql-reference/table-functions/mysql.md), [postgresql](../../sql-reference/table-functions/postgresql.md) и [odbc](../../sql-reference/table-functions/odbc.md) используют Nullable столбцы.

Возможные значения:

- 0 — Табличная функция явно использует Nullable столбцы.
- 1 — Табличная функция неявно использует Nullable столбцы.

**Использование**

Если настройка установлена в `0`, табличная функция не создает Nullable столбцы и вставляет значения по умолчанию вместо NULL. Это также применимо к NULL значениям внутри массивов.
## external_table_strict_query {#external_table_strict_query}

Тип: Bool

Значение по умолчанию: 0

Если установлено в true, преобразование выражения в локальный фильтр запрещено для запросов к внешним таблицам.
## extract_key_value_pairs_max_pairs_per_row {#extract_key_value_pairs_max_pairs_per_row}

Тип: UInt64

Значение по умолчанию: 1000

Максимальное количество пар, которые могут быть сгенерированы функцией `extractKeyValuePairs`. Используется в качестве предосторожности против потребления слишком большого объема памяти.
## extremes {#extremes}

Тип: Bool

Значение по умолчанию: 0

Определяет, следует ли учитывать крайние значения (минимумы и максимумы в столбцах результата запроса). Принимает 0 или 1. По умолчанию 0 (отключено).
Для получения дополнительной информации см. раздел "Крайние значения".
## fallback_to_stale_replicas_for_distributed_queries {#fallback_to_stale_replicas_for_distributed_queries}

Тип: Bool

Значение по умолчанию: 1

Принуждает запрос к устаревшей реплике, если обновленные данные недоступны. См. [Репликация](../../engines/table-engines/mergetree-family/replication.md).

ClickHouse выбирает наиболее актуальную из устаревших реплик таблицы.

Используется при выполнении `SELECT` из распределенной таблицы, указывающей на реплицированные таблицы.

По умолчанию 1 (включено).
## filesystem_cache_boundary_alignment {#filesystem_cache_boundary_alignment}

Тип: UInt64

Значение по умолчанию: 0

Выравнивание границы кэша файловой системы. Эта настройка применяется только для чтения вне диска (например, для кэша удаленных движков таблиц / табличных функций, но не для конфигурации хранения таблиц MergeTree). Значение 0 означает отсутствие выравнивания.
## filesystem_cache_enable_background_download_during_fetch {#filesystem_cache_enable_background_download_during_fetch}

<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 1

Эта настройка влияет только на ClickHouse Cloud. Время ожидания для блокировки кэша для резервирования места в кэше файловой системы.
## filesystem_cache_enable_background_download_for_metadata_files_in_packed_storage {#filesystem_cache_enable_background_download_for_metadata_files_in_packed_storage}

<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 1

Эта настройка влияет только на ClickHouse Cloud. Время ожидания для блокировки кэша для резервирования места в кэше файловой системы.
## filesystem_cache_max_download_size {#filesystem_cache_max_download_size}

Тип: UInt64

Значение по умолчанию: 137438953472

Максимальный размер удаленного кэша файловой системы, который может быть загружен одним запросом.
## filesystem_cache_name {#filesystem_cache_name}

Тип: String

Значение по умолчанию: 

Имя кэша файловой системы, которое будет использоваться для статeless движков таблиц или озер данных.
## filesystem_cache_prefer_bigger_buffer_size {#filesystem_cache_prefer_bigger_buffer_size}

Тип: Bool

Значение по умолчанию: 1

Предпочитать больший размер буфера, если кэш файловой системы включен, чтобы избежать записи маленьких сегментов файла, которые ухудшают производительность кэша. С другой стороны, включение этой настройки может увеличить использование памяти.
## filesystem_cache_reserve_space_wait_lock_timeout_milliseconds {#filesystem_cache_reserve_space_wait_lock_timeout_milliseconds}

Тип: UInt64

Значение по умолчанию: 1000

Время ожидания для блокировки кэша для резервирования места в кэше файловой системы.
## filesystem_cache_segments_batch_size {#filesystem_cache_segments_batch_size}

Тип: UInt64

Значение по умолчанию: 20

Ограничение на размер одной партии сегментов файлов, которые буфер чтения может запросить из кэша. Слишком маленькое значение приведет к чрезмерным запросам к кэшу, слишком большое может замедлить вытеснение из кэша.
## filesystem_cache_skip_download_if_exceeds_per_query_cache_write_limit {#filesystem_cache_skip_download_if_exceeds_per_query_cache_write_limit}

Тип: Bool

Значение по умолчанию: 1

Пропустить загрузку из удаленной файловой системы, если превышен размер кэша запроса.
## filesystem_prefetch_max_memory_usage {#filesystem_prefetch_max_memory_usage}

Тип: UInt64

Значение по умолчанию: 1073741824

Максимальное использование памяти для предварительной выборки.
## filesystem_prefetch_step_bytes {#filesystem_prefetch_step_bytes}

Тип: UInt64

Значение по умолчанию: 0

Шаг предвыборки в байтах. Ноль означает `auto` - приблизительно лучший шаг предвыборки будет автоматически определен, но может не быть на 100% оптимальным. Фактическое значение может отличаться из-за настройки filesystem_prefetch_min_bytes_for_single_read_task.
## filesystem_prefetch_step_marks {#filesystem_prefetch_step_marks}

Тип: UInt64

Значение по умолчанию: 0

Шаг предвыборки в метках. Ноль означает `auto` - приблизительно лучший шаг предвыборки будет автоматически определен, но может не быть на 100% оптимальным. Фактическое значение может отличаться из-за настройки filesystem_prefetch_min_bytes_for_single_read_task.
## filesystem_prefetches_limit {#filesystem_prefetches_limit}

Тип: UInt64

Значение по умолчанию: 200

Максимальное количество предварительных выборок. Ноль означает неограниченно. Настройка `filesystem_prefetches_max_memory_usage` рекомендуется, если вы хотите ограничить количество предварительных выборок.
## final {#final}

Тип: Bool

Значение по умолчанию: 0

Автоматически применяет модификатор [FINAL](../../sql-reference/statements/select/from.md/#final-modifier) ко всем таблицам в запросе, к таблицам, для которых [FINAL](../../sql-reference/statements/select/from.md/#final-modifier) применим, включая объединенные таблицы и таблицы в подзапросах, а также распределенные таблицы.

Возможные значения:

- 0 - отключено
- 1 - включено

Пример:

```sql
CREATE TABLE test
(
    key Int64,
    some String
)
ENGINE = ReplacingMergeTree
ORDER BY key;

INSERT INTO test FORMAT Values (1, 'first');
INSERT INTO test FORMAT Values (1, 'second');

SELECT * FROM test;
┌─key─┬─some───┐
│   1 │ second │
└─────┴────────┘
┌─key─┬─some──┐
│   1 │ first │
└─────┴───────┘

SELECT * FROM test SETTINGS final = 1;
┌─key─┬─some───┐
│   1 │ second │
└─────┴────────┘

SET final = 1;
SELECT * FROM test;
┌─key─┬─some───┐
│   1 │ second │
└─────┴────────┘
```
## flatten_nested {#flatten_nested}

Тип: Bool

Значение по умолчанию: 1

Устанавливает формат данных вложенных [nested](../../sql-reference/data-types/nested-data-structures/index.md) колонок.

Возможные значения:

- 1 — Вложенные колонки распрямляются в отдельные массивы.
- 0 — Вложенные колонки остаются в виде одного массива кортежей.

**Использование**

Если настройка установлена в `0`, возможно использование произвольного уровня вложенности.

**Примеры**

Запрос:

```sql
SET flatten_nested = 1;
CREATE TABLE t_nest (`n` Nested(a UInt32, b UInt32)) ENGINE = MergeTree ORDER BY tuple();

SHOW CREATE TABLE t_nest;
```

Результат:

```text
┌─statement───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ CREATE TABLE default.t_nest
(
    `n.a` Array(UInt32),
    `n.b` Array(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple()
SETTINGS index_granularity = 8192 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

Запрос:

```sql
SET flatten_nested = 0;

CREATE TABLE t_nest (`n` Nested(a UInt32, b UInt32)) ENGINE = MergeTree ORDER BY tuple();

SHOW CREATE TABLE t_nest;
```

Результат:

```text
┌─statement──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ CREATE TABLE default.t_nest
(
    `n` Nested(a UInt32, b UInt32)
)
ENGINE = MergeTree
ORDER BY tuple()
SETTINGS index_granularity = 8192 │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```
## force_aggregate_partitions_independently {#force_aggregate_partitions_independently}

Тип: Bool

Значение по умолчанию: 0

Принуждает использовать оптимизацию, когда это применимо, но эвристика решила не использовать ее.
## force_aggregation_in_order {#force_aggregation_in_order}

Тип: Bool

Значение по умолчанию: 0

Настройка используется самим сервером для поддержки распределенных запросов. Не изменяйте ее вручную, так как это нарушит нормальную работу. (Принуждает использование агрегации в порядке на удаленных узлах во время распределенной агрегации).
## force_data_skipping_indices {#force_data_skipping_indices}

Тип: String

Значение по умолчанию: 

Отключает выполнение запроса, если переданные индексы пропуска данных не были использованы.

Рассмотрим следующий пример:

```sql
CREATE TABLE data
(
    key Int,
    d1 Int,
    d1_null Nullable(Int),
    INDEX d1_idx d1 TYPE minmax GRANULARITY 1,
    INDEX d1_null_idx assumeNotNull(d1_null) TYPE minmax GRANULARITY 1
)
Engine=MergeTree()
ORDER BY key;

SELECT * FROM data_01515;
SELECT * FROM data_01515 SETTINGS force_data_skipping_indices=''; -- запрос вызовет ошибку CANNOT_PARSE_TEXT.
SELECT * FROM data_01515 SETTINGS force_data_skipping_indices='d1_idx'; -- запрос вызовет ошибку INDEX_NOT_USED.
SELECT * FROM data_01515 WHERE d1 = 0 SETTINGS force_data_skipping_indices='d1_idx'; -- Ok.
SELECT * FROM data_01515 WHERE d1 = 0 SETTINGS force_data_skipping_indices='`d1_idx`'; -- Ok (пример полного парсера).
SELECT * FROM data_01515 WHERE d1 = 0 SETTINGS force_data_skipping_indices='`d1_idx`, d1_null_idx'; -- запрос вызовет ошибку INDEX_NOT_USED, так как d1_null_idx не использован.
SELECT * FROM data_01515 WHERE d1 = 0 AND assumeNotNull(d1_null) = 0 SETTINGS force_data_skipping_indices='`d1_idx`, d1_null_idx'; -- Ok.
```
## force_grouping_standard_compatibility {#force_grouping_standard_compatibility}

Тип: Bool

Значение по умолчанию: 1

Заставляет функцию GROUPING возвращать 1, когда аргумент не используется как ключ агрегации.
## force_index_by_date {#force_index_by_date}

Тип: Bool

Значение по умолчанию: 0

Отключает выполнение запроса, если индекс не может быть использован по дате.

Работает с таблицами семейства MergeTree.

Если `force_index_by_date=1`, ClickHouse проверяет, есть ли в запросе условие ключа даты, которое может быть использовано для ограничения диапазонов данных. Если нет подходящего условия, оно выбрасывает исключение. Однако оно не проверяет, уменьшает ли условие объем данных для чтения. Например, условие `Date != ' 2000-01-01 '` приемлемо, даже если оно совпадает со всеми данными в таблице (т. е. выполнение запроса требует полной выборки). Для получения дополнительной информации о диапазонах данных в таблицах MergeTree см. [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md).
## force_optimize_projection {#force_optimize_projection}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает обязательное использование [проекций](../../engines/table-engines/mergetree-family/mergetree.md/#projections) в запросах `SELECT`, когда оптимизация проекции включена (см. настройку [optimize_use_projections](#optimize_use_projections)).

Возможные значения:

- 0 — Оптимизация проекции не обязательна.
- 1 — Оптимизация проекции обязательна.
## force_optimize_projection_name {#force_optimize_projection_name}

Тип: String

Значение по умолчанию: 

Если установлено в непустую строку, проверяется, что эта проекция используется в запросе хотя бы один раз.

Возможные значения:

- строка: имя проекции, используемой в запросе.
## force_optimize_skip_unused_shards {#force_optimize_skip_unused_shards}

Тип: UInt64

Значение по умолчанию: 0

Включает или выключает выполнение запроса, если [optimize_skip_unused_shards](#optimize_skip_unused_shards) включена и пропуск неиспользуемых шардов невозможен. Если пропуск невозможен, а настройка включена, выбрасывается исключение.

Возможные значения:

- 0 — Отключено. ClickHouse не выбрасывает исключение.
- 1 — Включено. Выполнение запроса отключено только если у таблицы есть ключ шардирования.
- 2 — Включено. Выполнение запроса отключено независимо от того, определён ли у таблицы ключ шардирования.
## force_optimize_skip_unused_shards_nesting {#force_optimize_skip_unused_shards_nesting}

Тип: UInt64

Значение по умолчанию: 0

Контролирует [`force_optimize_skip_unused_shards`](#force_optimize_skip_unused_shards) (поэтому все ещё требует [`force_optimize_skip_unused_shards`](#force_optimize_skip_unused_shards)) в зависимости от уровня вложенности распределенного запроса (случай, когда у вас есть `Distributed` таблица, которая смотрит на другую `Distributed` таблицу).

Возможные значения:

- 0 - Отключено, `force_optimize_skip_unused_shards` всегда работает.
- 1 — Включает `force_optimize_skip_unused_shards` только для первого уровня.
- 2 — Включает `force_optimize_skip_unused_shards` до второго уровня.
## force_primary_key {#force_primary_key}

Тип: Bool

Значение по умолчанию: 0

Отключает выполнение запроса, если индексация по первичному ключу невозможна.

Работает с таблицами семейства MergeTree.

Если `force_primary_key=1`, ClickHouse проверяет, есть ли в запросе условие первичного ключа, которое может быть использовано для ограничения диапазонов данных. Если нет подходящего условия, оно выбрасывает исключение. Однако не проверяет, уменьшает ли это условие объем данных для чтения. Для получения дополнительной информации о диапазонах данных в таблицах MergeTree см. [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md).
## force_remove_data_recursively_on_drop {#force_remove_data_recursively_on_drop}

Тип: Bool

Значение по умолчанию: 0

Рекурсивно удаляет данные по запросу DROP. Избегает ошибки 'Каталог не пуст', но может тихо удалить отсоединенные данные.
## formatdatetime_f_prints_scale_number_of_digits {#formatdatetime_f_prints_scale_number_of_digits}

Тип: Bool

Значение по умолчанию: 0

Форматировщик '%f' в функции 'formatDateTime' печатает только количество знаков масштабирования для DateTime64 вместо фиксированных 6 знаков.
## formatdatetime_f_prints_single_zero {#formatdatetime_f_prints_single_zero}

Тип: Bool

Значение по умолчанию: 0

Форматировщик '%f' в функции 'formatDateTime' печатает один ноль вместо шести нулей, если отформатированное значение не имеет дробных секунд.
## formatdatetime_format_without_leading_zeros {#formatdatetime_format_without_leading_zeros}

Тип: Bool

Значение по умолчанию: 0

Форматировщики '%c', '%l' и '%k' в функции 'formatDateTime' печатают месяцы и часы безLeading нулей.
## formatdatetime_parsedatetime_m_is_month_name {#formatdatetime_parsedatetime_m_is_month_name}

Тип: Bool

Значение по умолчанию: 1

Форматировщик '%M' в функциях 'formatDateTime' и 'parseDateTime' печатает/анализирует название месяца вместо минут.
## fsync_metadata {#fsync_metadata}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает [fsync](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fsync.html) при записи `.sql` файлов. Включено по умолчанию.

Есть смысл отключить его, если у сервера миллионы маленьких таблиц, которые постоянно создаются и уничтожаются.
## function_implementation {#function_implementation}

Тип: String

Значение по умолчанию: 

Выбор реализации функции для определенной цели или варианта (экспериментально). Если пусто, включены все они.
## function_json_value_return_type_allow_complex {#function_json_value_return_type_allow_complex}

Тип: Bool

Значение по умолчанию: 0

Контролирует, разрешено ли возвращение сложного типа (например: struct, array, map) для функции json_value.

```sql
SELECT JSON_VALUE('{"hello":{"world":"!"}}', '$.hello') settings function_json_value_return_type_allow_complex=true

┌─JSON_VALUE('{"hello":{"world":"!"}}', '$.hello')─┐
│ {"world":"!"}                                    │
└──────────────────────────────────────────────────┘

1 строка в наборе. Затраченное время: 0.001 сек.
```

Возможные значения:

- true — Разрешено.
- false — Запрещено.
## function_json_value_return_type_allow_nullable {#function_json_value_return_type_allow_nullable}

Тип: Bool

Значение по умолчанию: 0

Контролирует, разрешено ли возвращать `NULL`, когда значение отсутствует для функции JSON_VALUE.

```sql
SELECT JSON_VALUE('{"hello":"world"}', '$.b') settings function_json_value_return_type_allow_nullable=true;

┌─JSON_VALUE('{"hello":"world"}', '$.b')─┐
│ ᴺᵁᴸᴸ                                   │
└────────────────────────────────────────┘

1 строка в наборе. Затраченное время: 0.001 сек.
```

Возможные значения:

- true — Разрешено.
- false — Запрещено.
## function_locate_has_mysql_compatible_argument_order {#function_locate_has_mysql_compatible_argument_order}

Тип: Bool

Значение по умолчанию: 1

Контролирует порядок аргументов в функции [locate](../../sql-reference/functions/string-search-functions.md/#locate).

Возможные значения:

- 0 — Функция `locate` принимает аргументы `(haystack, needle[, start_pos])`.
- 1 — Функция `locate` принимает аргументы `(needle, haystack, [, start_pos])` (совместимое с MySQL поведение).
## function_range_max_elements_in_block {#function_range_max_elements_in_block}

Тип: UInt64

Значение по умолчанию: 500000000

Устанавливает предельное значение объемов данных, генерируемых функцией [range](/sql-reference/functions/array-functions#rangeend-rangestart--end--step). Определяет максимальное количество значений, генерируемых функцией на блок данных (сумма размеров массивов для каждой строки в блоке).

Возможные значения:

- Положительное целое число.

**См. также**

- [max_block_size](#max_block_size)
- [min_insert_block_size_rows](#min_insert_block_size_rows)
## function_sleep_max_microseconds_per_block {#function_sleep_max_microseconds_per_block}

Тип: UInt64

Значение по умолчанию: 3000000

Максимальное количество микросекунд, на которое функция `sleep` может засыпать для каждого блока. Если пользователь вызывает ее с большим значением, выбрасывается исключение. Это предельное значение.
## function_visible_width_behavior {#function_visible_width_behavior}

Тип: UInt64

Значение по умолчанию: 1

Версия поведения `visibleWidth`. 0 - только считается количество кодовых точек; 1 - правильно считать символы нулевой ширины и объединяющие символы, считать полуширокие символы как два, оценивать ширину табуляции, учитывать удаляющие символы.
## geo_distance_returns_float64_on_float64_arguments {#geo_distance_returns_float64_on_float64_arguments}

Тип: Bool

Значение по умолчанию: 1

Если все четыре аргумента для функций `geoDistance`, `greatCircleDistance`, `greatCircleAngle` являются Float64, вернуться Float64 и использовать двойную точность для внутренних вычислений. В предыдущих версиях ClickHouse функции всегда возвращали Float32.
## glob_expansion_max_elements {#glob_expansion_max_elements}

Тип: UInt64

Значение по умолчанию: 1000

Максимальное количество разрешенных адресов (для внешних хранилищ, табличных функций и др.).
## grace_hash_join_initial_buckets {#grace_hash_join_initial_buckets}
<ExperimentalBadge/>

Тип: NonZeroUInt64

Значение по умолчанию: 1

Начальное количество ведер для управления хешем.
## grace_hash_join_max_buckets {#grace_hash_join_max_buckets}
<ExperimentalBadge/>

Тип: NonZeroUInt64

Значение по умолчанию: 1024

Ограничение на количество ведер для управления хешем.
## group_by_overflow_mode {#group_by_overflow_mode}

Тип: OverflowModeGroupBy

Значение по умолчанию: throw

Устанавливает, что происходит, когда количество уникальных ключей для агрегации превышает лимит:
- `throw`: выбросить исключение
- `break`: остановить выполнение запроса и вернуть частичный результат
- `any`: продолжить агрегацию для ключей, которые попали в набор, но не добавлять новые ключи в набор.

Использование значения 'any' позволяет вам запустить аппроксимацию GROUP BY. Качество
этой аппроксимации зависит от статистической природы данных.
## group_by_two_level_threshold {#group_by_two_level_threshold}

Тип: UInt64

Значение по умолчанию: 100000

С какого числа ключей начинается двухуровневая агрегация. 0 - порог не установлен.
## group_by_two_level_threshold_bytes {#group_by_two_level_threshold_bytes}

Тип: UInt64

Значение по умолчанию: 50000000

С какого размера состояния агрегации в байтах начинается использование двухуровневой агрегации. 0 - порог не установлен. Двухуровневая агрегация используется, когда хотя бы один из порогов срабатывает.
## group_by_use_nulls {#group_by_use_nulls}

Тип: Bool

Значение по умолчанию: 0

Изменяет способ, которым [предложение GROUP BY](/sql-reference/statements/select/group-by) обрабатывает типы ключей агрегации.
Когда используются спецификаторы `ROLLUP`, `CUBE` или `GROUPING SETS`, некоторые ключи агрегации могут не использоваться для получения некоторых строк результата.
Столбцы для этих ключей заполняются либо значением по умолчанию, либо `NULL` в соответствующих строках в зависимости от этой настройки.

Возможные значения:

- 0 — Используется значение по умолчанию для типа ключа агрегации для получения отсутствующих значений.
- 1 — ClickHouse выполняет `GROUP BY` так же, как это говорит стандарт SQL. Типы ключей агрегации преобразуются в [Nullable](/sql-reference/data-types/nullable). Столбцы для соответствующих ключей агрегации заполняются [NULL](/sql-reference/syntax#null) для строк, которые не использовали его.

См. также:

- [Предложение GROUP BY](/sql-reference/statements/select/group-by)
## h3togeo_lon_lat_result_order {#h3togeo_lon_lat_result_order}

Тип: Bool

Значение по умолчанию: 0

Функция 'h3ToGeo' возвращает (lon, lat), если true, в противном случае (lat, lon).
## handshake_timeout_ms {#handshake_timeout_ms}

Тип: Milliseconds

Значение по умолчанию: 10000

Таймаут в миллисекундах для получения пакета Hello от реплик во время рукопожатия.
## hdfs_create_new_file_on_insert {#hdfs_create_new_file_on_insert}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает создание нового файла при каждой вставке в таблицы HDFS. Если включено, при каждой вставке будет создан новый файл HDFS с именем, похожим на этот шаблон:

начальный: `data.Parquet.gz` -> `data.1.Parquet.gz` -> `data.2.Parquet.gz` и т. д.

Возможные значения:
- 0 — запрос `INSERT` добавляет новые данные в конец файла.
- 1 — запрос `INSERT` создает новый файл.
## hdfs_ignore_file_doesnt_exist {#hdfs_ignore_file_doesnt_exist}

Тип: Bool

Значение по умолчанию: 0

Игнорировать отсутствие файла, если он не существует при чтении определенных ключей.

Возможные значения:
- 1 — `SELECT` возвращает пустой результат.
- 0 — `SELECT` выбрасывает исключение.
## hdfs_replication {#hdfs_replication}

Тип: UInt64

Значение по умолчанию: 0

Фактическое количество репликаций может быть указано при создании hdfs файла.
## hdfs_skip_empty_files {#hdfs_skip_empty_files}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает пропуск пустых файлов в таблицах движка [HDFS](../../engines/table-engines/integrations/hdfs.md).

Возможные значения:
- 0 — `SELECT` выбрасывает исключение, если пустой файл несовместим с запрашиваемым форматом.
- 1 — `SELECT` возвращает пустой результат для пустого файла.
## hdfs_throw_on_zero_files_match {#hdfs_throw_on_zero_files_match}

Тип: Bool

Значение по умолчанию: 0

Выбросить ошибку, если по правилам расширения glob соответствуют нулевым файлам.

Возможные значения:
- 1 — `SELECT` выбрасывает исключение.
- 0 — `SELECT` возвращает пустой результат.
## hdfs_truncate_on_insert {#hdfs_truncate_on_insert}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает усечение перед вставкой в таблицы hdfs. Если отключено, выбрасывается исключение при попытке вставки, если файл в HDFS уже существует.

Возможные значения:
- 0 — запрос `INSERT` добавляет новые данные в конец файла.
- 1 — запрос `INSERT` заменяет существующее содержимое файла новым данными.
## hedged_connection_timeout_ms {#hedged_connection_timeout_ms}

Тип: Milliseconds

Значение по умолчанию: 50

Таймаут подключения для установления соединения с репликой для защитных запросов.
## hnsw_candidate_list_size_for_search {#hnsw_candidate_list_size_for_search}
<ExperimentalBadge/>

Тип: UInt64

Значение по умолчанию: 256

Размер динамического списка кандидатов при поиске индекса схожести векторов, также известный как 'ef_search'.
## hsts_max_age {#hsts_max_age}

Тип: UInt64

Значение по умолчанию: 0

Время истечения для HSTS. 0 означает отключить HSTS.
## http_connection_timeout {#http_connection_timeout}

Тип: Seconds

Значение по умолчанию: 1

Тайм-аут соединения HTTP (в секундах).

Возможные значения:

- Любое положительное целое число.
- 0 - Отключено (неограниченный тайм-аут).
## http_headers_progress_interval_ms {#http_headers_progress_interval_ms}

Тип: UInt64

Значение по умолчанию: 100

Не отправлять HTTP заголовки X-ClickHouse-Progress чаще, чем через каждый указанный интервал.
## http_make_head_request {#http_make_head_request}

Тип: Bool

Значение по умолчанию: 1

Настройка `http_make_head_request` позволяет выполнять запрос `HEAD`, читая данные из HTTP для получения информации о файле, который нужно прочитать, например, его размер. Поскольку она включена по умолчанию, может быть желательным отключить эту настройку в случаях, когда сервер не поддерживает `HEAD` запросы.
## http_max_field_name_size {#http_max_field_name_size}

Тип: UInt64

Значение по умолчанию: 131072

Максимальная длина имени поля в HTTP заголовке.
## http_max_field_value_size {#http_max_field_value_size}

Тип: UInt64

Значение по умолчанию: 131072

Максимальная длина значения поля в HTTP заголовке.
## http_max_fields {#http_max_fields}

Тип: UInt64

Значение по умолчанию: 1000000

Максимальное количество полей в HTTP заголовке.
## http_max_multipart_form_data_size {#http_max_multipart_form_data_size}

Тип: UInt64

Значение по умолчанию: 1073741824

Ограничение размера содержимого multipart/form-data. Эта настройка не может быть проанализирована из параметров URL и должна быть установлена в профиле пользователя. Обратите внимание, что содержимое анализируется, и внешние таблицы создаются в памяти перед началом выполнения запроса. И это единственное ограничение, которое имеет эффект на этом этапе (ограничения на использование максимальной памяти и максимальное время выполнения не имеют эффекта при чтении HTTP формы данных).
## http_max_request_param_data_size {#http_max_request_param_data_size}

Тип: UInt64

Значение по умолчанию: 10485760

Ограничение на размер данных запроса, используемых в качестве параметра запроса в предопределенных HTTP запросах.
## http_max_tries {#http_max_tries}

Тип: UInt64

Значение по умолчанию: 10

Максимальное количество попыток чтения через http.
## http_max_uri_size {#http_max_uri_size}

Тип: UInt64

Значение по умолчанию: 1048576

Устанавливает максимальную длину URI HTTP запроса.

Возможные значения:

- Положительное целое число.
```
## http_native_compression_disable_checksumming_on_decompress {#http_native_compression_disable_checksumming_on_decompress}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает проверку контрольной суммы при декомпрессии данных HTTP POST от клиента. Используется только для формата сжатия ClickHouse (не используется с `gzip` или `deflate`).

Для получения дополнительной информации читайте [описание HTTP интерфейса](../../interfaces/http.md).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

## http_receive_timeout {#http_receive_timeout}

Тип: Секунды

Значение по умолчанию: 30

Тайм-аут получения HTTP (в секундах).

Возможные значения:

- Любое положительное целое число.
- 0 - Отключено (бессрочный тайм-аут).

## http_response_buffer_size {#http_response_buffer_size}

Тип: UInt64

Значение по умолчанию: 0

Количество байт, которые нужно буферизовать в памяти сервера, прежде чем отправить HTTP ответ клиенту или сбросить данные на диск (когда http_wait_end_of_query включен).

## http_response_headers {#http_response_headers}

Тип: Map

Значение по умолчанию: {}

Позволяет добавлять или переопределять HTTP заголовки, которые сервер вернет в ответе с успешным результатом запроса. Это затрагивает только HTTP интерфейс.

Если заголовок уже установлен по умолчанию, предоставленное значение его переопределит. Если заголовок не был установлен по умолчанию, он будет добавлен в список заголовков. Заголовки, которые устанавливаются сервером по умолчанию и не переопределяются этой настройкой, останутся.

Настройка позволяет установить заголовок на постоянное значение. В настоящее время нет способа установить заголовок на динамически рассчитанное значение.

Ни имена, ни значения не могут содержать управляющие символы ASCII.

Если вы реализуете UI-приложение, которое позволяет пользователям изменять настройки, но в то же время принимает решения на основе возвращаемых заголовков, рекомендуется ограничить эту настройку до только чтения.

Пример: `SET http_response_headers = '{"Content-Type": "image/png"}'`

## http_retry_initial_backoff_ms {#http_retry_initial_backoff_ms}

Тип: UInt64

Значение по умолчанию: 100

Минуты миллисекунд для таймаута при повторной попытке чтения через HTTP.

## http_retry_max_backoff_ms {#http_retry_max_backoff_ms}

Тип: UInt64

Значение по умолчанию: 10000

Максимальные миллисекунды для таймаута при повторной попытке чтения через HTTP.

## http_send_timeout {#http_send_timeout}

Тип: Секунды

Значение по умолчанию: 30

Тайм-аут отправки HTTP (в секундах).

Возможные значения:

- Любое положительное целое число.
- 0 - Отключено (бессрочный тайм-аут).

:::note
Это применимо только к профилю по умолчанию. Для применения изменений требуется перезагрузка сервера.
:::

## http_skip_not_found_url_for_globs {#http_skip_not_found_url_for_globs}

Тип: Bool

Значение по умолчанию: 1

Пропускает URL для шаблонов с ошибкой HTTP_NOT_FOUND.

## http_wait_end_of_query {#http_wait_end_of_query}

Тип: Bool

Значение по умолчанию: 0

Включает буферизацию HTTP ответов на стороне сервера.

## http_write_exception_in_output_format {#http_write_exception_in_output_format}

Тип: Bool

Значение по умолчанию: 1

Записывает исключение в выходной формат, чтобы произвести корректный вывод. Работает с форматами JSON и XML.

## http_zlib_compression_level {#http_zlib_compression_level}

Тип: Int64

Значение по умолчанию: 3

Устанавливает уровень сжатия данных в ответе на HTTP запрос, если [enable_http_compression = 1](#enable_http_compression).

Возможные значения: числа от 1 до 9.

## iceberg_snapshot_id {#iceberg_snapshot_id}

Тип: Int64

Значение по умолчанию: 0

Запрос таблицы Iceberg, используя конкретный идентификатор снимка.

## iceberg_timestamp_ms {#iceberg_timestamp_ms}

Тип: Int64

Значение по умолчанию: 0

Запрос таблицы Iceberg, используя снимок, который был актуален на определенный момент времени.

## idle_connection_timeout {#idle_connection_timeout}

Тип: UInt64

Значение по умолчанию: 3600

Тайм-аут для закрытия неактивных TCP-соединений после указанного числа секунд.

Возможные значения:

- Положительное целое число (0 - закрыть немедленно, через 0 секунд).

## ignore_cold_parts_seconds {#ignore_cold_parts_seconds}

<CloudAvailableBadge/>

Тип: Int64

Значение по умолчанию: 0

Действует только в ClickHouse Cloud. Исключает новые части данных из запросов SELECT до тех пор, пока они не будут предварительно подогреты (см. [cache_populated_by_fetch](merge-tree-settings.md/#cache_populated_by_fetch)) или не станут старше на указанное количество секунд. Только для Replicated-/SharedMergeTree.

## ignore_data_skipping_indices {#ignore_data_skipping_indices}

Тип: String

Значение по умолчанию: 

Игнорирует указанные индексы пропуска, если они используются в запросе.

Рассмотрим следующий пример:

```sql
CREATE TABLE data
(
    key Int,
    x Int,
    y Int,
    INDEX x_idx x TYPE minmax GRANULARITY 1,
    INDEX y_idx y TYPE minmax GRANULARITY 1,
    INDEX xy_idx (x,y) TYPE minmax GRANULARITY 1
)
Engine=MergeTree()
ORDER BY key;

INSERT INTO data VALUES (1, 2, 3);

SELECT * FROM data;
SELECT * FROM data SETTINGS ignore_data_skipping_indices=''; -- запрос вызовет ошибку CANNOT_PARSE_TEXT.
SELECT * FROM data SETTINGS ignore_data_skipping_indices='x_idx'; -- Ок.
SELECT * FROM data SETTINGS ignore_data_skipping_indices='na_idx'; -- Ок.

SELECT * FROM data WHERE x = 1 AND y = 1 SETTINGS ignore_data_skipping_indices='xy_idx',force_data_skipping_indices='xy_idx' ; -- запрос вызовет ошибку INDEX_NOT_USED, так как xy_idx явно игнорируется.
SELECT * FROM data WHERE x = 1 AND y = 2 SETTINGS ignore_data_skipping_indices='xy_idx';
```

Запрос без игнорирования каких-либо индексов:
```sql
EXPLAIN indexes = 1 SELECT * FROM data WHERE x = 1 AND y = 2;

Expression ((Projection + Before ORDER BY))
  Filter (WHERE)
    ReadFromMergeTree (default.data)
    Indexes:
      PrimaryKey
        Condition: true
        Parts: 1/1
        Granules: 1/1
      Skip
        Name: x_idx
        Description: minmax GRANULARITY 1
        Parts: 0/1
        Granules: 0/1
      Skip
        Name: y_idx
        Description: minmax GRANULARITY 1
        Parts: 0/0
        Granules: 0/0
      Skip
        Name: xy_idx
        Description: minmax GRANULARITY 1
        Parts: 0/0
        Granules: 0/0
```

Игнорируя индекс `xy_idx`:
```sql
EXPLAIN indexes = 1 SELECT * FROM data WHERE x = 1 AND y = 2 SETTINGS ignore_data_skipping_indices='xy_idx';

Expression ((Projection + Before ORDER BY))
  Filter (WHERE)
    ReadFromMergeTree (default.data)
    Indexes:
      PrimaryKey
        Condition: true
        Parts: 1/1
        Granules: 1/1
      Skip
        Name: x_idx
        Description: minmax GRANULARITY 1
        Parts: 0/1
        Granules: 0/1
      Skip
        Name: y_idx
        Description: minmax GRANULARITY 1
        Parts: 0/0
        Granules: 0/0
```

Работает с таблицами из семейства MergeTree.

## ignore_drop_queries_probability {#ignore_drop_queries_probability}

Тип: Float

Значение по умолчанию: 0

Если включено, сервер будет игнорировать все запросы DROP table с указанной вероятностью (для Memory и JOIN движков будет заменено DROP на TRUNCATE). Используется в тестовых целях.

## ignore_materialized_views_with_dropped_target_table {#ignore_materialized_views_with_dropped_target_table}

Тип: Bool

Значение по умолчанию: 0

Игнорировать MVs с удаленной целевой таблицей при публикации в представления.

## ignore_on_cluster_for_replicated_access_entities_queries {#ignore_on_cluster_for_replicated_access_entities_queries}

Тип: Bool

Значение по умолчанию: 0

Игнорировать ON CLUSTER клаузу для запросов управления реплицируемыми сущностями доступа.

## ignore_on_cluster_for_replicated_named_collections_queries {#ignore_on_cluster_for_replicated_named_collections_queries}

Тип: Bool

Значение по умолчанию: 0

Игнорировать ON CLUSTER клаузу для запросов управления реплицируемыми именованными коллекциями.

## ignore_on_cluster_for_replicated_udf_queries {#ignore_on_cluster_for_replicated_udf_queries}

Тип: Bool

Значение по умолчанию: 0

Игнорировать ON CLUSTER клаузу для запросов управления реплицируемыми UDF.

## implicit_select {#implicit_select}

Тип: Bool

Значение по умолчанию: 0

Разрешает запись простых SELECT запросов без ключевого слова SELECT, что упрощает использование в калькуляторном стиле, например, `1 + 2` становится действительным запросом.

В `clickhouse-local` это включено по умолчанию и может быть явно отключено.

## implicit_transaction {#implicit_transaction}
<ExperimentalBadge/>

Тип: Bool

Значение по умолчанию: 0

Если включено и не внутри транзакции, обертывает запрос в полную транзакцию (начало + коммит или откат).

## input_format_parallel_parsing {#input_format_parallel_parsing}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает параллельный разбор форматов данных с сохранением порядка. Поддерживается только для [TSV](../../interfaces/formats.md/#tabseparated), [TSKV](../../interfaces/formats.md/#tskv), [CSV](../../interfaces/formats.md/#csv) и [JSONEachRow](../../interfaces/formats.md/#jsoneachrow) форматов.

Возможные значения:

- 1 — Включено.
- 0 — Отключено.

## insert_allow_materialized_columns {#insert_allow_materialized_columns}

Тип: Bool

Значение по умолчанию: 0

Если настройка включена, разрешает использование материализованных колонок в INSERT.

## insert_deduplicate {#insert_deduplicate}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает дедупликацию блоков `INSERT` (для Replicated* таблиц).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

По умолчанию блоки, вставляемые в реплицируемые таблицы с помощью оператора `INSERT`, подвергаются дедупликации (см. [Репликация данных](../../engines/table-engines/mergetree-family/replication.md)). Для реплицируемых таблиц по умолчанию дедупликуются только 100 самых недавних блоков для каждой партиции (см. [replicated_deduplication_window](merge-tree-settings.md/#replicated-deduplication-window), [replicated_deduplication_window_seconds](merge-tree-settings.md/#replicated-deduplication-window-seconds)). Для не реплицируемых таблиц см. [non_replicated_deduplication_window](merge-tree-settings.md/#non-replicated-deduplication-window).

## insert_deduplication_token {#insert_deduplication_token}

Тип: String

Значение по умолчанию: 

Настройка позволяет пользователю предоставить свою семантику дедупликации в MergeTree/ReplicatedMergeTree. Например, предоставляя уникальное значение для настройки в каждом операторе INSERT, пользователь может избежать дедупликации одних и тех же вставленных данных.

Возможные значения:

- Любая строка

`insert_deduplication_token` используется для дедупликации _только_ при ненулевом значении.

Для реплицируемых таблиц по умолчанию дедупликуются только 100 самых недавних вставок для каждой партиции (см. [replicated_deduplication_window](merge-tree-settings.md/#replicated-deduplication-window), [replicated_deduplication_window_seconds](merge-tree-settings.md/#replicated-deduplication-window-seconds)). Для не реплицируемых таблиц см. [non_replicated_deduplication_window](merge-tree-settings.md/#non-replicated-deduplication-window).

:::note
`insert_deduplication_token` работает на уровне партиции (так же, как и контрольная сумма `insert_deduplication`). Несколько партиций могут иметь одинаковый `insert_deduplication_token`.
:::

Пример:

```sql
CREATE TABLE test_table
( A Int64 )
ENGINE = MergeTree
ORDER BY A
SETTINGS non_replicated_deduplication_window = 100;

INSERT INTO test_table SETTINGS insert_deduplication_token = 'test' VALUES (1);

-- следующая вставка не будет дедуплицирована, так как insert_deduplication_token отличается
INSERT INTO test_table SETTINGS insert_deduplication_token = 'test1' VALUES (1);

-- следующая вставка будет дедуплицирована, так как insert_deduplication_token
-- совпадает с одним из предыдущих
INSERT INTO test_table SETTINGS insert_deduplication_token = 'test' VALUES (2);

SELECT * FROM test_table

┌─A─┐
│ 1 │
└───┘
┌─A─┐
│ 1 │
└───┘
```

## insert_keeper_fault_injection_probability {#insert_keeper_fault_injection_probability}

Тип: Float

Значение по умолчанию: 0

Приблизительная вероятность сбоя запроса к Keeper во время вставки. Допустимое значение находится в диапазоне [0.0f, 1.0f].

## insert_keeper_fault_injection_seed {#insert_keeper_fault_injection_seed}

Тип: UInt64

Значение по умолчанию: 0

0 - случайное семя, в противном случае значение настройки.

## insert_keeper_max_retries {#insert_keeper_max_retries}

Тип: UInt64

Значение по умолчанию: 20

Настройка устанавливает максимальное количество повторов для запросов ClickHouse Keeper (или ZooKeeper) во время вставки в реплицированный MergeTree. Учитываются только запросы Keeper, которые потерпели неудачу из-за сетевой ошибки, тайм-аута сессии Keeper или тайм-аута запроса.

Возможные значения:

- Положительное целое число.
- 0 — Повторы отключены.

Значение по умолчанию в облаке: `20`.

Повторы запросов Keeper происходят после некоторого тайм-аута. Тайм-аут контролируется следующими настройками: `insert_keeper_retry_initial_backoff_ms`, `insert_keeper_retry_max_backoff_ms`. Первый повтор осуществляется после тайм-аута `insert_keeper_retry_initial_backoff_ms`. Последующие тайм-ауты вычисляются следующим образом:
```
timeout = min(insert_keeper_retry_max_backoff_ms, latest_timeout * 2)
```

Например, если `insert_keeper_retry_initial_backoff_ms=100`, `insert_keeper_retry_max_backoff_ms=10000` и `insert_keeper_max_retries=8`, тогда тайм-ауты будут составлять `100, 200, 400, 800, 1600, 3200, 6400, 10000`.

Кроме отказоустойчивости, повторы направлены на улучшение пользовательского опыта - они позволяют избежать возвращения ошибки при выполнении INSERT, если Keeper перезапускается, например, из-за обновления.

## insert_keeper_retry_initial_backoff_ms {#insert_keeper_retry_initial_backoff_ms}

Тип: UInt64

Значение по умолчанию: 100

Начальный тайм-аут (в миллисекундах) для повторной попытки неудачного запроса Keeper во время выполнения запроса INSERT.

Возможные значения:

- Положительное целое число.
- 0 — Без тайм-аута.

## insert_keeper_retry_max_backoff_ms {#insert_keeper_retry_max_backoff_ms}

Тип: UInt64

Значение по умолчанию: 10000

Максимальный тайм-аут (в миллисекундах) для повторной попытки неудачного запроса Keeper во время выполнения запроса INSERT.

Возможные значения:

- Положительное целое число.
- 0 — Максимальный тайм-аут не ограничен.

## insert_null_as_default {#insert_null_as_default}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает вставку [значений по умолчанию](/sql-reference/statements/create/table#default_values) вместо [NULL](/sql-reference/syntax#null) в колонки с не [nullable](/sql-reference/data-types/nullable) типом данных. Если тип колонки не допускает NULL, а эта настройка отключена, то вставка `NULL` вызывает исключение. Если тип колонки допускает NULL, то значения NULL вставляются как есть, независимо от этой настройки.

Эта настройка применяется к запросам [INSERT ... SELECT](../../sql-reference/statements/insert-into.md/#inserting-the-results-of-select). Обратите внимание, что подзапросы `SELECT` могут быть объединены с оператором `UNION ALL`.

Возможные значения:

- 0 — Вставка `NULL` в не допускаемую NULL колонку вызывает исключение.
- 1 — Вместо `NULL` вставляется значение по умолчанию колонки.

## insert_quorum {#insert_quorum}

Тип: UInt64Auto

Значение по умолчанию: 0

:::note
Эта настройка не применима к SharedMergeTree, смотрите [Консистентность SharedMergeTree](/cloud/reference/shared-merge-tree#consistency) для получения дополнительной информации.
:::

Включает записи с кворумом.

- Если `insert_quorum < 2`, записи с кворумом отключены.
- Если `insert_quorum >= 2`, записи с кворумом включены.
- Если `insert_quorum = 'auto'`, используйте численность большинства (`number_of_replicas / 2 + 1`) в качестве числа для кворума.

Записи с кворумом

`INSERT` успешно выполняется только тогда, когда ClickHouse смог корректно записать данные в `insert_quorum` реплик в течение `insert_quorum_timeout`. Если по какой-либо причине количество реплик с успешными записями не достигает `insert_quorum`, запись считается неудачной, и ClickHouse удалит вставленный блок из всех реплик, куда данные уже были записаны.

Когда `insert_quorum_parallel` отключен, все реплики в кворуме согласованы, т.е. они содержат данные от всех предыдущих `INSERT` запросов (последовательность `INSERT` линейно упорядочена). При чтении данных, записанных с использованием `insert_quorum`, и `insert_quorum_parallel` отключен, вы можете включить последовательную согласованность для запросов `SELECT`, используя [select_sequential_consistency](#select_sequential_consistency).

ClickHouse генерирует исключение:

- Если количество доступных реплик на момент запроса меньше `insert_quorum`.
- Когда `insert_quorum_parallel` отключен и делается попытка записи данных в тот момент, когда предыдущий блок еще не был вставлен в `insert_quorum` реплик. Эта ситуация может возникнуть, если пользователь пытается выполнить еще один запрос `INSERT` в ту же таблицу до завершения предыдущего с `insert_quorum`.

Смотрите также:

- [insert_quorum_timeout](#insert_quorum_timeout)
- [insert_quorum_parallel](#insert_quorum_parallel)
- [select_sequential_consistency](#select_sequential_consistency)

## insert_quorum_parallel {#insert_quorum_parallel}

Тип: Bool

Значение по умолчанию: 1

:::note
Эта настройка не применима к SharedMergeTree, смотрите [Консистентность SharedMergeTree](/cloud/reference/shared-merge-tree#consistency) для получения дополнительной информации.
:::

Включает или отключает параллелизм для запросов `INSERT` с кворумом. Если включено, дополнительные запросы `INSERT` могут быть отправлены, пока предыдущие запросы еще не завершены. Если отключено, дополнительные записи в ту же таблицу будут отклонены.

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

Смотрите также:

- [insert_quorum](#insert_quorum)
- [insert_quorum_timeout](#insert_quorum_timeout)
- [select_sequential_consistency](#select_sequential_consistency)

## insert_quorum_timeout {#insert_quorum_timeout}

Тип: Миллисекунды

Значение по умолчанию: 600000

Запись с кворумом тайм-аут в миллисекундах. Если тайм-аут истек, и запись еще не произошла, ClickHouse сгенерирует исключение, и клиент должен повторить запрос, чтобы записать один и тот же блок в ту же или любую другую реплику.

Смотрите также:

- [insert_quorum](#insert_quorum)
- [insert_quorum_parallel](#insert_quorum_parallel)
- [select_sequential_consistency](#select_sequential_consistency)

## insert_shard_id {#insert_shard_id}

Тип: UInt64

Значение по умолчанию: 0

Если не `0`, указывает шард [Distributed](/engines/table-engines/special/distributed) таблицы, в который данные будут вставлены синхронно.

Если значение `insert_shard_id` некорректно, сервер выдаст исключение.

Чтобы получить количество шардов в `requested_cluster`, вы можете проверить конфигурацию сервера или использовать следующий запрос:

```sql
SELECT uniq(shard_num) FROM system.clusters WHERE cluster = 'requested_cluster';
```

Возможные значения:

- 0 — Отключено.
- Любое число от `1` до `shards_num` соответствующей [Distributed](/engines/table-engines/special/distributed) таблицы.

**Пример**

Запрос:

```sql
CREATE TABLE x AS system.numbers ENGINE = MergeTree ORDER BY number;
CREATE TABLE x_dist AS x ENGINE = Distributed('test_cluster_two_shards_localhost', currentDatabase(), x);
INSERT INTO x_dist SELECT * FROM numbers(5) SETTINGS insert_shard_id = 1;
SELECT * FROM x_dist ORDER BY number ASC;
```

Результат:

```text
┌─number─┐
│      0 │
│      0 │
│      1 │
│      1 │
│      2 │
│      2 │
│      3 │
│      3 │
│      4 │
│      4 │
└────────┘
```

## interactive_delay {#interactive_delay}

Тип: UInt64

Значение по умолчанию: 100000

Интервал в микросекундах для проверки того, был ли отменен запрос, и отправки прогресса.

## intersect_default_mode {#intersect_default_mode}

Тип: SetOperationMode

Значение по умолчанию: ALL

Устанавливает режим по умолчанию в запросе INTERSECT. Возможные значения: пустая строка, 'ALL', 'DISTINCT'. Если пусто, запрос без режима вызовет исключение.

## join_algorithm {#join_algorithm}

Тип: JoinAlgorithm

Значение по умолчанию: direct,parallel_hash,hash

Указывает, какой алгоритм [JOIN](../../sql-reference/statements/select/join.md) используется.

Можно указать несколько алгоритмов, и доступный из них будет выбран для конкретного запроса в зависимости от типа/строгости и движка таблицы.

Возможные значения:

- grace_hash

 Используется [Grace hash join](https://en.wikipedia.org/wiki/Hash_join#Grace_hash_join). Grace hash предоставляет опцию алгоритма, которая обеспечивает производительные комплексные соединения, ограничивая использование памяти.

 Первая фаза grace соединения считывает правую таблицу и разбивает ее на N ведер в зависимости от значения хеша ключевых колонок (по умолчанию N равно `grace_hash_join_initial_buckets`). Это делается таким образом, чтобы каждое ведро можно было обрабатывать независимо. Строки из первого ведра добавляются в хеш-таблицу в памяти, в то время как остальные сохраняются на диске. Если хеш-таблица превышает предел памяти (например, как указано в [`max_bytes_in_join`](/operations/settings/settings#max_bytes_in_join)), увеличивается количество ведер и переназначается ведро для каждой строки. Любые строки, которые не принадлежат текущему ведру, сбрасываются и переназначаются.

 Поддерживает `INNER/LEFT/RIGHT/FULL ALL/ANY JOIN`.

- hash

 Используется [Hash join algorithm](https://en.wikipedia.org/wiki/Hash_join). Наиболее общая реализация, поддерживающая все комбинации типа и строгости и несколько ключей соединения, которые комбинируются с `OR` в разделе `JOIN ON`.

 При использовании алгоритма `hash` правая часть `JOIN` загружается в ОЗУ.

- parallel_hash

 Вариант алгоритма `hash`, который разделяет данные на ведра и строит несколько хеш-таблиц одновременно, чтобы ускорить этот процесс.

 При использовании алгоритма `parallel_hash` правая часть `JOIN` загружается в ОЗУ.

- partial_merge

 Вариант [sort-merge algorithm](https://en.wikipedia.org/wiki/Sort-merge_join), при котором только правая таблица полностью сортируется.

 `RIGHT JOIN` и `FULL JOIN` поддерживаются только с `ALL` строгостью (`SEMI`, `ANTI`, `ANY` и `ASOF` не поддерживаются).

 При использовании алгоритма `partial_merge` ClickHouse сортирует данные и сбрасывает их на диск. Алгоритм `partial_merge` в ClickHouse несколько отличается от классической реализации. Сначала ClickHouse сортирует правую таблицу по ключам соединения в блоках и создает мин-макс индекс для отсортированных блоков. Затем сортирует части левой таблицы по `join key` и соединяет их с правой таблицей. Мин-макс индекс также используется для пропуска ненужных блоков правой таблицы.

- direct

 Этот алгоритм может быть применен, когда хранилище для правой таблицы поддерживает запросы с ключ-значение.

 Алгоритм `direct` выполняет поиск в правой таблице с использованием строк из левой таблицы в качестве ключей. Он поддерживается только специальными хранилищами, такими как [Dictionary](/engines/table-engines/special/dictionary) или [EmbeddedRocksDB](../../engines/table-engines/integrations/embedded-rocksdb.md) и только `LEFT` и `INNER` JOIN.

- auto

 Когда установлено значение `auto`, сначала пытается выполнить `hash` соединение, и алгоритм переключается на другой алгоритм во время выполнения, если превышен предел памяти.

- full_sorting_merge

 [Sort-merge algorithm](https://en.wikipedia.org/wiki/Sort-merge_join) с полной сортировкой присоединенных таблиц перед объединением.

- prefer_partial_merge

 ClickHouse всегда пытается использовать `partial_merge` соединение, если это возможно, в противном случае использует `hash`. *Устарело*, так же как `partial_merge,hash`.

- default (устарело)

 Устаревшее значение, не используйте больше.
 То же самое, что `direct,hash`, т.е. пытаться сначала использовать прямое соединение, затем хеш соединение (в этом порядке).

## join_any_take_last_row {#join_any_take_last_row}

Тип: Bool

Значение по умолчанию: 0

Изменяет поведение операций соединения с `ANY` строгостью.

:::note
Эта настройка применяется только для операций `JOIN` с таблицами движка [Join](../../engines/table-engines/special/join.md).
:::

Возможные значения:

- 0 — Если правая таблица содержит более одной совпадающей строки, соединяется только первая найденная.
- 1 — Если правая таблица содержит более одной совпадающей строки, соединяется только последняя найденная.

Смотрите также:

- [JOIN clause](/sql-reference/statements/select/join)
- [Join table engine](../../engines/table-engines/special/join.md)
- [join_default_strictness](#join_default_strictness)

## join_default_strictness {#join_default_strictness}

Тип: JoinStrictness

Значение по умолчанию: ALL

Устанавливает строгость по умолчанию для [JOIN клауз]( /sql-reference/statements/select/join).

Возможные значения:

- `ALL` — Если правая таблица имеет несколько совпадающих строк, ClickHouse создает [Декартово произведение](https://en.wikipedia.org/wiki/Cartesian_product) из совпадающих строк. Это нормальное поведение `JOIN` из стандартного SQL.
- `ANY` — Если правая таблица имеет несколько совпадающих строк, соединяется только первая найденная. Если правая таблица содержит только одну совпадающую строку, результаты `ANY` и `ALL` будут одинаковыми.
- `ASOF` — Для соединения последовательностей с неопределенным совпадением.
- `Пустая строка` — Если `ALL` или `ANY` не указаны в запросе, ClickHouse выдает исключение.

## join_on_disk_max_files_to_merge {#join_on_disk_max_files_to_merge}

Тип: UInt64

Значение по умолчанию: 64

Ограничивает количество файлов, разрешенных для параллельной сортировки в MergeJoin операциях, когда они выполняются на диске.

Чем больше значение настройки, тем больше ОЗУ используется и меньше ввод-вывод диска требуется.

Возможные значения:

- Любое положительное целое число, начиная с 2.

## join_output_by_rowlist_perkey_rows_threshold {#join_output_by_rowlist_perkey_rows_threshold}

Тип: UInt64

Значение по умолчанию: 5

Нижний предел для среднего количества строк по ключу в правой таблице для определения, следует ли выводить по списку строк в хеш-соединении.

## join_overflow_mode {#join_overflow_mode}

Тип: OverflowMode

Значение по умолчанию: throw

Определяет, какое действие выполняет ClickHouse, когда достигнут любой из следующих пределов соединения:

- [max_bytes_in_join](/operations/settings/settings#max_bytes_in_join)
- [max_rows_in_join](/operations/settings/settings#max_rows_in_join)

Возможные значения:

- `THROW` — ClickHouse вызывает исключение и прерывает операцию.
- `BREAK` — ClickHouse прерывает операцию и не вызывает исключение.

Значение по умолчанию: `THROW`.

**См. также**

- [JOIN clause](/sql-reference/statements/select/join)
- [Join table engine](/engines/table-engines/special/join)

## join_to_sort_maximum_table_rows {#join_to_sort_maximum_table_rows}
<ExperimentalBadge/>

Тип: UInt64

Значение по умолчанию: 10000

Максимальное количество строк в правой таблице для определения, следует ли переупорядочивать правую таблицу по ключу в левом или внутреннем соединении.

## join_to_sort_minimum_perkey_rows {#join_to_sort_minimum_perkey_rows}
<ExperimentalBadge/>

Тип: UInt64

Значение по умолчанию: 40

Нижний предел для среднего количества строк по ключу в правой таблице для определения, следует ли переупорядочивать правую таблицу по ключу в левом или внутреннем соединении. Эта настройка обеспечивает, что оптимизация не применяется для разреженных ключей таблицы.

## join_use_nulls {#join_use_nulls}

Тип: Bool

Значение по умолчанию: 0

Устанавливает тип поведения [JOIN](../../sql-reference/statements/select/join.md). При объединении таблиц могут появляться пустые ячейки. ClickHouse заполняет их по-разному в зависимости от этой настройки.

Возможные значения:

- 0 — Пустые ячейки заполняются значением по умолчанию для соответствующего типа поля.
- 1 — `JOIN` ведет себя так же, как в стандартном SQL. Тип соответствующего поля преобразуется в [Nullable](/sql-reference/data-types/nullable), и пустые ячейки заполняются [NULL](/sql-reference/syntax).

## joined_subquery_requires_alias {#joined_subquery_requires_alias}

Тип: Bool

Значение по умолчанию: 1

Принудительно требует у объединенных подзапросов и табличных функций наличие алиасов для корректной квалификации имен.

## kafka_disable_num_consumers_limit {#kafka_disable_num_consumers_limit}

Тип: Bool

Значение по умолчанию: 0

Отключить лимит на kafka_num_consumers, который зависит от числа доступных CPU ядер.

## kafka_max_wait_ms {#kafka_max_wait_ms}

Тип: Миллисекунды

Значение по умолчанию: 5000

Время ожидания в миллисекундах для чтения сообщений из [Kafka](/engines/table-engines/integrations/kafka) перед повторной попыткой.

Возможные значения:

- Положительное целое число.
- 0 — Бессрочный тайм-аут.

Смотрите также:

- [Apache Kafka](https://kafka.apache.org/)

## keeper_map_strict_mode {#keeper_map_strict_mode}

Тип: Bool

Значение по умолчанию: 0

Ужесточает проверки во время операций с KeeperMap. Например, вызывает исключение при вставке для уже существующего ключа.

## keeper_max_retries {#keeper_max_retries}

Тип: UInt64

Значение по умолчанию: 10

Максимальные попытки для общих операций Keeper.

## keeper_retry_initial_backoff_ms {#keeper_retry_initial_backoff_ms}

Тип: UInt64

Значение по умолчанию: 100

Начальный тайм-аут между попытками для общих операций Keeper.

## keeper_retry_max_backoff_ms {#keeper_retry_max_backoff_ms}

Тип: UInt64

Значение по умолчанию: 5000

Максимальный тайм-аут между попытками для общих операций Keeper.

## least_greatest_legacy_null_behavior {#least_greatest_legacy_null_behavior}

Тип: Bool

Значение по умолчанию: 0

Если включено, функции 'least' и 'greatest' возвращают NULL, если один из их аргументов равен NULL.

## legacy_column_name_of_tuple_literal {#legacy_column_name_of_tuple_literal}

Тип: Bool

Значение по умолчанию: 0

Список всех имен элементов крупных литералов кортежей в их именах колонок вместо хеша. Эта настройка существует только по причинам совместимости. Уместно установить значение 'true', когда происходит пошаговое обновление кластера с версии ниже 21.7 на более высокую.

## lightweight_deletes_sync {#lightweight_deletes_sync}

Тип: UInt64

Значение по умолчанию: 2

То же самое, что и [`mutations_sync`](#mutations_sync), но контролирует только выполнение легковесных удалений.

Возможные значения:

- 0 - Мутации выполняются асинхронно.
- 1 - Запрос ожидает завершения легковесных удалений на текущем сервере.
- 2 - Запрос ожидает завершения легковесных удалений на всех репликах (если они существуют).

**См. также**

- [Синхронность ALTER Запросов](../../sql-reference/statements/alter/index.md/#synchronicity-of-alter-queries)
- [Мутации](../../sql-reference/statements/alter/index.md/#mutations)

## limit {#limit}

Тип: UInt64

Значение по умолчанию: 0

Устанавливает максимальное количество строк, которые можно получить из результата запроса. Он корректирует значение, установленное оператором [LIMIT](/sql-reference/statements/select/limit), так что лимит, указанный в запросе, не может превышать лимит, установленный этой настройкой.

Возможные значения:

- 0 — Количество строк не ограничено.
- Положительное целое число.

## live_view_heartbeat_interval {#live_view_heartbeat_interval}
<ExperimentalBadge/>

Тип: Секунды

Значение по умолчанию: 15

Интервал проверки работоспособности в секундах для определения живого запроса.
## контроль_нагрузки {#load_balancing}



Тип: LoadBalancing

Значение по умолчанию: random

Указывает алгоритм выбора реплик, который используется для обработки распределенных запросов.

ClickHouse поддерживает следующие алгоритмы выбора реплик:

- [Случайный](#load_balancing-random) (по умолчанию)
- [Ближайшее имя хоста](#load_balancing-nearest_hostname)
- [Расстояние Левенштейна по имени хоста](#load_balancing-hostname_levenshtein_distance)
- [В порядке](#load_balancing-in_order)
- [Первый или случайный](#load_balancing-first_or_random)
- [Круговая доставка](#load_balancing-round_robin)

Смотрите также:

- [distributed_replica_max_ignored_errors](#distributed_replica_max_ignored_errors)
### Случайный (по умолчанию) {#load_balancing-random}

```sql
load_balancing = random
```

Количество ошибок подсчитывается для каждой реплики. Запрос отправляется на реплику с наименьшим количеством ошибок, а если таких несколько, — на любую из них.  
Недостатки: Близость серверов не учитывается; если реплики имеют разные данные, вы также получите разные данные.
### Ближайшее имя хоста {#load_balancing-nearest_hostname}

```sql
load_balancing = nearest_hostname
```

Количество ошибок подсчитывается для каждой реплики. Каждые 5 минут количество ошибок интегрально делится на 2. Таким образом, количество ошибок рассчитывается за недавний период с экспоненциальным сглаживанием. Если есть одна реплика с минимальным количеством ошибок (то есть ошибки произошли недавно на других репликах), запрос отправляется на нее. Если несколько реплик имеют одинаковое минимальное количество ошибок, запрос отправляется на реплику с именем хоста, наиболее похожим на имя хоста сервера в конфигурационном файле (по количеству различных символов в идентичных позициях, до минимальной длины обоих имен хостов).

Например, example01-01-1 и example01-01-2 различаются в одной позиции, в то время как example01-01-1 и example01-02-2 отличаются в двух местах.  
Этот метод может показаться примитивным, но он не требует внешних данных о сетевой топологии и не сравнивает IP-адреса, что было бы сложно для наших IPv6 адресов.

Таким образом, если есть эквивалентные реплики, предпочтение отдается ближайшей по имени.  
Также можно предположить, что при отправке запроса на один и тот же сервер, при отсутствии сбоев, распределенный запрос также будет отправляться на те же серверы. Поэтому даже если на репликах размещены разные данные, запрос в основном вернет одинаковые результаты.
### Расстояние Левенштейна по имени хоста {#load_balancing-hostname_levenshtein_distance}

```sql
load_balancing = hostname_levenshtein_distance
```

Так же, как и `nearest_hostname`, но сравнивает имя хоста с точки зрения [расстояния Левенштейна](https://en.wikipedia.org/wiki/Levenshtein_distance). Например:

```text
example-clickhouse-0-0 ample-clickhouse-0-0
1

example-clickhouse-0-0 example-clickhouse-1-10
2

example-clickhouse-0-0 example-clickhouse-12-0
3
```
### В порядке {#load_balancing-in_order}

```sql
load_balancing = in_order
```

Реплики с одинаковым количеством ошибок обрабатываются в том порядке, в котором они указаны в конфигурации.  
Этот метод подходит, когда вы точно знаете, какая реплика предпочтительнее.
### Первый или случайный {#load_balancing-first_or_random}

```sql
load_balancing = first_or_random
```

Этот алгоритм выбирает первую реплику в наборе или случайную реплику, если первая недоступна. Он эффективен в настройках с перекрестной репликацией, но бесполезен в других конфигурациях.

Алгоритм `first_or_random` решает проблему алгоритма `in_order`. При `in_order`, если одна реплика выходит из строя, следующая получает двойную нагрузку, в то время как остальные реплики обрабатывают обычное количество трафика. При использовании алгоритма `first_or_random` нагрузка равномерно распределяется между доступными репликами.

Можно явно определить, какая реплика первая, с помощью настройки `load_balancing_first_offset`. Это дает больший контроль для перераспределения нагрузки запросов между репликами.
### Круговая доставка {#load_balancing-round_robin}

```sql
load_balancing = round_robin
```

Этот алгоритм использует политику круговой доставки среди реплик с одинаковым количеством ошибок (учитываются только запросы с политикой `round_robin`).
## load_balancing_first_offset {#load_balancing_first_offset}



Тип: UInt64

Значение по умолчанию: 0

На какую реплику предпочтительно отправляется запрос, когда используется стратегия балансировки нагрузки FIRST_OR_RANDOM.
## load_marks_asynchronously {#load_marks_asynchronously}



Тип: Bool

Значение по умолчанию: 0

Асинхронная загрузка меток MergeTree
## local_filesystem_read_method {#local_filesystem_read_method}



Тип: String

Значение по умолчанию: pread_threadpool

Метод чтения данных из локальной файловой системы, один из: read, pread, mmap, io_uring, pread_threadpool. Метод 'io_uring' является экспериментальным и не работает для Log, TinyLog, StripeLog, File, Set и Join, а также для других таблиц с добавляемыми файлами при наличии параллельных чтений и записей.
## local_filesystem_read_prefetch {#local_filesystem_read_prefetch}



Тип: Bool

Значение по умолчанию: 0

Следует ли использовать предварительную выборку при чтении данных из локальной файловой системы.
## lock_acquire_timeout {#lock_acquire_timeout}



Тип: Seconds

Значение по умолчанию: 120

Определяет, в течение какого количества секунд запрос на блокировку ждет, прежде чем завершится с ошибкой.

Таймаут блокировки используется для защиты от взаимных блокировок при выполнении операций чтения/записи с таблицами. Когда таймаут истекает и запрос на блокировку завершился с ошибкой, сервер ClickHouse выбрасывает исключение "Locking attempt timed out! Possible deadlock avoided. Client should retry." с кодом ошибки `DEADLOCK_AVOIDED`.

Возможные значения:

- Положительное целое число (в секундах).
- 0 — Без таймаута блокировки.
## log_comment {#log_comment}



Тип: String

Значение по умолчанию: 

Указывает значение для поля `log_comment` таблицы [system.query_log](../system-tables/query_log.md) и текст комментария для серверного лога.

Это может быть использовано для повышения читаемости серверных логов. Кроме того, это помогает выбрать запросы, связанные с тестом из `system.query_log` после запуска [clickhouse-test](../../development/tests.md).

Возможные значения:

- Любая строка длиной не более [max_query_size](#max_query_size). Если значение max_query_size превышено, сервер выбрасывает исключение.

**Пример**

Запрос:

```sql
SET log_comment = 'log_comment test', log_queries = 1;
SELECT 1;
SYSTEM FLUSH LOGS;
SELECT type, query FROM system.query_log WHERE log_comment = 'log_comment test' AND event_date >= yesterday() ORDER BY event_time DESC LIMIT 2;
```

Результат:

```text
┌─type────────┬─query─────┐
│ QueryStart  │ SELECT 1; │
│ QueryFinish │ SELECT 1; │
└─────────────┴───────────┘
```
## log_formatted_queries {#log_formatted_queries}



Тип: Bool

Значение по умолчанию: 0

Позволяет записывать отформатированные запросы в системную таблицу [system.query_log](../../operations/system-tables/query_log.md) (заполняет столбец `formatted_query` в [system.query_log](../../operations/system-tables/query_log.md)).

Возможные значения:

- 0 — Отформатированные запросы не записываются в системную таблицу.
- 1 — Отформатированные запросы записываются в системную таблицу.
## log_processors_profiles {#log_processors_profiles}



Тип: Bool

Значение по умолчанию: 1

Записывать время, которое процессор потратил на выполнение/ожидание данных в таблице `system.processors_profile_log`.

Смотрите также:

- [`system.processors_profile_log`](../../operations/system-tables/processors_profile_log.md)
- [`EXPLAIN PIPELINE`](../../sql-reference/statements/explain.md/#explain-pipeline)
## log_profile_events {#log_profile_events}



Тип: Bool

Значение по умолчанию: 1

Записывать статистику производительности запросов в query_log, query_thread_log и query_views_log.
## log_queries {#log_queries}



Тип: Bool

Значение по умолчанию: 1

Настройка логирования запросов.

Запросы, отправленные в ClickHouse с этой настройкой, регистрируются в соответствии с правилами параметра настройки сервера [query_log](../../operations/server-configuration-parameters/settings.md/#query_log).

Пример:

```text
log_queries=1
```
## log_queries_cut_to_length {#log_queries_cut_to_length}



Тип: UInt64

Значение по умолчанию: 100000

Если длина запроса больше указанного порога (в байтах), то уменьшить запрос при записи в журнал запросов. Также ограничивается длина печатаемого запроса в обычном текстовом логе.
## log_queries_min_query_duration_ms {#log_queries_min_query_duration_ms}



Тип: Milliseconds

Значение по умолчанию: 0

Если включен (не равно нулю), запросы, более быстрые, чем значение этой настройки, не будут записываться в лог (вы можете думать об этом как о `long_query_time` для [MySQL Slow Query Log](https://dev.mysql.com/doc/refman/5.7/slow-query-log.html)), и это будет означать, что вы не найдете их в следующих таблицах:

- `system.query_log`
- `system.query_thread_log`

Только запросы следующего типа будут попадать в лог:

- `QUERY_FINISH`
- `EXCEPTION_WHILE_PROCESSING`

- Тип: миллисекунды
- Значение по умолчанию: 0 (все запросы)
## log_queries_min_type {#log_queries_min_type}



Тип: LogQueriesType

Значение по умолчанию: QUERY_START

Минимальный тип `query_log` для логирования.

Возможные значения:
- `QUERY_START` (`=1`)
- `QUERY_FINISH` (`=2`)
- `EXCEPTION_BEFORE_START` (`=3`)
- `EXCEPTION_WHILE_PROCESSING` (`=4`)

Может быть использован для ограничения того, какие сущности будут попадать в `query_log`, например, если вас интересуют только ошибки, то вы можете использовать `EXCEPTION_WHILE_PROCESSING`:

```text
log_queries_min_type='EXCEPTION_WHILE_PROCESSING'
```
## log_queries_probability {#log_queries_probability}



Тип: Float

Значение по умолчанию: 1

Позволяет пользователю записывать в [query_log](../../operations/system-tables/query_log.md), [query_thread_log](../../operations/system-tables/query_thread_log.md) и [query_views_log](../../operations/system-tables/query_views_log.md) системные таблицы только выборку запросов, выбранных случайным образом с указанной вероятностью. Это помогает снизить нагрузку при большом объеме запросов в секунду.

Возможные значения:

- 0 — Запросы не записываются в системные таблицы.
- Положительное число с плавающей точкой в диапазоне [0..1]. Например, если значение этой настройки равно `0.5`, примерно половина запросов записывается в системные таблицы.
- 1 — Все запросы записываются в системные таблицы.
## log_query_settings {#log_query_settings}



Тип: Bool

Значение по умолчанию: 1

Записывать настройки запросов в query_log и журнал OpenTelemetry span.
## log_query_threads {#log_query_threads}



Тип: Bool

Значение по умолчанию: 0

Настройка логирования потоков запросов.

Потоки запросов записываются в таблицу [system.query_thread_log](../../operations/system-tables/query_thread_log.md). Эта настройка имеет эффект только когда [log_queries](#log_queries) истина. Потоки запросов, выполняемые ClickHouse с этой настройкой, регистрируются в соответствии с правилами параметра настройки сервера [query_thread_log](/operations/server-configuration-parameters/settings#query_thread_log).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

**Пример**

```text
log_query_threads=1
```
## log_query_views {#log_query_views}



Тип: Bool

Значение по умолчанию: 1

Настройка логирования представлений запросов.

Когда запрос, выполняемый ClickHouse с этой настройкой, имеет связанные представления (материализованные или live), они записываются в параметр конфигурации сервера [query_views_log](/operations/server-configuration-parameters/settings#query_views_log).

Пример:

```text
log_query_views=1
```
## low_cardinality_allow_in_native_format {#low_cardinality_allow_in_native_format}



Тип: Bool

Значение по умолчанию: 1

Разрешает или ограничивает использование типа данных [LowCardinality](../../sql-reference/data-types/lowcardinality.md) с форматом [Native](../../interfaces/formats.md/#native).

Если использование `LowCardinality` ограничено, сервер ClickHouse преобразует столбцы `LowCardinality` в обычные для запросов `SELECT`, а обычные столбцы преобразуются в столбцы `LowCardinality` для запросов `INSERT`.

Эта настройка необходима в основном для сторонних клиентов, которые не поддерживают тип данных `LowCardinality`.

Возможные значения:

- 1 — Использование `LowCardinality` не ограничено.
- 0 — Использование `LowCardinality` ограничено.
## low_cardinality_max_dictionary_size {#low_cardinality_max_dictionary_size}



Тип: UInt64

Значение по умолчанию: 8192

Устанавливает максимальный размер в строках общего глобального словаря для типа данных [LowCardinality](../../sql-reference/data-types/lowcardinality.md), который может быть записан в файловую систему хранения. Эта настройка предотвращает проблемы с ОЗУ в случае неограниченного роста словаря. Все данные, которые не могут быть закодированы из-за ограничения максимального размера словаря, ClickHouse записывает обычным образом.

Возможные значения:

- Любое положительное целое число.
## low_cardinality_use_single_dictionary_for_part {#low_cardinality_use_single_dictionary_for_part}



Тип: Bool

Значение по умолчанию: 0

Включает или отключает использование единственного словаря для части данных.

По умолчанию сервер ClickHouse следит за размером словарей, и если словарь переполняется, сервер начинает записывать следующий. Для запрета создания нескольких словарей установите `low_cardinality_use_single_dictionary_for_part = 1`.

Возможные значения:

- 1 — Запрещено создание нескольких словарей для части данных.
- 0 — Создание нескольких словарей для части данных не запрещено.
## low_priority_query_wait_time_ms {#low_priority_query_wait_time_ms}
<BetaBadge/>

Тип: Milliseconds

Значение по умолчанию: 1000

Время ожидания в миллисекундах, когда запрос с низким приоритетом сталкивается с запросом более высокого приоритета.
## materialize_skip_indexes_on_insert {#materialize_skip_indexes_on_insert}



Тип: Bool

Значение по умолчанию: 1

Если INSERT'ы создают и хранят индексы пропуска. Если отключено, индексы пропуска будут создаваться и храниться во время слияний или с помощью явного MATERIALIZE INDEX
## materialize_statistics_on_insert {#materialize_statistics_on_insert}



Тип: Bool

Значение по умолчанию: 1

Если INSERT'ы создают и вставляют статистику. Если отключено, статистика будет создаваться и храниться во время слияний или с помощью явного MATERIALIZE STATISTICS
## materialize_ttl_after_modify {#materialize_ttl_after_modify}



Тип: Bool

Значение по умолчанию: 1

Применять TTL для старых данных после выполнения запроса ALTER MODIFY TTL
## materialized_views_ignore_errors {#materialized_views_ignore_errors}



Тип: Bool

Значение по умолчанию: 0

Разрешает игнорировать ошибки для MATERIALIZED VIEW и передавать оригинальный блок в таблицу независимо от MVs
## max_analyze_depth {#max_analyze_depth}



Тип: UInt64

Значение по умолчанию: 5000

Максимальное количество анализов, выполняемых интерпретатором.
## max_ast_depth {#max_ast_depth}



Тип: UInt64

Значение по умолчанию: 1000

Максимальная вложенность синтаксического дерева запроса. Если превышено, выбрасывается исключение.

:::note
В настоящее время это не проверяется во время разбора, а только после разбора запроса.
Это означает, что слишком глубокое синтаксическое дерево может быть создано в процессе разбора,
но запрос завершится с ошибкой.
:::
## max_ast_elements {#max_ast_elements}



Тип: UInt64

Значение по умолчанию: 50000

Максимальное количество элементов в синтаксическом дереве запроса. Если превышено, выбрасывается исключение.

:::note
В настоящее время это не проверяется во время разбора, а только после разбора запроса.
Это означает, что слишком глубокое синтаксическое дерево может быть создано в процессе разбора,
но запрос завершится с ошибкой.
:::
## max_autoincrement_series {#max_autoincrement_series}



Тип: UInt64

Значение по умолчанию: 1000

Ограничение на количество серий, создаваемых функцией `generateSeriesID`.

Поскольку каждая серия представляет собой узел в Keeper, рекомендуется иметь не более нескольких миллионов из них.
## max_backup_bandwidth {#max_backup_bandwidth}



Тип: UInt64

Значение по умолчанию: 0

Максимальная скорость чтения в байтах в секунду для отдельного бэкапа на сервере. Ноль означает неограниченно.
## max_block_size {#max_block_size}



Тип: UInt64

Значение по умолчанию: 65409

В ClickHouse данные обрабатываются блоками, которые представляют собой наборы частей колонок. Внутренние циклы обработки для одного блока эффективны, но существуют заметные затраты на обработку каждого блока.

Настройка `max_block_size` указывает рекомендуемое максимальное количество строк, которые должны быть включены в один блок при загрузке данных из таблиц. Блоки размером `max_block_size` не всегда загружаются из таблицы: если ClickHouse определяет, что необходимо извлечь меньше данных, обрабатывается меньший блок.

Размер блока не должен быть слишком малым, чтобы избежать значительных затрат на обработку каждого блока. Он также не должен быть слишком большим, чтобы гарантировать быструю обработку запросов с условием LIMIT после обработки первого блока. При установке `max_block_size` следует стремиться избежать чрезмерного потребления памяти при извлечении большого количества столбцов в нескольких потоках и сохранить по крайней мере некоторую локальность кэша.
## max_bytes_before_external_group_by {#max_bytes_before_external_group_by}



Тип: UInt64

Значение по умолчанию: 0

Облачное значение по умолчанию: половина объема памяти на каждую реплику.

Включает или отключает выполнение клауз для `GROUP BY` в внешней памяти.  
(Смотрите [GROUP BY в внешней памяти](/sql-reference/statements/select/group-by#group-by-in-external-memory))

Возможные значения:

- Максимальный объем ОЗУ (в байтах), который может быть использован для одной операции [GROUP BY](/sql-reference/statements/select/group-by).
- `0` — `GROUP BY` во внешней памяти отключен.

:::note
Если использование памяти во время операций GROUP BY превышает этот порог в байтах,
активируется режим «внешней агрегации» (сброс данных на диск).

Рекомендуемое значение — половина доступной системной памяти.
:::
## max_bytes_before_external_sort {#max_bytes_before_external_sort}



Тип: UInt64

Значение по умолчанию: 0

Облачное значение по умолчанию: половина объема памяти на каждую реплику.

Включает или отключает выполнение клауз для `ORDER BY` во внешней памяти. Смотрите [Детали реализации ORDER BY](../../sql-reference/statements/select/order-by.md#implementation-details)  
Если использование памяти во время операции ORDER BY превышает этот порог в байтах, активируется режим «внешней сортировки» (сброс данных на диск).

Возможные значения:

- Максимальный объем ОЗУ (в байтах), который может быть использован для одной операции [ORDER BY](../../sql-reference/statements/select/order-by).
  Рекомендуемое значение — половина доступной системной памяти
- `0` — `ORDER BY` во внешней памяти отключен.
## max_bytes_before_remerge_sort {#max_bytes_before_remerge_sort}



Тип: UInt64

Значение по умолчанию: 1000000000

В случае ORDER BY с LIMIT, когда использование памяти превышает указанный порог, выполняются дополнительные шаги объединения блоков перед финальным слиянием, чтобы оставить только строки топ LIMIT.
## max_bytes_in_distinct {#max_bytes_in_distinct}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт состояния (в не сжатых байтах) в памяти, которое
используется хеш-таблицей при использовании DISTINCT.
## max_bytes_in_join {#max_bytes_in_join}



Тип: UInt64

Значение по умолчанию: 0

Максимальный размер в байтах хеш-таблицы, используемой при объединении таблиц.

Эта настройка применяется к операциям [SELECT ... JOIN](/sql-reference/statements/select/join)
и движку [Join](https://clickhouse.com/docs/en/engines/table-engines/special/join).

Если запрос содержит объединения, ClickHouse проверяет эту настройку для каждого промежуточного результата.

ClickHouse может выполнять различные действия, когда лимит достигнут. Используйте
настройки [join_overflow_mode](/operations/settings/settings#join_overflow_mode), чтобы выбрать действие.

Возможные значения:

- Положительное целое число.
- 0 — Контроль памяти отключен.
## max_bytes_in_set {#max_bytes_in_set}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт (не сжатых данных), используемое множеством в предложении IN,
созданном из подзапроса.
## max_bytes_ratio_before_external_group_by {#max_bytes_ratio_before_external_group_by}



Тип: Double

Значение по умолчанию: 0.5

Соотношение доступной памяти, которое разрешено для `GROUP BY`. Как только оно будет достигнуто,
внешняя память используется для агрегации.

Например, если установлено значение `0.6`, `GROUP BY` позволит использовать 60% доступной памяти
(для сервера/пользователя/слияний) в начале выполнения, после чего он
начнет использовать внешнюю агрегацию.
## max_bytes_ratio_before_external_sort {#max_bytes_ratio_before_external_sort}



Тип: Double

Значение по умолчанию: 0.5

Соотношение доступной памяти, которое разрешено для `ORDER BY`. Как только оно будет достигнуто,
используется внешняя сортировка.

Например, если установлено значение `0.6`, `ORDER BY` позволит использовать `60%` доступной памяти
(для сервера/пользователя/слияний) в начале выполнения, после чего
он начнет использовать внешнюю сортировку.
## max_bytes_to_read {#max_bytes_to_read}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт (не сжатых данных), которое можно прочитать из таблицы при выполнении запроса.
Ограничение проверяется для каждого обработанного блока данных, применяется только к
самому глубокому выражению таблицы и при чтении с удаленного сервера, проверяется только на
удаленном сервере.
## max_bytes_to_read_leaf {#max_bytes_to_read_leaf}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт (не сжатых данных), которое можно прочитать из локальной
таблицы на узле-листе при выполнении распределенного запроса. Хотя распределенные запросы
могут выдавать несколько подзапросов к каждой шарде (листву) — это ограничение будет
проверяться только на этапе чтения на листьях и будет игнорироваться на этапе
слияния результатов на корневом узле.

Например, кластер состоит из 2 шардов, и каждая шард содержит таблицу с
100 байт данных. Распределенный запрос, который должен прочитать все данные
из обеих таблиц с настройкой `max_bytes_to_read=150` завершится с ошибкой, так как в общем это
будет 200 байт. Запрос с `max_bytes_to_read_leaf=150` будет успешным, поскольку
лиственные узлы прочитают максимум 100 байт.

Ограничение проверяется для каждого обработанного блока данных.

:::note
Эта настройка нестабильна при `prefer_localhost_replica=1`.
:::
## max_bytes_to_sort {#max_bytes_to_sort}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт перед сортировкой. Если требуется обработать более указанного количества
не сжатых байт для операции ORDER BY, поведение будет
определяться `sort_overflow_mode`, который по умолчанию установлен в `throw`.
## max_bytes_to_transfer {#max_bytes_to_transfer}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт (не сжатых данных), которые можно передать на удаленный
сервер или сохранить во временной таблице при выполнении раздела GLOBAL IN/JOIN.
## max_columns_to_read {#max_columns_to_read}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество столбцов, которые можно прочитать из таблицы в одном запросе.
Если запрос требует чтения более указанного количества столбцов, выбрасывается исключение.

:::tip
Эта настройка полезна для предотвращения слишком сложных запросов.
:::

Значение `0` означает без ограничений.
## max_compress_block_size {#max_compress_block_size}



Тип: UInt64

Значение по умолчанию: 1048576

Максимальный размер блоков не сжатых данных перед сжатием для записи в таблицу. По умолчанию — 1,048,576 (1 MiB). Указание меньшего размера блока обычно приводит к немного снижению коэффициента сжатия, скорость сжатия и декомпрессии немного увеличивается из-за локальности кэша, и потребление памяти снижается.

:::note
Это настройка на экспертном уровне, и ее не следует изменять, если вы только начинаете работать с ClickHouse.
:::

Не путайте блоки для сжатия (кусок памяти, состоящий из байтов) с блоками для обработки запросов (набор строк из таблицы).
## max_concurrent_queries_for_all_users {#max_concurrent_queries_for_all_users}



Тип: UInt64

Значение по умолчанию: 0

Выбросить исключение, если значение этой настройки меньше или равно текущему количеству одновременно обрабатываемых запросов.

Пример: `max_concurrent_queries_for_all_users` может быть установлен на 99 для всех пользователей, а администратор базы данных может установить его на 100 для себя, чтобы выполнять запросы для расследования, даже когда сервер перегружен.

Изменение настройки для одного запроса или пользователя не влияет на другие запросы.

Возможные значения:

- Положительное целое число.
- 0 — Без ограничений.

**Пример**

```xml
<max_concurrent_queries_for_all_users>99</max_concurrent_queries_for_all_users>
```

**Смотрите также**

- [max_concurrent_queries](/operations/server-configuration-parameters/settings#max_concurrent_queries)
## max_concurrent_queries_for_user {#max_concurrent_queries_for_user}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество одновременно обрабатываемых запросов для пользователя.

Возможные значения:

- Положительное целое число.
- 0 — Без ограничений.

**Пример**

```xml
<max_concurrent_queries_for_user>5</max_concurrent_queries_for_user>
```
## max_distributed_connections {#max_distributed_connections}



Тип: UInt64

Значение по умолчанию: 1024

Максимальное количество одновременных подключений к удаленным серверам для распределенной обработки одного запроса к одной распределенной таблице. Рекомендуется устанавливать значение не менее количества серверов в кластере.

Следующие параметры используются только при создании распределённых таблиц (и при запуске сервера), поэтому нет необходимости изменять их во время выполнения.
## max_distributed_depth {#max_distributed_depth}



Тип: UInt64

Значение по умолчанию: 5

Ограничивает максимальную глубину рекурсивных запросов для таблиц [Distributed](../../engines/table-engines/special/distributed.md).

Если значение превышено, сервер выбрасывает исключение.

Возможные значения:

- Положительное целое число.
- 0 — Неограниченная глубина.
## max_download_buffer_size {#max_download_buffer_size}



Тип: UInt64

Значение по умолчанию: 10485760

Максимальный размер буфера для параллельного скачивания (например, для URL engine) на каждый поток.
## max_download_threads {#max_download_threads}



Тип: MaxThreads

Значение по умолчанию: 4

Максимальное количество потоков для скачивания данных (например, для URL engine).
## max_estimated_execution_time {#max_estimated_execution_time}



Тип: Seconds

Значение по умолчанию: 0

Максимальное время оценки выполнения запроса в секундах. Проверяется на каждом блоке данных
по истечении [`timeout_before_checking_execution_speed`](/operations/settings/settings#timeout_before_checking_execution_speed).
## max_execution_speed {#max_execution_speed}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество строк, обрабатываемых в секунду. Проверяется на каждом блоке данных по истечении
[`timeout_before_checking_execution_speed`](/operations/settings/settings#timeout_before_checking_execution_speed). Если скорость выполнения слишком высока, скорость выполнения уменьшается.
## max_execution_speed_bytes {#max_execution_speed_bytes}



Тип: UInt64

Значение по умолчанию: 0

Максимальное количество байт, обрабатываемых в секунду. Проверяется на каждом блоке данных по истечении
[`timeout_before_checking_execution_speed`](/operations/settings/settings#timeout_before_checking_execution_speed). Если скорость выполнения слишком высока, скорость выполнения уменьшается.
## max_execution_time {#max_execution_time}



Тип: Seconds

Значение по умолчанию: 0

Максимальное время выполнения запроса в секундах.

Параметр `max_execution_time` может быть немного сложным для понимания.  
Он работает на основе интерполяции относительно текущей скорости выполнения запроса  
(это поведение контролируется [`timeout_before_checking_execution_speed`](/operations/settings/settings#timeout_before_checking_execution_speed)).

ClickHouse прервет запрос, если ожидаемое время выполнения превышает заданное значение `max_execution_time`. По умолчанию `timeout_before_checking_execution_speed` установлен на 10 секунд. Это означает, что после 10 секунд выполнения запроса ClickHouse начнет оценивать общее время выполнения. Если, например, `max_execution_time` установлен на 3600 секунд (1 час), ClickHouse завершит запрос, если оценочное время превысит этот лимит в 3600 секунд. Если вы установите `timeout_before_checking_execution_speed` в 0, ClickHouse будет использовать время по часам в качестве основы для `max_execution_time`.

Если время выполнения запроса превышает указанное количество секунд, поведение будет определяться `timeout_overflow_mode`, который по умолчанию установлен в `throw`.

:::note
Таймаут проверяется, и запрос может остановиться только в определенных местах во время обработки данных.  
В настоящее время он не может остановиться во время слияния состояний агрегации или анализа запроса,  
и фактическое время выполнения будет выше значения этой настройки.
:::
## max_execution_time_leaf {#max_execution_time_leaf}



Тип: Seconds

Значение по умолчанию: 0

Семантически аналогично [`max_execution_time`](#max_execution_time), но применяется только
на листьях для распределенных или удаленных запросов.

Например, если мы хотим ограничить время выполнения на узле-листе до `10s`, но
не хотим ограничений на исходном узле, вместо того, чтобы иметь `max_execution_time` в настройки вложенного подзапроса:

```sql
SELECT count()
FROM cluster(cluster, view(SELECT * FROM t SETTINGS max_execution_time = 10));
```

Мы можем использовать `max_execution_time_leaf` в качестве настроек запроса:

```sql
SELECT count()
FROM cluster(cluster, view(SELECT * FROM t)) SETTINGS max_execution_time_leaf = 10;
```
## max_expanded_ast_elements {#max_expanded_ast_elements}



Тип: UInt64

Значение по умолчанию: 500000

Максимальный размер синтаксического дерева запроса в количестве узлов после расширения псевдонимов и звездочки.
## max_fetch_partition_retries_count {#max_fetch_partition_retries_count}



Тип: UInt64

Значение по умолчанию: 5

Количество повторных попыток при получении партиции с другого узла.
## max_final_threads {#max_final_threads}



Тип: MaxThreads

Значение по умолчанию: 'auto(14)'

Устанавливает максимальное количество параллельных потоков для фазы чтения данных запроса `SELECT` с модификатором [FINAL](/sql-reference/statements/select/from#final-modifier).

Возможные значения:

- Положительное целое число.
- 0 или 1 — Отключено. Запросы `SELECT` выполняются в одном потоке.
## max_http_get_redirects {#max_http_get_redirects}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество перенаправлений HTTP GET, которое разрешено. Обеспечивает дополнительные меры безопасности для предотвращения перенаправления ваших запросов на неожиданные сервисы злонамеренным сервером.\n\nЭто происходит, когда внешний сервер перенаправляет на другой адрес, но этот адрес кажется внутренним для инфраструктуры компании, и отправив HTTP-запрос на внутренний сервер, вы могли бы запросить внутренний API из внутренней сети, обходя аутентификацию, или даже запрашивать другие сервисы, такие как Redis или Memcached. Когда у вас нет внутренней инфраструктуры (включая что-то, работающее на вашем локальном компьютере), или вы доверяете серверу, безопасно разрешить перенаправления. Хотя имейте в виду, что если URL использует HTTP вместо HTTPS, вам придется доверять не только удаленному серверу, но и вашему интернет-провайдеру и каждой сети на пути.

## max_hyperscan_regexp_length {#max_hyperscan_regexp_length}

Тип: UInt64

Значение по умолчанию: 0

Определяет максимальную длину для каждого регулярного выражения в [многофункциональных функциях hyperscan](/sql-reference/functions/string-search-functions#multimatchany).

Возможные значения:

- Положительное целое число.
- 0 - Длина не ограничена.

**Пример**

Запрос:

```sql
SELECT multiMatchAny('abcd', ['ab','bcd','c','d']) SETTINGS max_hyperscan_regexp_length = 3;
```

Результат:

```text
┌─multiMatchAny('abcd', ['ab', 'bcd', 'c', 'd'])─┐
│                                              1 │
└────────────────────────────────────────────────┘
```

Запрос:

```sql
SELECT multiMatchAny('abcd', ['ab','bcd','c','d']) SETTINGS max_hyperscan_regexp_length = 2;
```

Результат:

```text
Exception: Regexp length too large.
```

**См. Также**

- [max_hyperscan_regexp_total_length](#max_hyperscan_regexp_total_length)

## max_hyperscan_regexp_total_length {#max_hyperscan_regexp_total_length}

Тип: UInt64

Значение по умолчанию: 0

Устанавливает максимальную общую длину всех регулярных выражений в каждой [функции многофункционального hyperscan](/sql-reference/functions/string-search-functions#multimatchany).

Возможные значения:

- Положительное целое число.
- 0 - Длина не ограничена.

**Пример**

Запрос:

```sql
SELECT multiMatchAny('abcd', ['a','b','c','d']) SETTINGS max_hyperscan_regexp_total_length = 5;
```

Результат:

```text
┌─multiMatchAny('abcd', ['a', 'b', 'c', 'd'])─┐
│                                           1 │
└─────────────────────────────────────────────┘
```

Запрос:

```sql
SELECT multiMatchAny('abcd', ['ab','bc','c','d']) SETTINGS max_hyperscan_regexp_total_length = 5;
```

Результат:

```text
Exception: Total regexp lengths too large.
```

**См. Также**

- [max_hyperscan_regexp_length](#max_hyperscan_regexp_length)

## max_insert_block_size {#max_insert_block_size}

Тип: UInt64

Значение по умолчанию: 1048449

Размер блоков (в количестве строк), которые формируются для вставки в таблицу. Этот параметр применяется только в случаях, когда сервер формирует блоки. Например, для вставки через HTTP интерфейс сервер анализирует формат данных и формирует блоки указанного размера. Но при использовании clickhouse-client клиент сам анализирует данные, и настройка 'max_insert_block_size' на сервере не влияет на размер вставляемых блоков. Параметр также не имеет смысла при использовании INSERT SELECT, поскольку данные вставляются с использованием тех же блоков, которые формируются после SELECT.

По умолчанию значение немного больше `max_block_size`. Причина для этого в том, что некоторые движки таблиц (`*MergeTree`) формируют часть данных на диске для каждого вставленного блока, что является довольно крупной сущностью. Аналогично, таблицы `*MergeTree` сортируют данные во время вставки, и достаточный размер блока позволяет сортировать больше данных в ОЗУ.

## max_insert_delayed_streams_for_parallel_write {#max_insert_delayed_streams_for_parallel_write}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество потоков (колонок), чтобы задержать финальный сброс части. Значение по умолчанию - авто (100 в случае поддержки параллельной записи базой данных, например S3 и отключено в противном случае).

## max_insert_threads {#max_insert_threads}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество потоков для выполнения запроса `INSERT SELECT`.

Возможные значения:

- 0 (или 1) — `INSERT SELECT` без параллельного выполнения.
- Положительное целое число. Больше чем 1.

Значение по умолчанию в облаке: от `2` до `4`, в зависимости от размера сервиса.

Параллельный `INSERT SELECT` имеет эффект только если часть `SELECT` выполняется параллельно, см. [max_threads](#max_threads) настройку. Более высокие значения приведут к большему использованию памяти.

## max_joined_block_size_rows {#max_joined_block_size_rows}

Тип: UInt64

Значение по умолчанию: 65409

Максимальный размер блока для результата JOIN (если поддерживается алгоритмом соединения). 0 означает неограниченно.

## max_limit_for_ann_queries {#max_limit_for_ann_queries}
<ExperimentalBadge/>

Тип: UInt64

Значение по умолчанию: 1000000

Запросы SELECT с LIMIT больше, чем эта настройка, не могут использовать индексы векторной схожести. Помогает предотвратить переполнение памяти в индексах векторной схожести.

## max_live_view_insert_blocks_before_refresh {#max_live_view_insert_blocks_before_refresh}
<ExperimentalBadge/>

Тип: UInt64

Значение по умолчанию: 64

Ограничивает максимальное количество вставленных блоков, после которого сливаемые блоки сбрасываются, и запрос выполняется повторно.

## max_local_read_bandwidth {#max_local_read_bandwidth}

Тип: UInt64

Значение по умолчанию: 0

Максимальная скорость локальных чтений в байтах в секунду.

## max_local_write_bandwidth {#max_local_write_bandwidth}

Тип: UInt64

Значение по умолчанию: 0

Максимальная скорость локальных записей в байтах в секунду.

## max_memory_usage {#max_memory_usage}

Тип: UInt64

Значение по умолчанию: 0

Значение по умолчанию в облаке: зависит от объема ОЗУ на реплике.

Максимальное количество ОЗУ, которое можно использовать для выполнения запроса на одном сервере. Значение `0` означает неограниченно.

Этот параметр не учитывает объем доступной памяти или общий объем памяти на машине. Ограничение применяется к одному запросу на одном сервере.

Вы можете использовать `SHOW PROCESSLIST`, чтобы увидеть текущее потребление памяти для каждого запроса. Пиковое потребление памяти отслеживается для каждого запроса и записывается в журнал.

Использование памяти не полностью отслеживается для состояний следующих агрегатных функций, из аргументов `String` и `Array`:
- `min`
- `max`
- `any`
- `anyLast`
- `argMin`
- `argMax`

Потребление памяти также ограничивается параметрами [`max_memory_usage_for_user`](/operations/settings/settings#max_memory_usage_for_user) и [`max_server_memory_usage`](/operations/server-configuration-parameters/settings#max_server_memory_usage).

## max_memory_usage_for_user {#max_memory_usage_for_user}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество ОЗУ, которое можно использовать для выполнения запросов пользователя на одном сервере. Ноль означает неограниченно.

По умолчанию количество не ограничено (`max_memory_usage_for_user = 0`).

См. также описание [`max_memory_usage`](/operations/settings/settings#max_memory_usage).

Например, если вы хотите установить `max_memory_usage_for_user` на 1000 байт для пользователя с именем `clickhouse_read`, вы можете использовать оператор

```sql
ALTER USER clickhouse_read SETTINGS max_memory_usage_for_user = 1000;
```

Вы можете проверить, что это сработало, выйдя из своего клиента, снова войдя, а затем использовать функцию `getSetting`:

```sql
SELECT getSetting('max_memory_usage_for_user');
```

## max_network_bandwidth {#max_network_bandwidth}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает скорость обмена данными по сети в байтах в секунду. Этот параметр применим к каждому запросу.

Возможные значения:

- Положительное целое число.
- 0 — Контроль пропускной способности отключен.

## max_network_bandwidth_for_all_users {#max_network_bandwidth_for_all_users}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает скорость обмена данными по сети в байтах в секунду. Этот параметр применяется ко всем одновременно выполняемым запросам на сервере.

Возможные значения:

- Положительное целое число.
- 0 — Контроль скорости данных отключен.

## max_network_bandwidth_for_user {#max_network_bandwidth_for_user}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает скорость обмена данными по сети в байтах в секунду. Этот параметр применяется ко всем одновременно выполняемым запросам, выполняемым одним пользователем.

Возможные значения:

- Положительное целое число.
- 0 — Контроль скорости данных отключен.

## max_network_bytes {#max_network_bytes}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает объем данных (в байтах), который принимается или передается по сети при выполнении запроса. Этот параметр применяется к каждому отдельному запросу.

Возможные значения:

- Положительное целое число.
- 0 — Контроль объема данных отключен.

## max_number_of_partitions_for_independent_aggregation {#max_number_of_partitions_for_independent_aggregation}

Тип: UInt64

Значение по умолчанию: 128

Максимальное количество партиций в таблице для применения оптимизации.

## max_parallel_replicas {#max_parallel_replicas}

Тип: NonZeroUInt64

Значение по умолчанию: 1000

Максимальное количество реплик для каждой шард при выполнении запроса.

Возможные значения:

- Положительное целое число.

**Дополнительная Информация**

Эта опция будет давать разные результаты в зависимости от используемых настроек.

:::note
Этот параметр будет давать некорректные результаты, когда вовлечены соединения или подзапросы, и все таблицы не соответствуют определенным требованиям. См. [Распределенные подзапросы и max_parallel_replicas](/operations/settings/settings#max_parallel_replicas) для получения дополнительных сведений.
:::
### Параллельная обработка с использованием ключа `SAMPLE`

Запрос может быть обработан быстрее, если он выполняется на нескольких серверах параллельно. Но производительность запроса может ухудшиться в следующих случаях:

- Позиция ключа выборки в ключе партиционирования не позволяет эффективно выполнять диапазонные сканирования.
- Добавление ключа выборки в таблицу делает фильтрацию по другим колонкам менее эффективной.
- Ключ выборки - это выражение, расчёт которого затратен.
- Распределение задержки кластера имеет длинный хвост, поэтому запрос к большему количеству серверов увеличивает общую задержку запроса.

### Параллельная обработка с использованием [parallel_replicas_custom_key](#parallel_replicas_custom_key)

Этот параметр полезен для любой реплицируемой таблицы.

## max_parser_backtracks {#max_parser_backtracks}

Тип: UInt64

Значение по умолчанию: 1000000

Максимальная количество откатов парсера (сколько раз он пробует разные альтернативы в процессе рекурсивного спуска парсинга).

## max_parser_depth {#max_parser_depth}

Тип: UInt64

Значение по умолчанию: 1000

Ограничивает максимальную глубину рекурсии в рекурсивном парсере. Позволяет контролировать размер стека.

Возможные значения:

- Положительное целое число.
- 0 — Глубина рекурсии не ограничена.

## max_parsing_threads {#max_parsing_threads}

Тип: MaxThreads

Значение по умолчанию: 'auto(14)'

Максимальное количество потоков для парсинга данных в форматах ввода, поддерживающих параллельный парсинг. По умолчанию определяется автоматически.

## max_partition_size_to_drop {#max_partition_size_to_drop}

Тип: UInt64

Значение по умолчанию: 50000000000

Ограничение на удаление партиций во время выполнения запроса. Значение 0 означает, что вы можете удалять партиции без каких-либо ограничений.

Значение по умолчанию в облаке: 1 ТБ.

:::note
Эта настройка запроса переопределяет эквивалент своей серверной настройки, см. [max_partition_size_to_drop](/operations/server-configuration-parameters/settings#max_partition_size_to_drop)
:::

## max_partitions_per_insert_block {#max_partitions_per_insert_block}

Тип: UInt64

Значение по умолчанию: 100

Ограничивает максимальное количество партиций в одном вставленном блоке, и исключение выбрасывается, если блок содержит слишком много партиций.

- Положительное целое число.
- `0` — Неограниченное количество партиций.

**Пояснения**

При вставке данных ClickHouse вычисляет количество партиций в вставленном блоке. Если количество партиций превышает `max_partitions_per_insert_block`, ClickHouse либо записывает предупреждение, либо выбрасывает исключение в зависимости от `throw_on_max_partitions_per_insert_block`. Исключения имеют следующий текст:

> "Слишком много партиций для одного INSERT блока (`partitions_count` партиций, лимит " + toString(max_partitions) + ").
  Лимит контролируется настройкой 'max_partitions_per_insert_block'.
  Большое количество партиций является распространённым заблуждением. Это приведёт к серьезному негативному влиянию на производительность, включая медленный запуск сервера, медленные запросы INSERT и медленные запросы SELECT. Рекомендуемое общее количество партиций для таблицы составляет менее 1000..10000. Обратите внимание, что партиционирование не предназначено для ускорения запросов SELECT (ORDER BY key достаточно для обеспечения быстрой обработки диапазонов).
  Партиции предназначены для манипуляций с данными (DROP PARTITION и т.д.)."

:::note
Эта настройка является безопасным порогом, так как использование большого количества партиций является распространённым заблуждением.
:::

## max_partitions_to_read {#max_partitions_to_read}

Тип: Int64

Значение по умолчанию: -1

Ограничивает максимальное количество партиций, которые могут быть доступны в одном запросе.

Значение, указанное при создании таблицы, можно переопределить через настройку уровня запроса.

Возможные значения:

- Положительное целое число.
- `-1` - неограниченно (по умолчанию)

:::note
Вы также можете указать настройку MergeTree [`max_partitions_to_read`](/operations/settings/settings#max_partitions_to_read) в настройках таблиц.
:::

## max_parts_to_move {#max_parts_to_move}

Тип: UInt64

Значение по умолчанию: 1000

Ограничивает количество частей, которые могут быть перемещены в одном запросе. Ноль означает неограниченно.

## max_query_size {#max_query_size}

Тип: UInt64

Значение по умолчанию: 262144

Максимальное количество байт строки запроса, обрабатываемое SQL- парсером. Данные в разделе VALUES запросов INSERT обрабатываются отдельным парсером потока (который использует O(1) ОЗУ) и не подвержены этому ограничению.

:::note
`max_query_size` не может быть установлен внутри SQL запроса (например, `SELECT now() SETTINGS max_query_size=10000`), потому что ClickHouse должен выделить буфер для парсинга запроса, и размер этого буфера определяется настройкой `max_query_size`, которая должна быть настроена до выполнения запроса.
:::

## max_read_buffer_size {#max_read_buffer_size}

Тип: UInt64

Значение по умолчанию: 1048576

Максимальный размер буфера для чтения из файловой системы.

## max_read_buffer_size_local_fs {#max_read_buffer_size_local_fs}

Тип: UInt64

Значение по умолчанию: 131072

Максимальный размер буфера для чтения из локальной файловой системы. Если установлено в 0, то будет использован max_read_buffer_size.

## max_read_buffer_size_remote_fs {#max_read_buffer_size_remote_fs}

Тип: UInt64

Значение по умолчанию: 0

Максимальный размер буфера для чтения из удаленной файловой системы. Если установлено в 0, то будет использован max_read_buffer_size.

## max_recursive_cte_evaluation_depth {#max_recursive_cte_evaluation_depth}

Тип: UInt64

Значение по умолчанию: 1000

Максимальный лимит на глубину оценки рекурсивных CTE.

## max_remote_read_network_bandwidth {#max_remote_read_network_bandwidth}

Тип: UInt64

Значение по умолчанию: 0

Максимальная скорость обмена данными по сети в байтах в секунду для чтения.

## max_remote_write_network_bandwidth {#max_remote_write_network_bandwidth}

Тип: UInt64

Значение по умолчанию: 0

Максимальная скорость обмена данными по сети в байтах в секунду для записи.

## max_replica_delay_for_distributed_queries {#max_replica_delay_for_distributed_queries}

Тип: UInt64

Значение по умолчанию: 300

Отключает отстающие реплики для распределенных запросов. См. [Репликация](../../engines/table-engines/mergetree-family/replication.md).

Устанавливает время в секундах. Если отставание реплики больше или равно установленному значению, эта реплика не используется.

Возможные значения:

- Положительное целое число.
- 0 — Отставания реплик не проверяются.

Чтобы предотвратить использование любой реплики с ненулевым отставанием, установите этот параметр на 1.

Используется при выполнении `SELECT` из распределенной таблицы, указывающей на реплицируемые таблицы.

## max_result_bytes {#max_result_bytes}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает размер результата в байтах (несжатый). Запрос остановится после обработки блока данных, если достигнут предел, но не будет отрезан последний блок результата, следовательно, размер результата может быть больше лимита.

**Замечания**

Размер результата в памяти учитывается для этого предела. Даже если размер результата мал, он может ссылаться на большие структуры данных в памяти, представляющие словари колонок с низкой кардинальностью и арены колонок агрегатных функций, так что порог может быть превышен, несмотря на маленький размер результата.

:::warning
Эта настройка достаточно низкоуровневая и должна использоваться с осторожностью.
:::

## max_result_rows {#max_result_rows}

Тип: UInt64

Значение по умолчанию: 0

Значение по умолчанию в облаке: `0`.

Ограничивает количество строк в результате. Также проверяется для подзапросов и на удаленных серверах при выполнении частей распределенного запроса. Ограничение не применяется, когда значение равно `0`.

Запрос остановится после обработки блока данных, если достигнут предел, но не будет отрезан последний блок результата, следовательно, размер результата может быть больше лимита.

## max_rows_in_distinct {#max_rows_in_distinct}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество различных строк при использовании DISTINCT.

## max_rows_in_join {#max_rows_in_join}

Тип: UInt64

Значение по умолчанию: 0

Ограничивает количество строк в хеш-таблице, используемой при соединении таблиц.

Этот параметр применяется к операциям [SELECT ... JOIN](/sql-reference/statements/select/join) и к движку таблиц [Join](/engines/table-engines/special/join).

Если запрос содержит несколько соединений, ClickHouse проверяет эту настройку для каждого промежуточного результата.

ClickHouse может выполнять разные действия, когда лимит достигнут. Используйте настройку [`join_overflow_mode`](/operations/settings/settings#join_overflow_mode), чтобы выбрать действие.

Возможные значения:

- Положительное целое число.
- `0` — Неограниченное количество строк.

## max_rows_in_set {#max_rows_in_set}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество строк для набора данных в клаузе IN, созданного из подзапроса.

## max_rows_in_set_to_optimize_join {#max_rows_in_set_to_optimize_join}

Тип: UInt64

Значение по умолчанию: 0

Максимальный размер набора, чтобы фильтровать соединённые таблицы по друг другу перед соединением.

Возможные значения:

- 0 — Отключить.
- Любое положительное целое число.

## max_rows_to_group_by {#max_rows_to_group_by}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество уникальных ключей, полученных из агрегации. Эта настройка позволяет ограничить использование памяти при агрегации.

Если агрегация во время GROUP BY генерирует больше, чем указанное количество строк (уникальных ключей GROUP BY), поведение будет определяться параметром `group_by_overflow_mode`, который по умолчанию равен `throw`, но может быть переключен на приближенную агрегацию GROUP BY.

## max_rows_to_read {#max_rows_to_read}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество строк, которые могут быть прочитаны из таблицы при выполнении запроса. Ограничение проверяется для каждого обрабатываемого фрагмента данных, применяется только к самым глубоким уровневым выражениям таблицы и при чтении с удаленного сервера проверяется только на удаленном сервере.

## max_rows_to_read_leaf {#max_rows_to_read_leaf}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество строк, которые могут быть прочитаны из локальной таблицы на узле-листе при выполнении распределенного запроса. В то время как распределенные запросы могут делать несколько подзапросов к каждому шард (листьевой узел) - этот лимит будет проверяться только на этапе чтения на листьях и игнорироваться на этапе объединения результатов на корневом узле.

Например, кластер состоит из 2 шардов и каждый шард содержит таблицу с 100 строками. Распределенный запрос, который должен прочитать все данные из обоих таблиц с установкой `max_rows_to_read=150`, завершится неудачей, так как всего будет 200 строк. Запрос с `max_rows_to_read_leaf=150` будет успешным, так как листья будут читать максимум 100 строк.

Ограничение проверяется для каждого обрабатываемого фрагмента данных.

:::note
Эта настройка нестабильна с `prefer_localhost_replica=1`.
:::

## max_rows_to_sort {#max_rows_to_sort}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество строк перед сортировкой. Это позволяет ограничить использование памяти при сортировке. Если больше чем указанное количество записей должно быть обработано для операции ORDER BY, поведение будет определяться режимом `sort_overflow_mode`, который по умолчанию установлен на `throw`.

## max_rows_to_transfer {#max_rows_to_transfer}

Тип: UInt64

Значение по умолчанию: 0

Максимальный размер (в строках), который может быть передан удаленному серверу или сохранен в временной таблице, когда выполняется раздел GLOBAL IN/JOIN.

## max_sessions_for_user {#max_sessions_for_user}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество одновременных сессий для каждого аутентифицированного пользователя на сервере ClickHouse.

Пример:

```xml
<profiles>
    <single_session_profile>
        <max_sessions_for_user>1</max_sessions_for_user>
    </single_session_profile>
    <two_sessions_profile>
        <max_sessions_for_user>2</max_sessions_for_user>
    </two_sessions_profile>
    <unlimited_sessions_profile>
        <max_sessions_for_user>0</max_sessions_for_user>
    </unlimited_sessions_profile>
</profiles>
<users>
    <!-- Пользователь Алиса может подключаться к серверу ClickHouse не более одного раза одновременно. -->
    <Alice>
        <profile>single_session_user</profile>
    </Alice>
    <!-- Пользователь Боб может использовать 2 одновременные сессии. -->
    <Bob>
        <profile>two_sessions_profile</profile>
    </Bob>
    <!-- Пользователь Чарльз может использовать произвольное количество одновременных сессий. -->
    <Charles>
        <profile>unlimited_sessions_profile</profile>
    </Charles>
</users>
```

Возможные значения:
- Положительное целое число
- `0` - бесконечное количество одновременных сессий (по умолчанию)

## max_size_to_preallocate_for_aggregation {#max_size_to_preallocate_for_aggregation}

Тип: UInt64

Значение по умолчанию: 1000000000000

Для сколько элементов разрешено предварительно резервировать место во всех хеш-таблицах в общей сложности перед агрегацией.

## max_size_to_preallocate_for_joins {#max_size_to_preallocate_for_joins}

Тип: UInt64

Значение по умолчанию: 1000000000000

Для сколько элементов разрешено предварительно резервировать место во всех хеш-таблицах в общей сложности перед соединением.

## max_streams_for_merge_tree_reading {#max_streams_for_merge_tree_reading}

Тип: UInt64

Значение по умолчанию: 0

Если не равно нулю, ограничивает количество потоков чтения для таблицы MergeTree.

## max_streams_multiplier_for_merge_tables {#max_streams_multiplier_for_merge_tables}

Тип: Float

Значение по умолчанию: 5

Запрашивает больше потоков при чтении из таблицы Merge. Потоки будут распределены между таблицами, которые будет использовать таблица Merge. Это позволяет более равномерно распределить работу между потоками и особенно полезно, когда слияние различных таблиц различается по размеру.

## max_streams_to_max_threads_ratio {#max_streams_to_max_threads_ratio}

Тип: Float

Значение по умолчанию: 1

Позволяет использовать больше источников, чем количество потоков - чтобы более равномерно распределить работу между потоками. Предполагается, что это временное решение, так как в будущем можно будет сделать количество источников равным количеству потоков, но для каждого источника динамически выбирать доступную работу.

## max_subquery_depth {#max_subquery_depth}

Тип: UInt64

Значение по умолчанию: 100

Если запрос имеет больше заданного количества вложенных подзапросов, выбрасывается исключение.

:::tip
Это позволяет провести проверку на разумность, чтобы защитить пользователей вашего кластера от написания чрезмерно сложных запросов.
:::

## max_table_size_to_drop {#max_table_size_to_drop}

Тип: UInt64

Значение по умолчанию: 50000000000

Ограничение на удаление таблиц во время выполнения запроса. Значение 0 означает, что вы можете удалять все таблицы без каких-либо ограничений.

Значение по умолчанию в облаке: 1 ТБ.

:::note
Эта настройка запроса переопределяет эквивалент своей серверной настройки, см. [max_table_size_to_drop](/operations/server-configuration-parameters/settings#max_table_size_to_drop)
:::

## max_temporary_columns {#max_temporary_columns}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество временных колонок, которые должны храниться в ОЗУ одновременно при выполнении запроса, включая постоянные колонки. Если запрос генерирует больше, чем указанное количество временных колонок в памяти в результате промежуточного вычисления, то выбрасывается исключение.

:::tip
Эта настройка полезна для предотвращения чрезмерно сложных запросов.
:::

Значение `0` означает неограниченно.

## max_temporary_data_on_disk_size_for_query {#max_temporary_data_on_disk_size_for_query}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество данных, занятых временными файлами на диске в байтах для всех одновременно выполняемых запросов.

Возможные значения:

- Положительное целое число.
- `0` — неограниченно (по умолчанию)

## max_temporary_data_on_disk_size_for_user {#max_temporary_data_on_disk_size_for_user}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество данных, занятых временными файлами на диске в байтах для всех одновременно выполняемых пользовательских запросов.

Возможные значения:

- Положительное целое число.
- `0` — неограниченно (по умолчанию)

## max_temporary_non_const_columns {#max_temporary_non_const_columns}

Тип: UInt64

Значение по умолчанию: 0

Как `max_temporary_columns`, максимальное количество временных колонок, которые должны храниться в ОЗУ одновременно при выполнении запроса, но без учета постоянных колонок.

:::note
Постоянные колонки часто формируются при выполнении запроса, но требуют практически нулевых ресурсов вычисления.
:::

## max_threads {#max_threads}

Тип: MaxThreads

Значение по умолчанию: 'auto(14)'

Максимальное количество потоков обработки запросов, исключая потоки для получения данных с удаленных серверов (см. параметр 'max_distributed_connections').

Этот параметр применяется к потокам, которые выполняют одни и те же этапы конвейера обработки запросов параллельно. Например, при чтении из таблицы, если возможно оценить выражения с функциями, фильтровать с помощью WHERE и предварительно агрегировать для GROUP BY параллельно, используя как минимум 'max_threads' количество потоков, тогда используются 'max_threads'.

Для запросов, которые выполняются быстро из-за LIMIT, вы можете установить меньший 'max_threads'. Например, если необходимое количество записей находится в каждом блоке, и max_threads = 8, тогда извлекается 8 блоков, хотя было бы достаточно прочитать всего один.

Чем меньше значение `max_threads`, тем меньше используется памяти.

## max_threads_for_indexes {#max_threads_for_indexes}

Тип: UInt64

Значение по умолчанию: 0

Максимальное количество потоков для обработки индексов.

## max_untracked_memory {#max_untracked_memory}

Тип: UInt64

Значение по умолчанию: 4194304

Малые выделения и освобождения группируются в локальную переменную потока и отслеживаются или профилируются только тогда, когда сумма (в абсолютном значении) становится больше указанного значения. Если значение больше чем 'memory_profiler_step', оно будет эффективно понижено до 'memory_profiler_step'.

## memory_overcommit_ratio_denominator {#memory_overcommit_ratio_denominator}

Тип: UInt64

Значение по умолчанию: 1073741824

Это представляет собойSoft лимит памяти, когда жесткий лимит достигается на глобальном уровне. Это значение используется для вычисления коэффициента перерасхода для запроса. Ноль означает пропустить запрос. Читайте больше о [перерасходе памяти](memory-overcommit.md).

## memory_overcommit_ratio_denominator_for_user {#memory_overcommit_ratio_denominator_for_user}

Тип: UInt64

Значение по умолчанию: 1073741824

Это представляет собой Soft лимит памяти, когда жесткий лимит достигается на уровне пользователя. Это значение используется для вычисления коэффициента перерасхода для запроса. Ноль означает пропустить запрос. Читайте больше о [перерасходе памяти](memory-overcommit.md).

## memory_profiler_sample_max_allocation_size {#memory_profiler_sample_max_allocation_size}

Тип: UInt64

Значение по умолчанию: 0

Собирать случайные выделения размера менее или равного указанному значению с вероятностью, равной `memory_profiler_sample_probability`. 0 означает отключение. Может быть полезно установить 'max_untracked_memory' на 0, чтобы сделать это ограничение ожидаемым.

## memory_profiler_sample_min_allocation_size {#memory_profiler_sample_min_allocation_size}

Тип: UInt64

Значение по умолчанию: 0

Собирать случайные выделения размера больше или равного указанному значению с вероятностью, равной `memory_profiler_sample_probability`. 0 означает отключение. Может быть полезно установить 'max_untracked_memory' на 0, чтобы сделать это ограничение ожидаемым.

## memory_profiler_sample_probability {#memory_profiler_sample_probability}

Тип: Float

Значение по умолчанию: 0

Собирать случайные выделения и освобождения и записывать их в system.trace_log с 'MemorySample' trace_type. Вероятность соответствует каждому выделению/освобождению независимо от размера выделения (можно изменить с помощью `memory_profiler_sample_min_allocation_size` и `memory_profiler_sample_max_allocation_size`). Обратите внимание, что выборка происходит только тогда, когда объем неотслеживаемой памяти превышает 'max_untracked_memory'. Может быть полезно установить 'max_untracked_memory' на 0 для более точной выборки.

## memory_profiler_step {#memory_profiler_step}

Тип: UInt64

Значение по умолчанию: 4194304

Устанавливает шаг профайлера памяти. Каждый раз, когда использование памяти запросом становится больше, чем каждый следующий шаг в байтах, профайлер памяти соберет трассировку стека выделения и запишет ее в [trace_log](/operations/system-tables/trace_log).

Возможные значения:

- Положительное целое число в байтах.

- 0 для отключения профайлера памяти.

## memory_tracker_fault_probability {#memory_tracker_fault_probability}

Тип: Float

Значение по умолчанию: 0

Для тестирования `безопасности исключений` - выбрасывать исключение каждый раз, когда вы выделяете память с указанной вероятностью.

## memory_usage_overcommit_max_wait_microseconds {#memory_usage_overcommit_max_wait_microseconds}

Тип: UInt64

Значение по умолчанию: 5000000

Максимальное время, которое поток будет ждать, чтобы память была освобождена в случае перерасхода памяти на уровне пользователя. Если время ожидания истечёт и память не освобождена, выбрасывается исключение. Читайте больше о [перерасходе памяти](memory-overcommit.md).
```yaml
title: 'Параметры настройки MergeTree'
sidebar_label: 'Параметры MergeTree'
keywords: ['MergeTree', 'настройки', 'параметры']
description: 'Параметры для настройки работы движка MergeTree в ClickHouse.'
```

## merge_table_max_tables_to_look_for_schema_inference {#merge_table_max_tables_to_look_for_schema_inference}

Тип: UInt64

Значение по умолчанию: 1000

При создании таблицы `Merge` без явной схемы или при использовании табличной функции `merge` схема выводится как объединение не более указанного числа совпадающих таблиц. Если количество таблиц больше, схема будет выведена из первых указанных таблиц.

## merge_tree_coarse_index_granularity {#merge_tree_coarse_index_granularity}

Тип: UInt64

Значение по умолчанию: 8

При поиске данных ClickHouse проверяет метки данных в файле индекса. Если ClickHouse находит, что необходимые ключи находятся в каком-то диапазоне, он делит этот диапазон на `merge_tree_coarse_index_granularity` поддиапазонов и рекурсивно ищет необходимые ключи там.

Возможные значения:

- Любое положительное четное целое число.

## merge_tree_compact_parts_min_granules_to_multibuffer_read {#merge_tree_compact_parts_min_granules_to_multibuffer_read}

<CloudAvailableBadge/>

Тип: UInt64

Значение по умолчанию: 16

Этот параметр имеет эффект только в ClickHouse Cloud. Количество гранул в полосе компактной части таблиц MergeTree, для которых используется многофункциональный читатель, поддерживающий параллельное чтение и предварительную выборку. В случае чтения с удаленной файловой системы использование многофункционального читателя увеличивает количество запросов на чтение.

## merge_tree_determine_task_size_by_prewhere_columns {#merge_tree_determine_task_size_by_prewhere_columns}

Тип: Bool

Значение по умолчанию: 1

Определять размер задачи чтения, используя только размер колонок prewhere.

## merge_tree_max_bytes_to_use_cache {#merge_tree_max_bytes_to_use_cache}

Тип: UInt64

Значение по умолчанию: 2013265920

Если ClickHouse должен прочитать более `merge_tree_max_bytes_to_use_cache` байт за один запрос, он не использует кэш некомпрессированных блоков.

Кэш некомпрессированных блоков хранит данные, извлеченные для запросов. ClickHouse использует этот кэш для ускорения ответов на повторяющиеся небольшие запросы. Эта настройка защищает кэш от разрушения запросами, которые читают большое количество данных. Параметр сервера [uncompressed_cache_size](/operations/server-configuration-parameters/settings#uncompressed_cache_size) определяет размер кэша некомпрессированных блоков.

Возможные значения:

- Любое положительное целое число.

## merge_tree_max_rows_to_use_cache {#merge_tree_max_rows_to_use_cache}

Тип: UInt64

Значение по умолчанию: 1048576

Если ClickHouse должен прочитать более `merge_tree_max_rows_to_use_cache` строк за один запрос, он не использует кэш некомпрессированных блоков.

Кэш некомпрессированных блоков хранит данные, извлеченные для запросов. ClickHouse использует этот кэш для ускорения ответов на повторяющиеся небольшие запросы. Эта настройка защищает кэш от разрушения запросами, которые читают большое количество данных. Параметр сервера [uncompressed_cache_size](/operations/server-configuration-parameters/settings#uncompressed_cache_size) определяет размер кэша некомпрессированных блоков.

Возможные значения:

- Любое положительное целое число.

## merge_tree_min_bytes_for_concurrent_read {#merge_tree_min_bytes_for_concurrent_read}

Тип: UInt64

Значение по умолчанию: 251658240

Если количество байтов, которые нужно прочитать из одного файла таблицы [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md), превышает `merge_tree_min_bytes_for_concurrent_read`, то ClickHouse пытается параллельно прочитать этот файл в несколько потоков.

Возможные значения:

- Положительное целое число.

## merge_tree_min_bytes_for_concurrent_read_for_remote_filesystem {#merge_tree_min_bytes_for_concurrent_read_for_remote_filesystem}

Тип: UInt64

Значение по умолчанию: 0

Минимальное количество байтов, которые нужно прочитать из одного файла, прежде чем движок [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md) сможет параллелизовать чтение, при чтении с удаленной файловой системы. Мы не рекомендуем использовать эту настройку.

Возможные значения:

- Положительное целое число.

## merge_tree_min_bytes_for_seek {#merge_tree_min_bytes_for_seek}

Тип: UInt64

Значение по умолчанию: 0

Если расстояние между двумя блоками данных, которые нужно прочитать в одном файле, меньше `merge_tree_min_bytes_for_seek` байт, то ClickHouse последовательно читает диапазон файла, который содержит оба блока, тем самым избегая лишнего поиска.

Возможные значения:

- Любое положительное целое число.

## merge_tree_min_bytes_per_task_for_remote_reading {#merge_tree_min_bytes_per_task_for_remote_reading}

Тип: UInt64

Значение по умолчанию: 2097152

Минимальное количество байтов для чтения на задачу.

## merge_tree_min_read_task_size {#merge_tree_min_read_task_size}

Тип: UInt64

Значение по умолчанию: 8

Жесткий нижний предел для размера задачи (даже когда количество гранул мало и количество доступных потоков высоко, мы не будем выделять меньшие задачи).

## merge_tree_min_rows_for_concurrent_read {#merge_tree_min_rows_for_concurrent_read}

Тип: UInt64

Значение по умолчанию: 163840

Если количество строк, которые нужно прочитать из файла таблицы [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md), превышает `merge_tree_min_rows_for_concurrent_read`, то ClickHouse пытается выполнить параллельное чтение из этого файла в несколько потоков.

Возможные значения:

- Положительное целое число.

## merge_tree_min_rows_for_concurrent_read_for_remote_filesystem {#merge_tree_min_rows_for_concurrent_read_for_remote_filesystem}

Тип: UInt64

Значение по умолчанию: 0

Минимальное количество строк для чтения из одного файла, прежде чем движок [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md) сможет параллелизовать чтение, при чтении с удаленной файловой системы. Мы не рекомендуем использовать эту настройку.

Возможные значения:

- Положительное целое число.

## merge_tree_min_rows_for_seek {#merge_tree_min_rows_for_seek}

Тип: UInt64

Значение по умолчанию: 0

Если расстояние между двумя блоками данных, которые нужно прочитать в одном файле, меньше `merge_tree_min_rows_for_seek` строк, то ClickHouse не выполняет поиск по файлу, а последовательно читает данные.

Возможные значения:

- Любое положительное целое число.

## merge_tree_read_split_ranges_into_intersecting_and_non_intersecting_injection_probability {#merge_tree_read_split_ranges_into_intersecting_and_non_intersecting_injection_probability}

Тип: Float

Значение по умолчанию: 0

Для тестирования `PartsSplitter` - разбить диапазоны чтения на пересекающиеся и непересекающиеся каждый раз, когда вы читаете из MergeTree с указанной вероятностью.

## merge_tree_use_const_size_tasks_for_remote_reading {#merge_tree_use_const_size_tasks_for_remote_reading}

Тип: Bool

Значение по умолчанию: 1

Использовать задачи фиксированного размера для чтения из удаленной таблицы.

## merge_tree_use_deserialization_prefixes_cache {#merge_tree_use_deserialization_prefixes_cache}

Тип: Bool

Значение по умолчанию: 1

Включает кеширование метаданных колонок из префиксов файла при чтении из широких частей в MergeTree.

## merge_tree_use_prefixes_deserialization_thread_pool {#merge_tree_use_prefixes_deserialization_thread_pool}

Тип: Bool

Значение по умолчанию: 1

Включает использование пула потоков для параллельного чтения префиксов в широких частях в MergeTree. Размер этого пула потоков контролируется настройкой сервера `max_prefixes_deserialization_thread_pool_size`.

## merge_tree_use_v1_object_and_dynamic_serialization {#merge_tree_use_v1_object_and_dynamic_serialization}

Тип: Bool

Значение по умолчанию: 0

При включенном значении используется версия сериализации V1 типов JSON и Dynamic в MergeTree вместо V2. Изменение этой настройки вступает в силу только после перезапуска сервера.

## metrics_perf_events_enabled {#metrics_perf_events_enabled}

Тип: Bool

Значение по умолчанию: 0

Если включено, некоторые из событий производительности будут измеряться в ходе выполнения запросов.

## metrics_perf_events_list {#metrics_perf_events_list}

Тип: String

Значение по умолчанию: 

Список метрик производительности, разделенных запятыми, которые будут измеряться в ходе выполнения запросов. Пустое значение означает все события. См. PerfEventInfo в источниках для доступных событий.

## min_bytes_to_use_direct_io {#min_bytes_to_use_direct_io}

Тип: UInt64

Значение по умолчанию: 0

Минимальный объем данных, необходимый для использования прямого доступа к диску хранения.

ClickHouse использует эту настройку при чтении данных из таблиц. Если общий объем данных, которые нужно прочитать, превышает `min_bytes_to_use_direct_io` байт, то ClickHouse читает данные с диска хранения с опцией `O_DIRECT`.

Возможные значения:

- 0 — Прямой доступ отключен.
- Положительное целое число.

## min_bytes_to_use_mmap_io {#min_bytes_to_use_mmap_io}

Тип: UInt64

Значение по умолчанию: 0

Это экспериментальная настройка. Устанавливает минимальный объем памяти для чтения больших файлов без копирования данных из ядра в пространство пользователей. Рекомендуемый порог составляет около 64 МБ, так как [mmap/munmap](https://en.wikipedia.org/wiki/Mmap) медленный. Это имеет смысл только для больших файлов и помогает только если данные находятся в кэше страниц.

Возможные значения:

- Положительное целое число.
- 0 — Большие файлы читаются только с копированием данных из ядра в пространство пользователей.

## min_chunk_bytes_for_parallel_parsing {#min_chunk_bytes_for_parallel_parsing}

Тип: NonZeroUInt64

Значение по умолчанию: 10485760

- Тип: беззнаковое целое
- Значение по умолчанию: 1 Миб

Минимальный размер порции в байтах, который каждый поток будет разбирать параллельно.

## min_compress_block_size {#min_compress_block_size}

Тип: UInt64

Значение по умолчанию: 65536

Для таблиц [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md). Для уменьшения задержки при обработке запросов блок сжимается, когда записывается следующий маркер, если его размер составляет не менее `min_compress_block_size`. По умолчанию 65,536.

Фактический размер блока, если некомпрессированные данные меньше `max_compress_block_size`, не меньше этого значения и не меньше объема данных для одного маркера.

Рассмотрим пример. Предположим, что `index_granularity` была установлена в 8192 во время создания таблицы.

Мы записываем колонку типа UInt32 (4 байта на значение). При записи 8192 строк общий объем составит 32 КБ данных. Поскольку min_compress_block_size = 65,536, сжатый блок будет формироваться для каждых двух маркеров.

Мы записываем колонку URL с типом String (средний размер 60 байт на значение). При записи 8192 строк среднее значение будет чуть меньше 500 КБ данных. Поскольку это больше 65,536, сжатый блок будет формироваться для каждого маркера. В этом случае при чтении данных с диска в диапазоне одного маркера лишние данные не будут распакованы.

:::note
Это настройка уровня эксперта, и вы не должны изменять её, если только только начинаете работать с ClickHouse.
:::

## min_count_to_compile_aggregate_expression {#min_count_to_compile_aggregate_expression}

Тип: UInt64

Значение по умолчанию: 3

Минимальное количество идентичных агрегатных выражений для начала JIT-компиляции. Работает только если включена настройка [compile_aggregate_expressions](#compile_aggregate_expressions).

Возможные значения:

- Положительное целое число.
- 0 — Идентичные агрегатные выражения всегда JIT-компилируются.

## min_count_to_compile_expression {#min_count_to_compile_expression}

Тип: UInt64

Значение по умолчанию: 3

Минимальное количество выполнения одного и того же выражения, прежде чем оно будет скомпилировано.

## min_count_to_compile_sort_description {#min_count_to_compile_sort_description}

Тип: UInt64

Значение по умолчанию: 3

Количество идентичных описаний сортировки до их JIT-компиляции.

## min_execution_speed {#min_execution_speed}

Тип: UInt64

Значение по умолчанию: 0

Минимальная скорость выполнения в строках в секунду. Проверяется на каждом блоке данных, когда истекает [timeout_before_checking_execution_speed](/operations/settings/settings#timeout_before_checking_execution_speed). Если скорость выполнения ниже, возникает исключение.

## min_execution_speed_bytes {#min_execution_speed_bytes}

Тип: UInt64

Значение по умолчанию: 0

Минимальное количество байтов выполнения в секунду. Проверяется на каждом блоке данных, когда истекает [timeout_before_checking_execution_speed](/operations/settings/settings#timeout_before_checking_execution_speed). Если скорость выполнения ниже, возникает исключение.

## min_external_sort_block_bytes {#min_external_sort_block_bytes}

Тип: UInt64

Значение по умолчанию: 104857600

Минимальный размер блока в байтах для внешней сортировки, который будет записан на диск, чтобы избежать создания слишком большого количества файлов.

## min_external_table_block_size_bytes {#min_external_table_block_size_bytes}

Тип: UInt64

Значение по умолчанию: 268402944

Сжимает блоки, переданные во внешнюю таблицу, до указанного размера в байтах, если блоки недостаточно большие.

## min_external_table_block_size_rows {#min_external_table_block_size_rows}

Тип: UInt64

Значение по умолчанию: 1048449

Сжимает блоки, переданные во внешнюю таблицу, до указанного размера в строках, если блоки недостаточно большие.

## min_free_disk_bytes_to_perform_insert {#min_free_disk_bytes_to_perform_insert}

Тип: UInt64

Значение по умолчанию: 0

Минимальное количество свободного места на диске для выполнения вставки.

## min_free_disk_ratio_to_perform_insert {#min_free_disk_ratio_to_perform_insert}

Тип: Float

Значение по умолчанию: 0

Минимальное соотношение свободного места на диске для выполнения вставки.

## min_free_disk_space_for_temporary_data {#min_free_disk_space_for_temporary_data}

Тип: UInt64

Значение по умолчанию: 0

Минимальное пространство на диске, которое необходимо поддерживать при записи временных данных, используемых для внешней сортировки и агрегации.

## min_hit_rate_to_use_consecutive_keys_optimization {#min_hit_rate_to_use_consecutive_keys_optimization}

Тип: Float

Значение по умолчанию: 0.5

Минимальный коэффициент попадания кэша, который используется для оптимизации последовательных ключей в агрегациях, чтобы сохранить его включенным.

## min_insert_block_size_bytes {#min_insert_block_size_bytes}

Тип: UInt64

Значение по умолчанию: 268402944

Устанавливает минимальное количество байтов в блоке, который может быть вставлен в таблицу с помощью запроса `INSERT`. Блоки меньшего размера объединяются в более крупные.

Возможные значения:

- Положительное целое число.
- 0 — Объединение отключено.

## min_insert_block_size_bytes_for_materialized_views {#min_insert_block_size_bytes_for_materialized_views}

Тип: UInt64

Значение по умолчанию: 0

Устанавливает минимальное количество байтов в блоке, который может быть вставлен в таблицу с помощью запроса `INSERT`. Блоки меньшего размера объединяются в более крупные. Эта настройка применяется только к блокам, вставляемым в [материализованное представление](../../sql-reference/statements/create/view.md). Настроив эту настройку, вы контролируете объединение блоков при отправке в материализованное представление и избегаете избыточного использования памяти.

Возможные значения:

- Любое положительное целое число.
- 0 — Объединение отключено.

**См. также**

- [min_insert_block_size_bytes](#min_insert_block_size_bytes)

## min_insert_block_size_rows {#min_insert_block_size_rows}

Тип: UInt64

Значение по умолчанию: 1048449

Устанавливает минимальное количество строк в блоке, который может быть вставлен в таблицу с помощью запроса `INSERT`. Блоки меньшего размера объединяются в более крупные.

Возможные значения:

- Положительное целое число.
- 0 — Объединение отключено.

## min_insert_block_size_rows_for_materialized_views {#min_insert_block_size_rows_for_materialized_views}

Тип: UInt64

Значение по умолчанию: 0

Устанавливает минимальное количество строк в блоке, который может быть вставлен в таблицу с помощью запроса `INSERT`. Блоки меньшего размера объединяются в более крупные. Эта настройка применяется только к блокам, вставляемым в [материализованное представление](../../sql-reference/statements/create/view.md). Настроив эту настройку, вы контролируете объединение блоков при отправке в материализованное представление и избегаете избыточного использования памяти.

Возможные значения:

- Любое положительное целое число.
- 0 — Объединение отключено.

**См. также**

- [min_insert_block_size_rows](#min_insert_block_size_rows)

## min_joined_block_size_bytes {#min_joined_block_size_bytes}

Тип: UInt64

Значение по умолчанию: 524288

Минимальный размер блока для результата JOIN (если алгоритм соединения это поддерживает). 0 означает неограниченность.

## mongodb_throw_on_unsupported_query {#mongodb_throw_on_unsupported_query}

Тип: Bool

Значение по умолчанию: 1

Если включено, таблицы MongoDB будут возвращать ошибку, когда запрос MongoDB не может быть построен. В противном случае ClickHouse читает всю таблицу и обрабатывает её локально. Эта опция не применяется, когда 'allow_experimental_analyzer=0'.

## move_all_conditions_to_prewhere {#move_all_conditions_to_prewhere}

Тип: Bool

Значение по умолчанию: 1

Переместить все жизнеспособные условия из WHERE в PREWHERE.

## move_primary_key_columns_to_end_of_prewhere {#move_primary_key_columns_to_end_of_prewhere}

Тип: Bool

Значение по умолчанию: 1

Переместить условия PREWHERE, содержащие колонки первичного ключа, в конец цепи AND. Вероятно, что эти условия учитываются во время анализа первичного ключа и, таким образом, не внесут большой вклад в фильтрацию PREWHERE.

## multiple_joins_try_to_keep_original_names {#multiple_joins_try_to_keep_original_names}

Тип: Bool

Значение по умолчанию: 0

Не добавлять псевдонимы в верхний уровень списков выражений при переписывании нескольких соединений.

## mutations_execute_nondeterministic_on_initiator {#mutations_execute_nondeterministic_on_initiator}

Тип: Bool

Значение по умолчанию: 0

Если значение истинно, постоянные недетерминированные функции (например, функция `now()`) выполняются на инициаторе и заменяются литералами в запросах `UPDATE` и `DELETE`. Это помогает поддерживать данные синхронизированными на репликах при выполнении мутаций с постоянными недетерминированными функциями. Значение по умолчанию: `ложь`.

## mutations_execute_subqueries_on_initiator {#mutations_execute_subqueries_on_initiator}

Тип: Bool

Значение по умолчанию: 0

Если значение истинно, скалярные подзапросы выполняются на инициаторе и заменяются литералами в запросах `UPDATE` и `DELETE`. Значение по умолчанию: `ложь`.

## mutations_max_literal_size_to_replace {#mutations_max_literal_size_to_replace}

Тип: UInt64

Значение по умолчанию: 16384

Максимальный размер сериализованного литерала в байтах, который можно заменить в запросах `UPDATE` и `DELETE`. Действует только если хотя бы одна из двух настроек выше включена. Значение по умолчанию: 16384 (16 КиБ).

## mutations_sync {#mutations_sync}

Тип: UInt64

Значение по умолчанию: 0

Разрешает выполнение запросов `ALTER TABLE ... UPDATE|DELETE|MATERIALIZE INDEX|MATERIALIZE PROJECTION|MATERIALIZE COLUMN|MATERIALIZE STATISTICS` ([мутации](../../sql-reference/statements/alter/index.md/#mutations)) синхронно.

Возможные значения:

- 0 - Мутации выполняются асинхронно.
- 1 - Запрос ожидает завершения всех мутаций на текущем сервере.
- 2 - Запрос ожидает завершения всех мутаций на всех репликах (если они существуют).

## mysql_datatypes_support_level {#mysql_datatypes_support_level}

Тип: MySQLDataTypesSupport

Значение по умолчанию: 

Определяет, как типы MySQL преобразуются в соответствующие типы ClickHouse. Список, разделенный запятыми, в любой комбинации `decimal`, `datetime64`, `date2Date32` или `date2String`.
- `decimal`: преобразовать типы `NUMERIC` и `DECIMAL` в `Decimal`, когда точность это позволяет.
- `datetime64`: преобразовать типы `DATETIME` и `TIMESTAMP` в `DateTime64` вместо `DateTime`, когда точность не равна `0`.
- `date2Date32`: преобразовать `DATE` в `Date32` вместо `Date`. Имеет приоритет над `date2String`.
- `date2String`: преобразовать `DATE` в `String` вместо `Date`. Переопределяется `datetime64`.

## mysql_map_fixed_string_to_text_in_show_columns {#mysql_map_fixed_string_to_text_in_show_columns}

Тип: Bool

Значение по умолчанию: 1

При включении тип данных [FixedString](../../sql-reference/data-types/fixedstring.md) ClickHouse будет отображаться как `TEXT` в [SHOW COLUMNS](../../sql-reference/statements/show.md/#show_columns).

Это имеет эффект только при подключении через протокол MySQL wire.

- 0 - Использовать `BLOB`.
- 1 - Использовать `TEXT`.

## mysql_map_string_to_text_in_show_columns {#mysql_map_string_to_text_in_show_columns}

Тип: Bool

Значение по умолчанию: 1

При включении тип данных [String](../../sql-reference/data-types/string.md) ClickHouse будет отображаться как `TEXT` в [SHOW COLUMNS](../../sql-reference/statements/show.md/#show_columns).

Это имеет эффект только при подключении через протокол MySQL wire.

- 0 - Использовать `BLOB`.
- 1 - Использовать `TEXT`.

## mysql_max_rows_to_insert {#mysql_max_rows_to_insert}

Тип: UInt64

Значение по умолчанию: 65536

Максимальное количество строк в пакетной вставке MySQL движка хранения.

## network_compression_method {#network_compression_method}

Тип: String

Значение по умолчанию: LZ4

Устанавливает метод сжатия данных, который используется для связи между серверами и между сервером и [clickhouse-client](../../interfaces/cli.md).

Возможные значения:

- `LZ4` — устанавливает метод сжатия LZ4.
- `ZSTD` — устанавливает метод сжатия ZSTD.

**См. также**

- [network_zstd_compression_level](#network_zstd_compression_level)

## network_zstd_compression_level {#network_zstd_compression_level}

Тип: Int64

Значение по умолчанию: 1

Настраивает уровень сжатия ZSTD. Используется только когда [network_compression_method](#network_compression_method) установлен на `ZSTD`.

Возможные значения:

- Положительное целое число от 1 до 15.

## normalize_function_names {#normalize_function_names}

Тип: Bool

Значение по умолчанию: 1

Нормализовать имена функций до их канонических имен.

## number_of_mutations_to_delay {#number_of_mutations_to_delay}

Тип: UInt64

Значение по умолчанию: 0

Если таблица с мутациями содержит хотя бы такое количество незавершенных мутаций, искусственно замедлять мутации таблицы. 0 - отключено.

## number_of_mutations_to_throw {#number_of_mutations_to_throw}

Тип: UInt64

Значение по умолчанию: 0

Если таблица с мутациями содержит хотя бы такое количество незавершенных мутаций, выбросить исключение 'Слишком много мутаций ...'. 0 - отключено.

## odbc_bridge_connection_pool_size {#odbc_bridge_connection_pool_size}

Тип: UInt64

Значение по умолчанию: 16

Размер пула соединений для каждой строки настроек соединения в ODBC мосте.

## odbc_bridge_use_connection_pooling {#odbc_bridge_use_connection_pooling}

Тип: Bool

Значение по умолчанию: 1

Использовать пул соединений в ODBC мосте. Если установлено значение false, новое соединение создается каждый раз.

## offset {#offset}

Тип: UInt64

Значение по умолчанию: 0

Устанавливает количество строк, которые нужно пропустить перед началом возвращения строк из запроса. Он корректирует смещение, установленное в пункте [OFFSET](/sql-reference/statements/select/offset), так что эти два значения суммируются.

Возможные значения:

- 0 — Строки не пропускаются.
- Положительное целое число.

**Пример**

Входная таблица:

```sql
CREATE TABLE test (i UInt64) ENGINE = MergeTree() ORDER BY i;
INSERT INTO test SELECT number FROM numbers(500);
```

Запрос:

```sql
SET limit = 5;
SET offset = 7;
SELECT * FROM test LIMIT 10 OFFSET 100;
```
Результат:

```text
┌───i─┐
│ 107 │
│ 108 │
│ 109 │
└─────┘
```

## opentelemetry_start_trace_probability {#opentelemetry_start_trace_probability}

Тип: Float

Значение по умолчанию: 0

Устанавливает вероятность того, что ClickHouse может начать трассировку для выполняемых запросов (если не предоставлен родительский [контекст трассировки](https://www.w3.org/TR/trace-context/)).

Возможные значения:

- 0 — Трассировка для всех выполняемых запросов отключена (если не предоставлен родительский контекст трассировки).
- Положительное число с плавающей запятой в диапазоне [0..1]. Например, если значение настройки равно `0.5`, ClickHouse может начать трассировку в среднем для половины запросов.
- 1 — Трассировка для всех выполняемых запросов включена.

## opentelemetry_trace_processors {#opentelemetry_trace_processors}

Тип: Bool

Значение по умолчанию: 0

Собирает открытые временные интервалы для процессоров.

## optimize_aggregation_in_order {#optimize_aggregation_in_order}

Тип: Bool

Значение по умолчанию: 0

Включает оптимизацию [GROUP BY](/sql-reference/statements/select/group-by) в запросах [SELECT](../../sql-reference/statements/select/index.md) для агрегации данных в соответствующем порядке в таблицах [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md).

Возможные значения:

- 0 — Оптимизация `GROUP BY` отключена.
- 1 — Оптимизация `GROUP BY` включена.

**См. также**

- [Оптимизация GROUP BY](/sql-reference/statements/select/group-by#group-by-optimization-depending-on-table-sorting-key)

## optimize_aggregators_of_group_by_keys {#optimize_aggregators_of_group_by_keys}

Тип: Bool

Значение по умолчанию: 1

Устраняет агрегации min/max/any/anyLast ключей GROUP BY в разделе SELECT.

## optimize_and_compare_chain {#optimize_and_compare_chain}

Тип: Bool

Значение по умолчанию: 1

Заполняет постоянное сравнение в цепочках AND для повышения способности к фильтрации. Поддерживает операторы `<`, `<=`, `>`, `>=`, `=` и их комбинации. Например, `(a < b) AND (b < c) AND (c < 5)` будет `(a < b) AND (b < c) AND (c < 5) AND (b < 5) AND (a < 5)`.

## optimize_append_index {#optimize_append_index}

Тип: Bool

Значение по умолчанию: 0

Использовать [ограничения](../../sql-reference/statements/create/table.md/#constraints) для добавления индекса условия. По умолчанию `ложь`.

Возможные значения:

- true, false

## optimize_arithmetic_operations_in_aggregate_functions {#optimize_arithmetic_operations_in_aggregate_functions}

Тип: Bool

Значение по умолчанию: 1

Перемещает арифметические операции за пределы агрегатных функций.

## optimize_count_from_files {#optimize_count_from_files}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает оптимизацию подсчета количества строк из файлов в различных входных форматах. Это применимо к табличным функциям/движкам `file`/`s3`/`url`/`hdfs`/`azureBlobStorage`.

Возможные значения:

- 0 — Оптимизация отключена.
- 1 — Оптимизация включена.

## optimize_distinct_in_order {#optimize_distinct_in_order}

Тип: Bool

Значение по умолчанию: 1

Включает оптимизацию DISTINCT, если некоторые столбцы в DISTINCT образуют префикс сортировки. Например, префикс ключа сортировки в дереве слияния или предложении ORDER BY.

## optimize_distributed_group_by_sharding_key {#optimize_distributed_group_by_sharding_key}

Тип: Bool

Значение по умолчанию: 1

Оптимизирует запросы `GROUP BY sharding_key`, избегая затратной агрегации на сервере инициаторе (что приведет к снижению использования памяти для запроса на сервере инициаторе).

Поддерживаются следующие типы запросов (и все их комбинации):

- `SELECT DISTINCT [..., ]sharding_key[, ...] FROM dist`
- `SELECT ... FROM dist GROUP BY sharding_key[, ...]`
- `SELECT ... FROM dist GROUP BY sharding_key[, ...] ORDER BY x`
- `SELECT ... FROM dist GROUP BY sharding_key[, ...] LIMIT 1`
- `SELECT ... FROM dist GROUP BY sharding_key[, ...] LIMIT 1 BY x`

Следующие типы запросов не поддерживаются (поддержка некоторых из них может быть добавлена позже):

- `SELECT ... GROUP BY sharding_key[, ...] WITH TOTALS`
- `SELECT ... GROUP BY sharding_key[, ...] WITH ROLLUP`
- `SELECT ... GROUP BY sharding_key[, ...] WITH CUBE`
- `SELECT ... GROUP BY sharding_key[, ...] SETTINGS extremes=1`

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

См. также:

- [distributed_group_by_no_merge](#distributed_group_by_no_merge)
- [distributed_push_down_limit](#distributed_push_down_limit)
- [optimize_skip_unused_shards](#optimize_skip_unused_shards)

:::note
На данный момент требуется `optimize_skip_unused_shards` (причина заключается в том, что когда-то это может быть включено по умолчанию, и оно будет работать правильно только если данные были вставлены через распределенную таблицу, т.е. данные распределены по ключу шардирования).
:::

## optimize_extract_common_expressions {#optimize_extract_common_expressions}

Тип: Bool

Значение по умолчанию: 1

Разрешить извлечение общих выражений из дизъюнкций в WHERE, PREWHERE, ON, HAVING и QUALIFY выражениях. Логическое выражение, такое как `(A AND B) OR (A AND C)`, может быть переписано как `A AND (B OR C)`, что может помочь использовать:
- индексы в простых выражениях фильтрации
- оптимизацию перекрестного внутреннего соединения.

## optimize_functions_to_subcolumns {#optimize_functions_to_subcolumns}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает оптимизацию путем преобразования некоторых функций в чтение подколонок. Это уменьшает объем данных для чтения.

Эти функции могут быть преобразованы:

- [length](/sql-reference/functions/array-functions#length) для чтения подколонки [size0](../../sql-reference/data-types/array.md/#array-size).
- [empty](/sql-reference/functions/array-functions#empty) для чтения подколонки [size0](../../sql-reference/data-types/array.md/#array-size).
- [notEmpty](/sql-reference/functions/array-functions#notempty) для чтения подколонки [size0](../../sql-reference/data-types/array.md/#array-size).
- [isNull](/sql-reference/functions/functions-for-nulls#isnull) для чтения подколонки [null](../../sql-reference/data-types/nullable.md/#finding-null).
- [isNotNull](/sql-reference/functions/functions-for-nulls#isnotnull) для чтения подколонки [null](../../sql-reference/data-types/nullable.md/#finding-null).
- [count](/sql-reference/aggregate-functions/reference/count) для чтения подколонки [null](../../sql-reference/data-types/nullable.md/#finding-null).
- [mapKeys](/sql-reference/functions/tuple-map-functions#mapkeys) для чтения подколонки [keys](../../sql-reference/data-types/map#reading-subcolumns-of-map).
- [mapValues](/sql-reference/functions/tuple-map-functions#mapvalues) для чтения подколонки [values](../../sql-reference/data-types/map#reading-subcolumns-of-map).

Возможные значения:

- 0 — Оптимизация отключена.
- 1 — Оптимизация включена.

## optimize_group_by_constant_keys {#optimize_group_by_constant_keys}

Тип: Bool

Значение по умолчанию: 1

Оптимизировать GROUP BY, когда все ключи в блоке постоянные.

## optimize_group_by_function_keys {#optimize_group_by_function_keys}

Тип: Bool

Значение по умолчанию: 1

Исключить функции других ключей в секции GROUP BY.

## optimize_if_chain_to_multiif {#optimize_if_chain_to_multiif}

Тип: Bool

Значение по умолчанию: 0

Заменять цепочки if(cond1, then1, if(cond2, ...)) на multiIf. В данный момент это не выгодно для числовых типов.

## optimize_if_transform_strings_to_enum {#optimize_if_transform_strings_to_enum}

Тип: Bool

Значение по умолчанию: 0

Заменяет аргументы строкового типа в If и Transform на enum. Отключен по умолчанию, поскольку это может привести к несогласованным изменениям в распределенном запросе, что приведет к его сбою.

## optimize_injective_functions_in_group_by {#optimize_injective_functions_in_group_by}

Тип: Bool

Значение по умолчанию: 1

Заменяет инъективные функции их аргументами в секции GROUP BY.

## optimize_injective_functions_inside_uniq {#optimize_injective_functions_inside_uniq}

Тип: Bool

Значение по умолчанию: 1

Удаляет инъективные функции одного аргумента внутри функций uniq*().

## optimize_min_equality_disjunction_chain_length {#optimize_min_equality_disjunction_chain_length}

Тип: UInt64

Значение по умолчанию: 3

Минимальная длина выражения `expr = x1 OR ... expr = xN` для оптимизации.


## optimize_min_inequality_conjunction_chain_length {#optimize_min_inequality_conjunction_chain_length}

Тип: UInt64

Значение по умолчанию: 3

Минимальная длина выражения `expr <> x1 AND ... expr <> xN` для оптимизации

## optimize_move_to_prewhere {#optimize_move_to_prewhere}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает автоматическую оптимизацию [PREWHERE](../../sql-reference/statements/select/prewhere.md) в запросах [SELECT](../../sql-reference/statements/select/index.md).

Работает только для таблиц [*MergeTree](../../engines/table-engines/mergetree-family/index.md).

Возможные значения:

- 0 — Автоматическая оптимизация `PREWHERE` отключена.
- 1 — Автоматическая оптимизация `PREWHERE` включена.

## optimize_move_to_prewhere_if_final {#optimize_move_to_prewhere_if_final}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает автоматическую оптимизацию [PREWHERE](../../sql-reference/statements/select/prewhere.md) в запросах [SELECT](../../sql-reference/statements/select/index.md) с модификатором [FINAL](/sql-reference/statements/select/from#final-modifier).

Работает только для таблиц [*MergeTree](../../engines/table-engines/mergetree-family/index.md).

Возможные значения:

- 0 — Автоматическая оптимизация `PREWHERE` в запросах `SELECT` с модификатором `FINAL` отключена.
- 1 — Автоматическая оптимизация `PREWHERE` в запросах `SELECT` с модификатором `FINAL` включена.

**Смотрите также**

- Настройка [optimize_move_to_prewhere](#optimize_move_to_prewhere)

## optimize_multiif_to_if {#optimize_multiif_to_if}

Тип: Bool

Значение по умолчанию: 1

Заменяет 'multiIf' на одну условие 'if'.

## optimize_normalize_count_variants {#optimize_normalize_count_variants}

Тип: Bool

Значение по умолчанию: 1

Переписывает агрегатные функции, которые семантически равны count(), как count().

## optimize_on_insert {#optimize_on_insert}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает преобразование данных перед вставкой, как если бы слияние было выполнено в этом блоке (в соответствии с движком таблицы).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

**Пример**

Разница между включенным и отключенным:

Запрос:

```sql
SET optimize_on_insert = 1;

CREATE TABLE test1 (`FirstTable` UInt32) ENGINE = ReplacingMergeTree ORDER BY FirstTable;

INSERT INTO test1 SELECT number % 2 FROM numbers(5);

SELECT * FROM test1;

SET optimize_on_insert = 0;

CREATE TABLE test2 (`SecondTable` UInt32) ENGINE = ReplacingMergeTree ORDER BY SecondTable;

INSERT INTO test2 SELECT number % 2 FROM numbers(5);

SELECT * FROM test2;
```

Результат:

```text
┌─FirstTable─┐
│          0 │
│          1 │
└────────────┘

┌─SecondTable─┐
│           0 │
│           0 │
│           0 │
│           1 │
│           1 │
└─────────────┘
```

Обратите внимание, что эта настройка влияет на поведение [Материализованных представлений](/sql-reference/statements/create/view#materialized-view).

## optimize_or_like_chain {#optimize_or_like_chain}

Тип: Bool

Значение по умолчанию: 0

Оптимизирует множественные OR LIKE в multiMatchAny. Эта оптимизация не должна быть включена по умолчанию, так как она противоречит анализу индекса в некоторых случаях.

## optimize_read_in_order {#optimize_read_in_order}

Тип: Bool

Значение по умолчанию: 1

Включает оптимизацию [ORDER BY](/sql-reference/statements/select/order-by#optimization-of-data-reading) в запросах [SELECT](../../sql-reference/statements/select/index.md) для чтения данных из таблиц [MergeTree](../../engines/table-engines/mergetree-family/mergetree.md).

Возможные значения:

- 0 — Оптимизация `ORDER BY` отключена.
- 1 — Оптимизация `ORDER BY` включена.

**Смотрите также**

- [Клаузула ORDER BY](/sql-reference/statements/select/order-by#optimization-of-data-reading)

## optimize_read_in_window_order {#optimize_read_in_window_order}

Тип: Bool

Значение по умолчанию: 1

Включает оптимизацию ORDER BY в оконной клаузе для чтения данных в соответствующем порядке в таблицах MergeTree.

## optimize_redundant_functions_in_order_by {#optimize_redundant_functions_in_order_by}

Тип: Bool

Значение по умолчанию: 1

Удаляет функции из ORDER BY, если их аргумент также находится в ORDER BY.

## optimize_respect_aliases {#optimize_respect_aliases}

Тип: Bool

Значение по умолчанию: 1

Если установлено в true, будет учитываться псевдонимы в WHERE/GROUP BY/ORDER BY, что поможет с обрезкой партиций/вторичными индексами/optimize_aggregation_in_order/optimize_read_in_order/optimize_trivial_count.

## optimize_rewrite_aggregate_function_with_if {#optimize_rewrite_aggregate_function_with_if}

Тип: Bool

Значение по умолчанию: 1

Переписывает агрегатные функции с выражением if в качестве аргумента, когда логически эквивалентно. Например, `avg(if(cond, col, null))` может быть переписано как `avgOrNullIf(cond, col)`. Это может улучшить производительность.

:::note
Поддерживается только с анализатором (`enable_analyzer = 1`).
:::

## optimize_rewrite_array_exists_to_has {#optimize_rewrite_array_exists_to_has}

Тип: Bool

Значение по умолчанию: 0

Переписывает функции arrayExists() в has(), когда логически эквивалентно. Например, arrayExists(x -> x = 1, arr) может быть переписано в has(arr, 1).

## optimize_rewrite_sum_if_to_count_if {#optimize_rewrite_sum_if_to_count_if}

Тип: Bool

Значение по умолчанию: 1

Переписывает функции sumIf() и sum(if()) в функции countIf(), когда логически эквивалентно.

## optimize_skip_merged_partitions {#optimize_skip_merged_partitions}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает оптимизацию для запроса [OPTIMIZE TABLE ... FINAL](../../sql-reference/statements/optimize.md), если есть только одна часть с уровнем > 0 и у нее нет устаревшего TTL.

- `OPTIMIZE TABLE ... FINAL SETTINGS optimize_skip_merged_partitions=1`

По умолчанию запрос `OPTIMIZE TABLE ... FINAL` переписывает одну часть, даже если существует только одна.

Возможные значения:

- 1 - Включить оптимизацию.
- 0 - Отключить оптимизацию.

## optimize_skip_unused_shards {#optimize_skip_unused_shards}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает пропуск неиспользуемых шардов для запросов [SELECT](../../sql-reference/statements/select/index.md), которые имеют условие ключа шардирования в `WHERE/PREWHERE` (предполагая, что данные распределены по ключу шардирования, в противном случае запрос дает неверный результат).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

## optimize_skip_unused_shards_limit {#optimize_skip_unused_shards_limit}

Тип: UInt64

Значение по умолчанию: 1000

Лимит для количества значений ключа шардирования, отключает `optimize_skip_unused_shards`, если лимит достигнут.

Слишком большое количество значений может требовать значительных ресурсов для обработки, тогда как выгода от этого сомнительна, поскольку если у вас огромное количество значений в `IN (...)`, то, скорее всего, запрос будет отправлен на все шарды в любом случае.

## optimize_skip_unused_shards_nesting {#optimize_skip_unused_shards_nesting}

Тип: UInt64

Значение по умолчанию: 0

Управляет [`optimize_skip_unused_shards`](#optimize_skip_unused_shards) (поэтому все еще требует [`optimize_skip_unused_shards`](#optimize_skip_unused_shards)), в зависимости от уровня вложенности распределенного запроса (случай, когда у вас есть таблица `Distributed`, которая смотрит в другую таблицу `Distributed`).

Возможные значения:

- 0 — Отключено, `optimize_skip_unused_shards` всегда работает.
- 1 — Включает `optimize_skip_unused_shards` только для первого уровня.
- 2 — Включает `optimize_skip_unused_shards` до второго уровня.

## optimize_skip_unused_shards_rewrite_in {#optimize_skip_unused_shards_rewrite_in}

Тип: Bool

Значение по умолчанию: 1

Переписывает IN в запросе для удаленных шардов, чтобы исключить значения, которые не принадлежат шару (требует optimize_skip_unused_shards).

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

## optimize_sorting_by_input_stream_properties {#optimize_sorting_by_input_stream_properties}

Тип: Bool

Значение по умолчанию: 1

Оптимизирует сортировку по свойствам входного потока.

## optimize_substitute_columns {#optimize_substitute_columns}

Тип: Bool

Значение по умолчанию: 0

Используйте [ограничения](../../sql-reference/statements/create/table.md/#constraints) для замены колонок. По умолчанию `false`.

Возможные значения:

- true, false

## optimize_syntax_fuse_functions {#optimize_syntax_fuse_functions}

Тип: Bool

Значение по умолчанию: 0

Включает объединение агрегатных функций с идентичными аргументами. Это переписывает запрос, содержащий как минимум две агрегатные функции из [sum](/sql-reference/aggregate-functions/reference/sum), [count](/sql-reference/aggregate-functions/reference/count) или [avg](/sql-reference/aggregate-functions/reference/avg) с одинаковыми аргументами в [sumCount](/sql-reference/aggregate-functions/reference/sumcount).

Возможные значения:

- 0 — Функции с идентичными аргументами не объединяются.
- 1 — Функции с идентичными аргументами объединяются.

**Пример**

Запрос:

```sql
CREATE TABLE fuse_tbl(a Int8, b Int8) Engine = Log;
SET optimize_syntax_fuse_functions = 1;
EXPLAIN SYNTAX SELECT sum(a), sum(b), count(b), avg(b) from fuse_tbl FORMAT TSV;
```

Результат:

```text
SELECT
    sum(a),
    sumCount(b).1,
    sumCount(b).2,
    (sumCount(b).1) / (sumCount(b).2)
FROM fuse_tbl
```

## optimize_throw_if_noop {#optimize_throw_if_noop}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает выбрасывание исключения, если запрос [OPTIMIZE](../../sql-reference/statements/optimize.md) не выполнил слияние.

По умолчанию `OPTIMIZE` возвращает результат успешно, даже если ничего не было сделано. Эта настройка позволяет вам различать эти ситуации и получить причину в сообщении исключения.

Возможные значения:

- 1 — Включено выбрасывание исключения.
- 0 — Отключено выбрасывание исключения.

## optimize_time_filter_with_preimage {#optimize_time_filter_with_preimage}

Тип: Bool

Значение по умолчанию: 1

Оптимизирует предикаты Date и DateTime, превращая функции в эквивалентные сравнения без преобразований (например, `toYear(col) = 2023 -> col >= '2023-01-01' AND col <= '2023-12-31'`).

## optimize_trivial_approximate_count_query {#optimize_trivial_approximate_count_query}

Тип: Bool

Значение по умолчанию: 0

Использует приближенное значение для тривиальной оптимизации подсчета хранилищ, которые поддерживают такую оценку, например, EmbeddedRocksDB.

Возможные значения:

   - 0 — Оптимизация отключена.
   - 1 — Оптимизация включена.

## optimize_trivial_count_query {#optimize_trivial_count_query}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает оптимизацию тривиального запроса `SELECT count() FROM table`, используя метаданные из MergeTree. Если вам необходимо использовать безопасность на уровне строк, отключите эту настройку.

Возможные значения:

   - 0 — Оптимизация отключена.
   - 1 — Оптимизация включена.

Смотрите также:

- [optimize_functions_to_subcolumns](#optimize_functions_to_subcolumns)

## optimize_trivial_insert_select {#optimize_trivial_insert_select}

Тип: Bool

Значение по умолчанию: 0

Оптимизирует тривиальный запрос 'INSERT INTO table SELECT ... FROM TABLES'.

## optimize_uniq_to_count {#optimize_uniq_to_count}

Тип: Bool

Значение по умолчанию: 1

Переписывает uniq и его варианты (кроме uniqUpTo) в функции count, если подзапрос содержит оператор distinct или клаузу group by.

## optimize_use_implicit_projections {#optimize_use_implicit_projections}

Тип: Bool

Значение по умолчанию: 1

Автоматически выбирает неявные проекции для выполнения запроса SELECT.

## optimize_use_projections {#optimize_use_projections}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает оптимизацию [проекции](../../engines/table-engines/mergetree-family/mergetree.md/#projections) при обработке запросов `SELECT`.

Возможные значения:

- 0 — Оптимизация проекции отключена.
- 1 — Оптимизация проекции включена.

## optimize_using_constraints {#optimize_using_constraints}

Тип: Bool

Значение по умолчанию: 0

Используйте [ограничения](../../sql-reference/statements/create/table.md/#constraints) для оптимизации запроса. По умолчанию `false`.

Возможные значения:

- true, false

## os_thread_priority {#os_thread_priority}

Тип: Int64

Значение по умолчанию: 0

Устанавливает приоритет ([nice](https://en.wikipedia.org/wiki/Nice_(Unix))) для потоков, выполняющих запросы. Планировщик ОС учитывает этот приоритет при выборе следующего потока для выполнения на каждом доступном ядре CPU.

:::note
Чтобы использовать эту настройку, вам нужно установить возможность `CAP_SYS_NICE`. Пакет `clickhouse-server` настраивает его во время установки. Некоторые виртуальные среды не позволяют устанавливать возможность `CAP_SYS_NICE`. В этом случае `clickhouse-server` выводит сообщение об этом в начале работы.
:::

Возможные значения:

- Вы можете установить значения в диапазоне `[-20, 19]`.

Низкие значения означают более высокий приоритет. Потоки с низкими значениями приоритета nice выполняются чаще, чем потоки с высокими значениями. Высокие значения предпочтительны для долгосрочных неинтерактивных запросов, поскольку это позволяет им быстро уступать ресурсы в пользу коротких интерактивных запросов, когда они поступают.

## output_format_compression_level {#output_format_compression_level}

Тип: UInt64

Значение по умолчанию: 3

Уровень сжатия по умолчанию, если вывод запроса сжат. Настройка применяется, когда запрос `SELECT` имеет `INTO OUTFILE` или при записи в табличные функции `file`, `url`, `hdfs`, `s3` или `azureBlobStorage`.

Возможные значения: от `1` до `22`.

## output_format_compression_zstd_window_log {#output_format_compression_zstd_window_log}

Тип: UInt64

Значение по умолчанию: 0

Может использоваться, когда метод сжатия вывода - `zstd`. Если больше `0`, эта настройка явно устанавливает размер окна сжатия (степень `2`) и включает долгосрочный режим для сжатия zstd. Это может помочь достичь лучшего коэффициента сжатия.

Возможные значения: неотрицательные числа. Обратите внимание, что если значение слишком мало или слишком велико, `zstdlib` выбросит исключение. Типичные значения находятся в диапазоне от `20` (размер окна = `1MB`) до `30` (размер окна = `1GB`).

## output_format_parallel_formatting {#output_format_parallel_formatting}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает параллельное форматирование данных. Поддерживается только для форматов [TSV](../../interfaces/formats.md/#tabseparated), [TSKV](../../interfaces/formats.md/#tskv), [CSV](../../interfaces/formats.md/#csv) и [JSONEachRow](../../interfaces/formats.md/#jsoneachrow).

Возможные значения:

- 1 — Включено.
- 0 — Отключено.

## page_cache_inject_eviction {#page_cache_inject_eviction}

Тип: Bool

Значение по умолчанию: 0

Кэш страниц пользовательского пространства иногда будет случайным образом недействительностью некоторых страниц. Предназначено для тестирования.

## parallel_distributed_insert_select {#parallel_distributed_insert_select}

Тип: UInt64

Значение по умолчанию: 0

Включает параллельный распределенный запрос `INSERT ... SELECT`.

Если мы выполняем запросы `INSERT INTO distributed_table_a SELECT ... FROM distributed_table_b`, и обе таблицы используют один и тот же кластер, и обе таблицы являются либо [реплицированными](../../engines/table-engines/mergetree-family/replication.md), либо нереплицированными, тогда этот запрос обрабатывается локально на каждом шарде.

Возможные значения:

- 0 — Отключено.
- 1 — `SELECT` будет выполняться на каждом шарде из основного таблицы распределенного движка.
- 2 — `SELECT` и `INSERT` будут выполняться на каждом шарде из/в основной таблицы распределенного движка.

## parallel_replica_offset {#parallel_replica_offset}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Это внутренняя настройка, которую не следует использовать напрямую, и она представляет собой деталь реализации режима «параллельные реплики». Эта настройка будет автоматически настроена инициатором сервера для распределенных запросов к индексу реплики, участвующей в обработке запроса среди параллельных реплик.

## parallel_replicas_allow_in_with_subquery {#parallel_replicas_allow_in_with_subquery}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 1

Если true, подзапрос для IN будет выполняться на каждой последующей реплике.

## parallel_replicas_count {#parallel_replicas_count}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Это внутренняя настройка, которую не следует использовать напрямую, и она представляет собой деталь реализации режима «параллельные реплики». Эта настройка будет автоматически настроена инициатором сервера для распределенных запросов к количеству параллельных реплик, участвующих в обработке запроса.

## parallel_replicas_custom_key {#parallel_replicas_custom_key}
<БетаМетка/>

Тип: String

Значение по умолчанию: 

Произвольное целочисленное выражение, которое можно использовать для распределения работы между репликами для конкретной таблицы. Значение может быть любым целочисленным выражением.

Предпочтительно использовать простые выражения с первичными ключами.

Если настройка используется на кластере, который состоит из одной шардой с несколькими репликами, эти реплики будут преобразованы в виртуальные шарды. В противном случае будет вести себя так же, как для ключа `SAMPLE`, будет использовать несколько реплик каждого шардирования.

## parallel_replicas_custom_key_range_lower {#parallel_replicas_custom_key_range_lower}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Позволяет фильтру типа `range` равномерно распределить работу между репликами на основе пользовательского диапазона `[parallel_replicas_custom_key_range_lower, INT_MAX]`.

При использовании вместе с [parallel_replicas_custom_key_range_upper](#parallel_replicas_custom_key_range_upper) позволяет фильтру равномерно распределить работу между репликами для диапазона `[parallel_replicas_custom_key_range_lower, parallel_replicas_custom_key_range_upper]`.

Примечание: Эта настройка не приведет к дополнительной фильтрации данных во время обработки запроса, а изменит точки, в которых диапазон фильтра разбивает диапазон `[0, INT_MAX]` для параллельной обработки.

## parallel_replicas_custom_key_range_upper {#parallel_replicas_custom_key_range_upper}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Позволяет фильтру типа `range` равномерно распределить работу между репликами на основе пользовательского диапазона `[0, parallel_replicas_custom_key_range_upper]`. Значение 0 отключает верхнюю границу, устанавливая ее на максимальное значение выражения пользовательского ключа.

При использовании вместе с [parallel_replicas_custom_key_range_lower](#parallel_replicas_custom_key_range_lower) позволяет фильтру равномерно распределить работу между репликами для диапазона `[parallel_replicas_custom_key_range_lower, parallel_replicas_custom_key_range_upper]`.

Примечание: Эта настройка не приведет к дополнительной фильтрации данных во время обработки запроса, а изменит точки, в которых диапазон фильтра разбивает диапазон `[0, INT_MAX]` для параллельной обработки.

## parallel_replicas_for_cluster_engines {#parallel_replicas_for_cluster_engines}

Тип: Bool

Значение по умолчанию: 1

Заменяет движки табличных функций их альтернативами для кластера.

## parallel_replicas_for_non_replicated_merge_tree {#parallel_replicas_for_non_replicated_merge_tree}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 0

Если true, ClickHouse будет использовать алгоритм параллельных реплик также для нереплицированных таблиц MergeTree.

## parallel_replicas_index_analysis_only_on_coordinator {#parallel_replicas_index_analysis_only_on_coordinator}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 1

Анализ индексов выполняется только на реплике-координаторе и пропускается на других репликах. Эффективно только при включенном parallel_replicas_local_plan.

## parallel_replicas_local_plan {#parallel_replicas_local_plan}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 1

Создает локальный план для локальной реплики.

## parallel_replicas_mark_segment_size {#parallel_replicas_mark_segment_size}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Части виртуально разделены на сегменты для распределения между репликами для параллельного чтения. Эта настройка управляет размером этих сегментов. Не рекомендуется изменять, пока вы не уверены в том, что делаете. Значение должно находиться в диапазоне от [128; 16384].

## parallel_replicas_min_number_of_rows_per_replica {#parallel_replicas_min_number_of_rows_per_replica}
<БетаМетка/>

Тип: UInt64

Значение по умолчанию: 0

Ограничивает количество реплик, используемых в запросе до (предполагаемое количество строк для чтения / min_number_of_rows_per_replica). Максимальное количество все еще ограничено `max_parallel_replicas`.

## parallel_replicas_mode {#parallel_replicas_mode}
<БетаМетка/>

Тип: ParallelReplicasMode

Значение по умолчанию: read_tasks

Тип фильтра, который используется с пользовательским ключом для параллельных реплик. по умолчанию - использовать операцию модификации на пользовательском ключе, диапазон - использовать фильтр диапазона на пользовательском ключе, используя все возможные значения для типа значения пользовательского ключа.

## parallel_replicas_only_with_analyzer {#parallel_replicas_only_with_analyzer}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 1

Анализатор должен быть включен для использования параллельных реплик. При отключенном анализаторе выполнение запроса возвращается к локальному выполнению, даже если параллельное чтение из реплик включено. Использование параллельных реплик без включенного анализатора не поддерживается.

## parallel_replicas_prefer_local_join {#parallel_replicas_prefer_local_join}
<БетаМетка/>

Тип: Bool

Значение по умолчанию: 1

Если true, и JOIN может быть выполнен с алгоритмом параллельных реплик, и все хранилища правой части JOIN являются *MergeTree, будет использован локальный JOIN вместо GLOBAL JOIN.

## parallel_view_processing {#parallel_view_processing}

Тип: Bool

Значение по умолчанию: 0

Включает одновременную отправку во вложенные представления вместо последовательной обработки.

## parallelize_output_from_storages {#parallelize_output_from_storages}

Тип: Bool

Значение по умолчанию: 1

Параллелизация вывода для этапа чтения из хранилища. Позволяет параллелизацию обработки запроса сразу после чтения из хранилища, если это возможно.

## parsedatetime_parse_without_leading_zeros {#parsedatetime_parse_without_leading_zeros}

Тип: Bool

Значение по умолчанию: 1

Форматтеры '%c', '%l' и '%k' в функции 'parseDateTime' парсят месяцы и часы без ведущих нулей.

## partial_merge_join_left_table_buffer_bytes {#partial_merge_join_left_table_buffer_bytes}

Тип: UInt64

Значение по умолчанию: 0

Если не 0, группирует блоки левой таблицы в более крупные блоки для левой таблицы в частичном слиянии. Использует до 2x указанных ресурсов памяти на поток объединения.

## partial_merge_join_rows_in_right_blocks {#partial_merge_join_rows_in_right_blocks}

Тип: UInt64

Значение по умолчанию: 65536

Ограничивает размеры правосторонних данных JOIN в алгоритме частичного слияния для запросов [JOIN](../../sql-reference/statements/select/join.md).

Сервер ClickHouse:

1. Разделяет правосторонние данные JOIN на блоки с максимальным количеством строк, указанным в настройках.
2. Индексирует каждый блок по его минимуму и максимуму.
3. Выгружает подготовленные блоки на диск, если это возможно.

Возможные значения:

- Любое положительное целое число. Рекомендуемый диапазон значений: \[1000, 100000\].

## partial_result_on_first_cancel {#partial_result_on_first_cancel}

Тип: Bool

Значение по умолчанию: 0

Позволяет запросу вернуть частичный результат после отмены.

## parts_to_delay_insert {#parts_to_delay_insert}

Тип: UInt64

Значение по умолчанию: 0

Если таблица назначения содержит не менее этого количества активных частей в одной партиции, искусственно замедляет вставку в таблицу.

## parts_to_throw_insert {#parts_to_throw_insert}

Тип: UInt64

Значение по умолчанию: 0

Если активных частей в одной партиции таблицы назначения больше этого числа, генерируется исключение 'Слишком много частей ...'.

## periodic_live_view_refresh {#periodic_live_view_refresh}

Тип: Seconds

Значение по умолчанию: 60

Интервал, после которого периодически обновляемый live view принудительно обновляется.

## poll_interval {#poll_interval}

Тип: UInt64

Значение по умолчанию: 10

Блокирует ожидание запроса на сервере в течение указанного количества секунд.

## postgresql_connection_attempt_timeout {#postgresql_connection_attempt_timeout}

Тип: UInt64

Значение по умолчанию: 2

Тайм-аут подключения в секундах для одной попытки подключения к точке PostgreSQL. Значение передается как параметр `connect_timeout` в URL-адресе подключения.

## postgresql_connection_pool_auto_close_connection {#postgresql_connection_pool_auto_close_connection}

Тип: Bool

Значение по умолчанию: 0

Закрывает соединение перед возвратом соединения в пул.

## postgresql_connection_pool_retries {#postgresql_connection_pool_retries}

Тип: UInt64

Значение по умолчанию: 2

Количество попыток для подключения/вытащить из пула для движка PostgreSQL и базы данных. 

## postgresql_connection_pool_size {#postgresql_connection_pool_size}

Тип: UInt64

Значение по умолчанию: 16

Размер пула соединений для движка PostgreSQL и базы данных.

## postgresql_connection_pool_wait_timeout {#postgresql_connection_pool_wait_timeout}

Тип: UInt64

Значение по умолчанию: 5000

Тайм-аут ожидания в пуле соединений для движка PostgreSQL и базы данных при пустом пуле. По умолчанию он будет блокировать при пустом пуле.

## postgresql_fault_injection_probability {#postgresql_fault_injection_probability}

Тип: Float

Значение по умолчанию: 0

Приблизительная вероятность сбоя внутренних (для репликации) запросов PostgreSQL. Допустимое значение находится в интервале [0.0f, 1.0f].

## prefer_column_name_to_alias {#prefer_column_name_to_alias}

Тип: Bool

Значение по умолчанию: 0

Включает или отключает использование оригинальных имен колонок вместо псевдонимов в выражениях и клаузах запросов. Это особенно важно, когда псевдоним совпадает с названием колонки, см. [Псевдонимы выражений](/sql-reference/syntax#notes-on-usage). Включите эту настройку, чтобы сделать правила синтаксиса псевдонимов в ClickHouse более совместимыми с большинством других систем управления базами данных.

Возможные значения:

- 0 — Имя колонки заменяется псевдонимом.
- 1 — Имя колонки не заменяется псевдонимом.

**Пример**

Разница между включенным и отключенным:

Запрос:

```sql
SET prefer_column_name_to_alias = 0;
SELECT avg(number) AS number, max(number) FROM numbers(10);
```

Результат:

```text
Получено исключение от сервера (версия 21.5.1):
Код: 184. DB::Exception: Получено от localhost:9000. DB::Exception: Агрегатная функция avg(number) найдена внутри другой агрегатной функции в запросе: При обработке avg(number) AS number.
```

Запрос:

```sql
SET prefer_column_name_to_alias = 1;
SELECT avg(number) AS number, max(number) FROM numbers(10);
```

Результат:

```text
┌─number─┬─max(number)─┐
│    4.5 │           9 │
└────────┴─────────────┘
```

## prefer_external_sort_block_bytes {#prefer_external_sort_block_bytes}

Тип: UInt64

Значение по умолчанию: 16744704

Предпочитает максимальный размер блока для внешней сортировки, снижает использование памяти во время слияния.

## prefer_global_in_and_join {#prefer_global_in_and_join}

Тип: Bool

Значение по умолчанию: 0

Включает замену операторов `IN`/`JOIN` на `GLOBAL IN`/`GLOBAL JOIN`.

Возможные значения:

- 0 — Отключено. Операторы `IN`/`JOIN` не заменяются на `GLOBAL IN`/`GLOBAL JOIN`.
- 1 — Включено. Операторы `IN`/`JOIN` заменяются на `GLOBAL IN`/`GLOBAL JOIN`.

**Использование**

Хотя `SET distributed_product_mode=global` может изменить поведение запросов для распределенных таблиц, это не подходит для локальных таблиц или таблиц из внешних источников. Здесь и проявляется настройки `prefer_global_in_and_join`.

Например, у нас есть узлы запросов, которые содержат локальные таблицы, которые не подходят для распределения. Нам нужно равномерно распределить их данные по ходу во время распределенной обработки с помощью ключевого слова `GLOBAL` — `GLOBAL IN`/`GLOBAL JOIN`.

Другой случай использования `prefer_global_in_and_join` — доступ к таблицам, созданным внешними движками. Эта настройка помогает сократить количество вызовов внешних источников во время объединения таких таблиц: только один вызов на запрос.

**Смотрите также:**

- [Распределенные подзапросы](/sql-reference/operators/in#distributed-subqueries) для получения дополнительной информации о том, как использовать `GLOBAL IN`/`GLOBAL JOIN`.

## prefer_localhost_replica {#prefer_localhost_replica}

Тип: Bool

Значение по умолчанию: 1

Включает/выключает предпочтительное использование локальной реплики при обработке распределенных запросов.

Возможные значения:

- 1 — ClickHouse всегда отправляет запрос локальной реплике, если она существует.
- 0 — ClickHouse использует стратегию балансировки, указанную в настройке [load_balancing](#load_balancing).

:::note
Отключите эту настройку, если вы используете [max_parallel_replicas](#max_parallel_replicas) без [parallel_replicas_custom_key](#parallel_replicas_custom_key).
Если [parallel_replicas_custom_key](#parallel_replicas_custom_key) установлен, отключите эту настройку только если она используется на кластере с несколькими шардированными репликами.
Если используется на кластере с одной шардой и несколькими репликами, отключение этой настройки может оказать негативное влияние.
:::

## prefer_warmed_unmerged_parts_seconds {#prefer_warmed_unmerged_parts_seconds}

<CloudAvailableBadge/>

Тип: Int64

Значение по умолчанию: 0

Эта настройка имеет значение только в ClickHouse Cloud. Если объединенная часть младше этого количества секунд и не была предварительно прогрета (см. [cache_populated_by_fetch](merge-tree-settings.md/#cache_populated_by_fetch)), но все ее исходные части доступны и предварительно прогреты, SELECT запросы будут считываться с этих частей вместо этого. Только для Replicated-/SharedMergeTree. Обратите внимание, что эта настройка проверяет только, обрабатывала ли CacheWarmer часть; если часть была загружена в кэш чем-то другим, она по-прежнему будет считаться холодной, пока CacheWarmer не доберется до нее; если она была прогрета, а затем выброшена из кэша, она все равно будет считаться теплой.

## preferred_block_size_bytes {#preferred_block_size_bytes}

Тип: UInt64

Значение по умолчанию: 1000000

Эта настройка настраивает размер блока данных для обработки запросов и представляет собой дополнительную тонкую настройку к более грубой настройке 'max_block_size'. Если колонки большие, то с 'max_block_size' строками размер блока, вероятно, будет больше, чем указанное количество байтов, его размер будет уменьшен для улучшения локальности кэша CPU.

## preferred_max_column_in_block_size_bytes {#preferred_max_column_in_block_size_bytes}

Тип: UInt64

Значение по умолчанию: 0

Ограничение на максимальный размер колонки в блоке во время чтения. Помогает уменьшить количество промахов кэша. Должно быть близко к размеру кэша L2.

## preferred_optimize_projection_name {#preferred_optimize_projection_name}

Тип: String

Значение по умолчанию: 

Если установлено не пустое значение, ClickHouse попытается применить указанную проекцию в запросе.

Возможные значения:

- строка: имя предпочтительной проекции.

## prefetch_buffer_size {#prefetch_buffer_size}

Тип: UInt64

Значение по умолчанию: 1048576

Максимальный размер буфера предзагрузки для чтения из файловой системы.
```
## print_pretty_type_names {#print_pretty_type_names}

Type: Bool

Default value: 1

Позволяет печатать имена глубоко вложенных типов красиво с отступами в запросе `DESCRIBE` и в функции `toTypeName()`.

Пример:

```sql
CREATE TABLE test (a Tuple(b String, c Tuple(d Nullable(UInt64), e Array(UInt32), f Array(Tuple(g String, h Map(String, Array(Tuple(i String, j UInt64))))), k Date), l Nullable(String))) ENGINE=Memory;
DESCRIBE TABLE test FORMAT TSVRaw SETTINGS print_pretty_type_names=1;
```

```
a   Tuple(
    b String,
    c Tuple(
        d Nullable(UInt64),
        e Array(UInt32),
        f Array(Tuple(
            g String,
            h Map(
                String,
                Array(Tuple(
                    i String,
                    j UInt64
                ))
            )
        )),
        k Date
    ),
    l Nullable(String)
)
```
## priority {#priority}

Type: UInt64

Default value: 0

Приоритет запроса. 1 - наивысший, более высокий значение - меньший приоритет; 0 - не использовать приоритеты.
## push_external_roles_in_interserver_queries {#push_external_roles_in_interserver_queries}

Type: Bool

Default value: 1

Включить передачу пользовательских ролей от инициатора к другим узлам при выполнении запроса.
## query_cache_compress_entries {#query_cache_compress_entries}

Type: Bool

Default value: 1

Сжимать записи в [кэше запросов](../query-cache.md). Уменьшает потребление памяти кэша запросов за счет более медленных вставок и чтений из него.

Возможные значения:

- 0 - Отключено
- 1 - Включено
## query_cache_max_entries {#query_cache_max_entries}

Type: UInt64

Default value: 0

Максимальное количество результатов запросов, которые текущий пользователь может хранить в [кэше запросов](../query-cache.md). 0 означает неограниченно.

Возможные значения:

- Положительное целое число >= 0.
## query_cache_max_size_in_bytes {#query_cache_max_size_in_bytes}

Type: UInt64

Default value: 0

Максимальное количество памяти (в байтах), которое текущий пользователь может выделить в [кэше запросов](../query-cache.md). 0 означает неограниченно.

Возможные значения:

- Положительное целое число >= 0.
## query_cache_min_query_duration {#query_cache_min_query_duration}

Type: Milliseconds

Default value: 0

Минимальная продолжительность в миллисекундах, в течение которой запрос должен выполняться, чтобы его результат сохранялся в [кэше запросов](../query-cache.md).

Возможные значения:

- Положительное целое число >= 0.
## query_cache_min_query_runs {#query_cache_min_query_runs}

Type: UInt64

Default value: 0

Минимальное количество раз, которое запрос `SELECT` должен выполняться, прежде чем его результат будет сохранён в [кэше запросов](../query-cache.md).

Возможные значения:

- Положительное целое число >= 0.
## query_cache_nondeterministic_function_handling {#query_cache_nondeterministic_function_handling}

Type: QueryResultCacheNondeterministicFunctionHandling

Default value: throw

Управляет тем, как [кэш запросов](../query-cache.md) обрабатывает запросы `SELECT` с недетерминированными функциями, такими как `rand()` или `now()`.

Возможные значения:

- `'throw'` - Генерировать исключение и не кэшировать результат запроса.
- `'save'` - Кэшировать результат запроса.
- `'ignore'` - Не кэшировать результат запроса и не генерировать исключение.
## query_cache_share_between_users {#query_cache_share_between_users}

Type: Bool

Default value: 0

Если включено, результат запросов `SELECT`, кэшируемый в [кэше запросов](../query-cache.md), может быть прочитан другими пользователями. 
Не рекомендуется включать эту настройку по соображениям безопасности.

Возможные значения:

- 0 - Отключено
- 1 - Включено
## query_cache_squash_partial_results {#query_cache_squash_partial_results}

Type: Bool

Default value: 1

Сжать частичные блоки результатов до блоков размера [max_block_size](#max_block_size). Уменьшает производительность вставок в [кэш запросов](../query-cache.md), но улучшает сжимаемость записей кэша (см. [query_cache_compress-entries](#query_cache_compress_entries)).

Возможные значения:

- 0 - Отключено
- 1 - Включено
## query_cache_system_table_handling {#query_cache_system_table_handling}

Type: QueryResultCacheSystemTableHandling

Default value: throw

Управляет тем, как [кэш запросов](../query-cache.md) обрабатывает запросы `SELECT` к системным таблицам, т.е. таблицам в базах данных `system.*` и `information_schema.*`.

Возможные значения:

- `'throw'` - Генерировать исключение и не кэшировать результат запроса.
- `'save'` - Кэшировать результат запроса.
- `'ignore'` - Не кэшировать результат запроса и не генерировать исключение.
## query_cache_tag {#query_cache_tag}

Type: String

Default value: 

Строка, которая действует как метка для записей [кэша запросов](../query-cache.md).
Одни и те же запросы с различными метками рассматриваются кэшем запросов как разные.

Возможные значения:

- Любая строка
## query_cache_ttl {#query_cache_ttl}

Type: Seconds

Default value: 60

После этого времени в секундах записи в [кэше запросов](../query-cache.md) становятся устаревшими.

Возможные значения:

- Положительное целое число >= 0.
## query_metric_log_interval {#query_metric_log_interval}

Type: Int64

Default value: -1

Интервал в миллисекундах, по которому собирается [query_metric_log](../../operations/system-tables/query_metric_log.md) для отдельных запросов.

Если установлено любое отрицательное значение, оно будет равно значению `collect_interval_milliseconds` из настройки [query_metric_log](/operations/server-configuration-parameters/settings#query_metric_log) или по умолчанию 1000, если оно не задано.

Чтобы отключить сбор для одного запроса, установите `query_metric_log_interval` на 0.

Default value: -1
## query_plan_aggregation_in_order {#query_plan_aggregation_in_order}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса по агрегации в порядке.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_convert_join_to_in {#query_plan_convert_join_to_in}

Type: Bool

Default value: 0

Разрешить преобразование JOIN в подзапрос с IN, если выходные колонки привязаны только к левой таблице.
## query_plan_convert_outer_join_to_inner_join {#query_plan_convert_outer_join_to_inner_join}

Type: Bool

Default value: 1

Разрешить преобразование OUTER JOIN в INNER JOIN, если фильтр после JOIN всегда фильтрует значения по умолчанию.
## query_plan_enable_multithreading_after_window_functions {#query_plan_enable_multithreading_after_window_functions}

Type: Bool

Default value: 1

Включить многопоточность после оценки оконных функций для разрешения параллельной потоковой обработки.
## query_plan_enable_optimizations {#query_plan_enable_optimizations}

Type: Bool

Default value: 1

Переключает оптимизацию запросов на уровне плана запроса.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить все оптимизации на уровне плана запроса
- 1 - Включить оптимизации на уровне плана запроса (но отдельные оптимизации могут все еще быть отключены через их индивидуальные настройки)
## query_plan_execute_functions_after_sorting {#query_plan_execute_functions_after_sorting}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая перемещает выражения после этапов сортировки.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_filter_push_down {#query_plan_filter_push_down}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая перемещает фильтры вниз в плане выполнения.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_join_shard_by_pk_ranges {#query_plan_join_shard_by_pk_ranges}

Type: Bool

Default value: 0

Применить шардирование для JOIN, если ключи соединения содержат префикс ПЕРВИЧНОГО КЛЮЧА для обеих таблиц. Поддерживается для алгоритмов hash, parallel_hash и full_sorting_merge.
## query_plan_join_swap_table {#query_plan_join_swap_table}

Type: BoolAuto

Default value: auto

    Определяет, какая сторона JOIN должна быть таблицей построения (также называемой внутренней, той, которая вставляется в хеш-таблицу для хеш-объединения) в плане запроса. Эта настройка поддерживается только для строгой JOIN ALL с предложением JOIN ON. Возможные значения:
    - 'auto': Позволить планировщику решить, какую таблицу использовать в качестве таблицы построения.
    - 'false': Никогда не менять таблицы (правая таблица является таблицей построения).
    - 'true': Всегда менять таблицы (левая таблица является таблицей построения).
## query_plan_lift_up_array_join {#query_plan_lift_up_array_join}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая перемещает ARRAY JOIN выше в плане выполнения.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_lift_up_union {#query_plan_lift_up_union}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая перемещает большие поддеревья плана запроса в объединение для разрешения дальнейших оптимизаций.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_max_limit_for_lazy_materialization {#query_plan_max_limit_for_lazy_materialization}

Type: UInt64

Default value: 10

Контролирует максимальный предел, который позволяет использовать план запроса для оптимизации ленивой материализации. Если равно нулю, ограничений нет.
## query_plan_max_optimizations_to_apply {#query_plan_max_optimizations_to_apply}

Type: UInt64

Default value: 10000

Ограничивает общее количество оптимизаций, применяемых к плану запроса, см. настройку [query_plan_enable_optimizations](#query_plan_enable_optimizations).
Полезно для избежания длительного времени оптимизации для сложных запросов.
В запросе EXPLAIN PLAN прекращается применение оптимизаций после достижения этого предела и возвращается план так, как есть.
Для обычного выполнения запроса, если фактическое количество оптимизаций превышает эту настройку, генерируется исключение.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::
## query_plan_merge_expressions {#query_plan_merge_expressions}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая объединяет последовательные фильтры.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_merge_filters {#query_plan_merge_filters}

Type: Bool

Default value: 1

Разрешить объединять фильтры в плане запроса.
## query_plan_optimize_lazy_materialization {#query_plan_optimize_lazy_materialization}

Type: Bool

Default value: 1

Использовать план запроса для оптимизации ленивой материализации.
## query_plan_optimize_prewhere {#query_plan_optimize_prewhere}

Type: Bool

Default value: 1

Разрешить перемещение фильтра в выражение PREWHERE для поддерживаемых хранилищ.
## query_plan_push_down_limit {#query_plan_push_down_limit}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая перемещает LIMIT вниз в плане выполнения.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_read_in_order {#query_plan_read_in_order}

Type: Bool

Default value: 1

Переключает оптимизацию чтения в порядке на уровне плана запроса.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_remove_redundant_distinct {#query_plan_remove_redundant_distinct}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая удаляет избыточные этапы DISTINCT.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_remove_redundant_sorting {#query_plan_remove_redundant_sorting}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая удаляет избыточные этапы сортировки, например в подзапросах.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_reuse_storage_ordering_for_window_functions {#query_plan_reuse_storage_ordering_for_window_functions}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая использует сортировку хранилища, когда сортирует для оконных функций.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_split_filter {#query_plan_split_filter}

Type: Bool

Default value: 1

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Переключает оптимизацию на уровне плана запроса, которая разбивает фильтры на выражения.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_try_use_vector_search {#query_plan_try_use_vector_search}

Type: Bool

Default value: 1

Переключает оптимизацию на уровне плана запроса, которая пытается использовать индекс векторного сходства.
Влияет только если настройка [query_plan_enable_optimizations](#query_plan_enable_optimizations) равна 1.

:::note
Это настройка для экспертов, которую следует использовать только для отладки разработчиками. Настройка может измениться в будущем обратно несовместимым образом или быть удалена.
:::

Возможные значения:

- 0 - Отключить
- 1 - Включить
## query_plan_use_new_logical_join_step {#query_plan_use_new_logical_join_step}

Type: Bool

Default value: 1

Использовать новый логический шаг соединения в плане запроса.
## query_profiler_cpu_time_period_ns {#query_profiler_cpu_time_period_ns}

Type: UInt64

Default value: 1000000000

Устанавливает период для таймера ЦПУ [профайлера запросов](../../operations/optimizing-performance/sampling-query-profiler.md). Этот таймер отсчитывает только время ЦПУ.

Возможные значения:

- Положительное целое число в наносекундах.

    Рекомендуемые значения:

            - 10000000 (100 раз в секунду) наносекунд и более для одиночных запросов.
            - 1000000000 (раз в секунду) для профилирования на уровне кластера.

- 0 для отключения таймера.

**Временно отключено в ClickHouse Cloud.**

Смотрите также:

- Системная таблица [trace_log](/operations/system-tables/trace_log)
## query_profiler_real_time_period_ns {#query_profiler_real_time_period_ns}

Type: UInt64

Default value: 1000000000

Устанавливает период для реального таймера [профайлера запросов](../../operations/optimizing-performance/sampling-query-profiler.md). Реальный таймер отсчитывает время по часам.

Возможные значения:

- Положительное целое число в наносекундах.

    Рекомендуемые значения:

            - 10000000 (100 раз в секунду) наносекунд и менее для одиночных запросов.
            - 1000000000 (раз в секунду) для профилирования на уровне кластера.

- 0 для отключения таймера.

**Временно отключено в ClickHouse Cloud.**

Смотрите также:

- Системная таблица [trace_log](/operations/system-tables/trace_log)
## queue_max_wait_ms {#queue_max_wait_ms}

Type: Milliseconds

Default value: 0

Время ожидания в очереди запросов, если количество одновременных запросов превышает максимум.
## rabbitmq_max_wait_ms {#rabbitmq_max_wait_ms}

Type: Milliseconds

Default value: 5000

Время ожидания для чтения из RabbitMQ перед повторной попыткой.
## read_backoff_max_throughput {#read_backoff_max_throughput}

Type: UInt64

Default value: 1048576

Настройки для снижения числа потоков в случае медленных чтений. Подсчитывать события, когда пропускная способность чтения меньше данного количества байт в секунду.
## read_backoff_min_concurrency {#read_backoff_min_concurrency}

Type: UInt64

Default value: 1

Настройки для попытки поддерживать минимальное количество потоков в случае медленных чтений.
## read_backoff_min_events {#read_backoff_min_events}

Type: UInt64

Default value: 2

Настройки для снижения числа потоков в случае медленных чтений. Количество событий, после которого количество потоков будет уменьшено.
## read_backoff_min_interval_between_events_ms {#read_backoff_min_interval_between_events_ms}

Type: Milliseconds

Default value: 1000

Настройки для снижения числа потоков в случае медленных чтений. Не обращать внимания на событие, если предыдущее прошло менее определенного времени.
## read_backoff_min_latency_ms {#read_backoff_min_latency_ms}

Type: Milliseconds

Default value: 1000

Настройки для снижения числа потоков в случае медленных чтений. Обращать внимание только на чтения, которые заняли как минимум столько времени.
## read_from_filesystem_cache_if_exists_otherwise_bypass_cache {#read_from_filesystem_cache_if_exists_otherwise_bypass_cache}

Type: Bool

Default value: 0

Разрешить использовать кэш файловой системы в пассивном режиме - получать выгоду от существующих записей кэша, но не добавлять больше записей в кэш. Если вы установите эту настройку для тяжелых запросов ad-hoc и оставите её отключенной для коротких запросов в реальном времени, это поможет избежать тряски кэша от слишком тяжелых запросов и повысит общую эффективность системы.
## read_from_page_cache_if_exists_otherwise_bypass_cache {#read_from_page_cache_if_exists_otherwise_bypass_cache}

Type: Bool

Default value: 0

Использовать кэш страниц пользовательского пространства в пассивном режиме, аналогично read_from_filesystem_cache_if_exists_otherwise_bypass_cache.
## read_in_order_two_level_merge_threshold {#read_in_order_two_level_merge_threshold}

Type: UInt64

Default value: 100

Минимальное количество частей для чтения, чтобы выполнить предварительный шаг слияния во время многопоточного чтения в порядке первичного ключа.
## read_in_order_use_buffering {#read_in_order_use_buffering}

Type: Bool

Default value: 1

Использовать буферизацию перед слиянием при чтении в порядке первичного ключа. Это увеличивает параллелизм выполнения запроса.
## read_in_order_use_virtual_row {#read_in_order_use_virtual_row}

Type: Bool

Default value: 0

Использовать виртуальную строку при чтении в порядке первичного ключа или его монотонной функции. Это полезно при поиске по нескольким частям, поскольку затрагиваются только релевантные.
## read_overflow_mode {#read_overflow_mode}

Type: OverflowMode

Default value: throw

Что делать, когда предел превышен.
## read_overflow_mode_leaf {#read_overflow_mode_leaf}

Type: OverflowMode

Default value: throw

Устанавливает, что происходит, когда объем прочитанных данных превышает один из предельных значений.

Возможные варианты:
- `throw`: выдать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат.
## read_priority {#read_priority}

Type: Int64

Default value: 0

Приоритет на чтение данных из локальной файловой системы или удаленной файловой системы. Поддерживается только для метода 'pread_threadpool' для локальной файловой системы и для метода `threadpool` для удаленной файловой системы.
## read_through_distributed_cache {#read_through_distributed_cache}

<CloudAvailableBadge/>

Type: Bool

Default value: 0

Влияет только в ClickHouse Cloud. Разрешить чтение из распределенного кэша.
## readonly {#readonly}

Type: UInt64

Default value: 0

0 - нет ограничений на чтение. 1 - только запросы на чтение, а также изменение явно разрешенных настроек. 2 - только запросы на чтение, а также изменение настроек, кроме настройки 'readonly'.
## receive_data_timeout_ms {#receive_data_timeout_ms}

Type: Milliseconds

Default value: 2000

Тайм-аут соединения для получения первого пакета данных или пакета с положительным прогрессом от реплики.
## receive_timeout {#receive_timeout}

Type: Seconds

Default value: 300

Тайм-аут для получения данных из сети, в секундах. Если в этом интервале не были получены байты, выбрасывается исключение. Если вы установите эту настройку на клиенте, тайм-аут 'send_timeout' для сокета также будет установлен на соответствующем конце соединения на сервере.
## regexp_max_matches_per_row {#regexp_max_matches_per_row}

Type: UInt64

Default value: 1000

Устанавливает максимальное количество совпадений для одного регулярного выражения на строку. Используйте это для защиты от перегрузки памяти при использовании жадного регулярного выражения в функции [extractAllGroupsHorizontal](/sql-reference/functions/string-search-functions#extractallgroupshorizontal).

Возможные значения:

- Положительное целое число.
## reject_expensive_hyperscan_regexps {#reject_expensive_hyperscan_regexps}

Type: Bool

Default value: 1

Отклонять шаблоны, которые, вероятно, будут дорогими для оценки с hyperscan (из-за взрывного состояния NFA).
## remerge_sort_lowered_memory_bytes_ratio {#remerge_sort_lowered_memory_bytes_ratio}

Type: Float

Default value: 2

Если использование памяти после повторного слияния не было снижено в этом соотношении, повторное слияние будет отключено.
## remote_filesystem_read_method {#remote_filesystem_read_method}

Type: String

Default value: threadpool

Метод чтения данных из удаленной файловой системы, один из: read, threadpool.
## remote_filesystem_read_prefetch {#remote_filesystem_read_prefetch}

Type: Bool

Default value: 1

Должен ли использоваться предзагрузчик при чтении данных из удаленной файловой системы.
## remote_fs_read_backoff_max_tries {#remote_fs_read_backoff_max_tries}

Type: UInt64

Default value: 5

Максимальное количество попыток чтения с откатом.
## remote_fs_read_max_backoff_ms {#remote_fs_read_max_backoff_ms}

Type: UInt64

Default value: 10000

Максимальное время ожидания при попытке прочитать данные с удаленного диска.
## remote_read_min_bytes_for_seek {#remote_read_min_bytes_for_seek}

Type: UInt64

Default value: 4194304

Минимальное количество байт, необходимых для удаленного чтения (url, s3), чтобы выполнить поиск, а не прочитать с игнорированием.
## rename_files_after_processing {#rename_files_after_processing}

Type: String

Default value: 

- **Type:** String

- **Default value:** Пустая строка

Эта настройка позволяет указать шаблон переименования для файлов, обрабатываемых функцией таблицы `file`. Когда параметр установлен, все файлы, прочитанные функцией таблицы `file`, будут переименованы в соответствии с заданным шаблоном с заполнителями, только в случае успешной обработки файлов.
### Заполнители

- `%a` — Полное оригинальное имя файла (например, "sample.csv").
- `%f` — Оригинальное имя файла без расширения (например, "sample").
- `%e` — Оригинальное расширение файла с точкой (например, ".csv").
- `%t` — Метка времени (в микросекундах).
- `%%` — Знак процента ("%").
### Пример
- Параметр: `--rename_files_after_processing="processed_%f_%t%e"`

- Запрос: `SELECT * FROM file('sample.csv')`

Если чтение `sample.csv` прошло успешно, файл будет переименован в `processed_sample_1683473210851438.csv`.
## replace_running_query {#replace_running_query}

Type: Bool

Default value: 0

При использовании HTTP интерфейса можно передать параметр 'query_id'. Это любая строка, которая служит идентификатором запроса.
Если в это время уже существует запрос от того же пользователя с тем же 'query_id', поведение зависит от параметра 'replace_running_query'.

`0` (по умолчанию) – Сгенерировать исключение (не разрешать выполнение запроса, если запрос с тем же 'query_id' уже выполняется).

`1` – Отменить старый запрос и начать выполнение нового.

Установите этот параметр на 1 для реализации предложений для условий сегментации. После ввода следующего символа, если старый запрос ещё не завершён, он должен быть отменен.
## replace_running_query_max_wait_ms {#replace_running_query_max_wait_ms}

Type: Milliseconds

Default value: 5000

Время ожидания завершения запроса с тем же 'query_id', когда активна настройка [replace_running_query](#replace_running_query).

Возможные значения:

- Положительное целое число.
- 0 — Генерация исключения, которое не позволяет выполнять новый запрос, если сервер уже выполняет запрос с тем же 'query_id'.
## replication_wait_for_inactive_replica_timeout {#replication_wait_for_inactive_replica_timeout}

Type: Int64

Default value: 120

Указывает, как долго (в секундах) ждать неактивные реплики, чтобы выполнить запросы [ALTER](../../sql-reference/statements/alter/index.md), [OPTIMIZE](../../sql-reference/statements/optimize.md) или [TRUNCATE](../../sql-reference/statements/truncate.md).

Возможные значения:

- 0 — Не ждать.
- Отрицательное целое число — Ждать неограниченное время.
- Положительное целое число — Количество секунд ожидания.
## restore_replace_external_dictionary_source_to_null {#restore_replace_external_dictionary_source_to_null}

Type: Bool

Default value: 0

Заменять источники внешних словарей на Null при восстановлении. Полезно для целей тестирования.
## restore_replace_external_engines_to_null {#restore_replace_external_engines_to_null}

Type: Bool

Default value: 0

Для целей тестирования. Заменяет все внешние движки на Null, чтобы не инициировать внешние соединения.
## restore_replace_external_table_functions_to_null {#restore_replace_external_table_functions_to_null}

Type: Bool

Default value: 0

Для целей тестирования. Заменяет все внешние функции таблиц на Null, чтобы не инициировать внешние соединения.
## restore_replicated_merge_tree_to_shared_merge_tree {#restore_replicated_merge_tree_to_shared_merge_tree}

Type: Bool

Default value: 0

Заменять движок таблицы с Replicated*MergeTree на Shared*MergeTree во время ВОССТАНОВЛЕНИЯ.
## result_overflow_mode {#result_overflow_mode}

Type: OverflowMode

Default value: throw

Cloud default value: `throw`

Устанавливает, что делать, если объем результата превышает одно из ограничений.

Возможные значения:
- `throw`: выбрасывать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат, как если бы
           исходные данные исчерпались.

Использование 'break' аналогично использованию LIMIT. `Break` прерывает выполнение только на уровне блока. Это означает, что количество возвращаемых строк больше чем
[`max_result_rows`](/operations/settings/settings#max_result_rows), кратно [`max_block_size`](/operations/settings/settings#max_block_size)
и зависит от [`max_threads`](/operations/settings/settings#max_threads).

**Пример**

```sql title="Запрос"
SET max_threads = 3, max_block_size = 3333;
SET max_result_rows = 3334, result_overflow_mode = 'break';

SELECT *
FROM numbers_mt(100000)
FORMAT Null;
```

```text title="Результат"
6666 строк в наборе. ...
```
## rewrite_count_distinct_if_with_count_distinct_implementation {#rewrite_count_distinct_if_with_count_distinct_implementation}

Type: Bool

Default value: 0

Разрешает переписывать `countDistinctIf` с настройкой [count_distinct_implementation](#count_distinct_implementation).

Возможные значения:

- true — Разрешить.
- false — Запретить.
## s3_allow_multipart_copy {#s3_allow_multipart_copy}

Type: Bool

Default value: 1

Разрешить многочастичное копирование в S3.
## s3_allow_parallel_part_upload {#s3_allow_parallel_part_upload}

Type: Bool

Default value: 1

Использовать несколько потоков для многочастичной загрузки в S3. Это может привести к незначительному увеличению использования памяти.
## s3_check_objects_after_upload {#s3_check_objects_after_upload}

Type: Bool

Default value: 0

Проверять каждый загруженный объект в S3 с помощью запроса HEAD, чтобы убедиться, что загрузка прошла успешно.
## s3_connect_timeout_ms {#s3_connect_timeout_ms}

Type: UInt64

Default value: 1000

Тайм-аут соединения для хоста с дисков S3.
## s3_create_new_file_on_insert {#s3_create_new_file_on_insert}

Type: Bool

Default value: 0

Включает или отключает создание нового файла при каждом вставке в таблицы движка S3. Если включено, при каждой вставке создается новый объект S3 с ключом, похожим на этот шаблон:

начальный: `data.Parquet.gz` -> `data.1.Parquet.gz` -> `data.2.Parquet.gz` и т.д.

Возможные значения:
- 0 — запрос `INSERT` создает новый файл или завершится ошибкой, если файл существует и s3_truncate_on_insert не установлен.
- 1 — запрос `INSERT` создает новый файл при каждой вставке с использованием суффикса (со второго) при условии, что s3_truncate_on_insert не установлен.

Смотрите больше деталей [здесь](/integrations/s3#inserting-data).
```yaml
title: 'Конфигурационные параметры S3'
sidebar_label: 'Конфигурационные параметры S3'
keywords:
  - 's3'
  - 'конфигурация'
  - 'параметры'
description: 'Настройки для интеграции ClickHouse с S3.'
```

## s3_disable_checksum {#s3_disable_checksum}

Type: Bool

Default value: 0

Не рассчитывать контрольную сумму при отправке файла в S3. Это ускоряет записи, избегая избыточных обработок файла. Обычно это безопасно, так как данные таблиц MergeTree в любом случае проверяются ClickHouse, а когда S3 доступен через HTTPS, уровень TLS уже обеспечивает целостность при передаче по сети. Хотя дополнительные контрольные суммы на S3 обеспечивают защиту в глубину.

## s3_ignore_file_doesnt_exist {#s3_ignore_file_doesnt_exist}

Type: Bool

Default value: 0

Игнорировать отсутствие файла, если он не существует при чтении определенных ключей.

Possible values:
- 1 — `SELECT` возвращает пустой результат.
- 0 — `SELECT` генерирует исключение.

## s3_list_object_keys_size {#s3_list_object_keys_size}

Type: UInt64

Default value: 1000

Максимальное количество файлов, которые могут быть возвращены за один раз запросом ListObject.

## s3_max_connections {#s3_max_connections}

Type: UInt64

Default value: 1024

Максимальное количество соединений на сервер.

## s3_max_get_burst {#s3_max_get_burst}

Type: UInt64

Default value: 0

Максимальное количество запросов, которые могут быть сделаны одновременно, прежде чем будет достигнут лимит запросов в секунду. По умолчанию (0) равно `s3_max_get_rps`.

## s3_max_get_rps {#s3_max_get_rps}

Type: UInt64

Default value: 0

Лимит на количество S3 GET запросов в секунду до ограничения. Ноль означает безлимитный.

## s3_max_inflight_parts_for_one_file {#s3_max_inflight_parts_for_one_file}

Type: UInt64

Default value: 20

Максимальное количество одновременно загружаемых частей в запросе многокомпонентной загрузки. 0 означает безлимитный.

## s3_max_part_number {#s3_max_part_number}

Type: UInt64

Default value: 10000

Максимальный номер части для загрузки s3.

## s3_max_put_burst {#s3_max_put_burst}

Type: UInt64

Default value: 0

Максимальное количество запросов, которые могут быть сделаны одновременно, прежде чем будет достигнут лимит запросов в секунду. По умолчанию (0) равно `s3_max_put_rps`.

## s3_max_put_rps {#s3_max_put_rps}

Type: UInt64

Default value: 0

Лимит на количество S3 PUT запросов в секунду до ограничения. Ноль означает безлимитный.

## s3_max_redirects {#s3_max_redirects}

Type: UInt64

Default value: 10

Максимальное количество редиректов S3, разрешенных.

## s3_max_single_operation_copy_size {#s3_max_single_operation_copy_size}

Type: UInt64

Default value: 33554432

Максимальный размер для копирования в одно действие в s3. Этот параметр используется только если s3_allow_multipart_copy равно true.

## s3_max_single_part_upload_size {#s3_max_single_part_upload_size}

Type: UInt64

Default value: 33554432

Максимальный размер объекта для загрузки с использованием одночастевой загрузки в S3.

## s3_max_single_read_retries {#s3_max_single_read_retries}

Type: UInt64

Default value: 4

Максимальное количество повторов во время одного чтения S3.

## s3_max_unexpected_write_error_retries {#s3_max_unexpected_write_error_retries}

Type: UInt64

Default value: 4

Максимальное количество повторов в случае неожиданных ошибок во время записи S3.

## s3_max_upload_part_size {#s3_max_upload_part_size}

Type: UInt64

Default value: 5368709120

Максимальный размер части для загрузки во время многокомпонентной загрузки в S3.

## s3_min_upload_part_size {#s3_min_upload_part_size}

Type: UInt64

Default value: 16777216

Минимальный размер части для загрузки во время многокомпонентной загрузки в S3.

## s3_request_timeout_ms {#s3_request_timeout_ms}

Type: UInt64

Default value: 30000

Тайм-аут ожидания для отправки и получения данных с S3. Ошибка при блокировке одного вызова TCP чтения или записи на это время.

## s3_retry_attempts {#s3_retry_attempts}

Type: UInt64

Default value: 100

Настройка для Aws::Client::RetryStrategy, Aws::Client выполняет повторы самостоятельно, 0 означает без повторов.

## s3_skip_empty_files {#s3_skip_empty_files}

Type: Bool

Default value: 1

Включает или отключает пропуск пустых файлов в таблицах движка [S3](../../engines/table-engines/integrations/s3.md).

Possible values:
- 0 — `SELECT` генерирует исключение, если пустой файл несовместим с запрашиваемым форматом.
- 1 — `SELECT` возвращает пустой результат для пустого файла.

## s3_strict_upload_part_size {#s3_strict_upload_part_size}

Type: UInt64

Default value: 0

Точный размер части для загрузки во время многокомпонентной загрузки в S3 (некоторые реализации не поддерживают части переменного размера).

## s3_throw_on_zero_files_match {#s3_throw_on_zero_files_match}

Type: Bool

Default value: 0

Генерировать ошибку, когда запрос ListObjects не может найти соответствующих файлов.

## s3_truncate_on_insert {#s3_truncate_on_insert}

Type: Bool

Default value: 0

Включает или отключает усечение перед вставками в таблицы движка S3. Если отключено, будет сгенерировано исключение при попытке вставки, если объект S3 уже существует.

Possible values:
- 0 — `INSERT` запрос создает новый файл или завершается ошибкой, если файл существует и s3_create_new_file_on_insert не установлен.
- 1 — `INSERT` запрос заменяет существующее содержимое файла новыми данными.

Смотрите больше деталей [здесь](/integrations/s3#inserting-data).

## s3_upload_part_size_multiply_factor {#s3_upload_part_size_multiply_factor}

Type: UInt64

Default value: 2

Умножает s3_min_upload_part_size на этот коэффициент каждый раз, когда s3_upload_part_size_multiply_parts_count_threshold частей загружено из одной записи в S3.

## s3_upload_part_size_multiply_parts_count_threshold {#s3_upload_part_size_multiply_parts_count_threshold}

Type: UInt64

Default value: 500

Каждый раз, когда это количество частей загружается в S3, s3_min_upload_part_size умножается на s3_upload_part_size_multiply_factor.

## s3_use_adaptive_timeouts {#s3_use_adaptive_timeouts}

Type: Bool

Default value: 1

Когда установлено в `true`, для всех запросов S3 первые две попытки выполняются с низкими тайм-аутами отправки и получения. Когда установлено в `false`, все попытки выполняются с идентичными тайм-аутами.

## s3_validate_request_settings {#s3_validate_request_settings}

Type: Bool

Default value: 1

Включает проверку настроек запроса S3.

Possible values:
- 1 — проверка настроек.
- 0 — не проверять настройки.

## s3queue_default_zookeeper_path {#s3queue_default_zookeeper_path}

Type: String

Default value: /clickhouse/s3queue/

Предоставляет префикс путей зодия по умолчанию для движка S3Queue.

## s3queue_enable_logging_to_s3queue_log {#s3queue_enable_logging_to_s3queue_log}

Type: Bool

Default value: 0

Включить запись в system.s3queue_log. Значение может быть переопределено для каждой таблицы с помощью настроек таблицы.

## s3queue_migrate_old_metadata_to_buckets {#s3queue_migrate_old_metadata_to_buckets}

Type: Bool

Default value: 0

Миграция старой структуры метаданных таблицы S3Queue на новую.

## schema_inference_cache_require_modification_time_for_url {#schema_inference_cache_require_modification_time_for_url}

Type: Bool

Default value: 1

Использовать схему из кэша для URL с верификацией времени последнего изменения (для URL с заголовком Last-Modified).

## schema_inference_use_cache_for_azure {#schema_inference_use_cache_for_azure}

Type: Bool

Default value: 1

Использовать кэш при выводе схемы при использовании табличной функции azure.

## schema_inference_use_cache_for_file {#schema_inference_use_cache_for_file}

Type: Bool

Default value: 1

Использовать кэш при выводе схемы при использовании табличной функции file.

## schema_inference_use_cache_for_hdfs {#schema_inference_use_cache_for_hdfs}

Type: Bool

Default value: 1

Использовать кэш при выводе схемы при использовании табличной функции hdfs.

## schema_inference_use_cache_for_s3 {#schema_inference_use_cache_for_s3}

Type: Bool

Default value: 1

Использовать кэш при выводе схемы при использовании табличной функции s3.

## schema_inference_use_cache_for_url {#schema_inference_use_cache_for_url}

Type: Bool

Default value: 1

Использовать кэш при выводе схемы при использовании табличной функции url.

## select_sequential_consistency {#select_sequential_consistency}

Type: UInt64

Default value: 0

:::note
Этот параметр отличается в поведении между SharedMergeTree и ReplicatedMergeTree. Смотрите [Консистентность SharedMergeTree](/cloud/reference/shared-merge-tree#consistency) для получения дополнительной информации о поведении `select_sequential_consistency` в SharedMergeTree.
:::

Включает или отключает последовательную консистентность для `SELECT` запросов. Требует отключения `insert_quorum_parallel` (по умолчанию включен).

Possible values:

- 0 — Отключено.
- 1 — Включено.

Usage

Когда последовательная консистентность включена, ClickHouse позволяет клиенту выполнять `SELECT` запрос только для тех реплик, которые содержат данные от всех предыдущих `INSERT` запросов, выполненных с `insert_quorum`. Если клиент ссылается на частичную реплику, ClickHouse сгенерирует исключение. Запрос SELECT не будет включать данные, которые еще не были записаны в кворум реплик.

Когда `insert_quorum_parallel` включен (по умолчанию), `select_sequential_consistency` не работает. Это связано с тем, что параллельные `INSERT` запросы могут записываться в разные наборы квотированных реплик, поэтому нет гарантии, что одна реплика получит все записи.

Смотрите также:

- [insert_quorum](#insert_quorum)
- [insert_quorum_timeout](#insert_quorum_timeout)
- [insert_quorum_parallel](#insert_quorum_parallel)

## send_logs_level {#send_logs_level}

Type: LogsLevel

Default value: fatal

Отправляет текстовые логи сервера с указанным минимальным уровнем клиенту. Допустимые значения: 'trace', 'debug', 'information', 'warning', 'error', 'fatal', 'none'.

## send_logs_source_regexp {#send_logs_source_regexp}

Type: String

Default value: 

Отправляет текстовые логи сервера с указанным регулярным выражением для сопоставления имени источника логов. Пустое значение означает все источники.

## send_progress_in_http_headers {#send_progress_in_http_headers}

Type: Bool

Default value: 0

Включает или отключает заголовки HTTP ответа `X-ClickHouse-Progress` в ответах `clickhouse-server`.

Для получения дополнительной информации читайте [описание HTTP интерфейса](../../interfaces/http.md).

Possible values:

- 0 — Отключено.
- 1 — Включено.

## send_timeout {#send_timeout}

Type: Seconds

Default value: 300

Тайм-аут для отправки данных в сеть, в секундах. Если клиенту нужно отправить какие-либо данные, но он не может отправить ни одного байта в этот интервал, будет сгенерировано исключение. Если вы установите эту настройку на стороне клиента, также будет установлено значение `receive_timeout` для сокета на соответствующем соединении на сервере.

## session_timezone {#session_timezone}
<BetaBadge/>

Type: Timezone

Default value: 

Устанавливает неявную временную зону текущей сессии или запроса. Неявная временная зона применяется к значениям типов DateTime/DateTime64, у которых не указана явная временная зона. Этот параметр имеет приоритет над глобально настроенной (на уровне сервера) неявной временной зоной. Пустое значение ('' (пустая строка)) означает, что неявная временная зона текущей сессии или запроса равна [временной зоне сервера](../server-configuration-parameters/settings.md/#timezone).

Вы можете использовать функции `timeZone()` и `serverTimeZone()` для получения временной зоны сессии и временной зоны сервера.

Possible values:

-    любое имя временной зоны из `system.time_zones`, например, `Europe/Berlin`, `UTC` или `Zulu`.

Примеры:

```sql
SELECT timeZone(), serverTimeZone() FORMAT CSV

"Europe/Berlin","Europe/Berlin"
```

```sql
SELECT timeZone(), serverTimeZone() SETTINGS session_timezone = 'Asia/Novosibirsk' FORMAT CSV

"Asia/Novosibirsk","Europe/Berlin"
```

Назначение временной зоны сессии 'America/Denver' для внутреннего DateTime без явно указанной временной зоны:

```sql
SELECT toDateTime64(toDateTime64('1999-12-12 23:23:23.123', 3), 3, 'Europe/Zurich') SETTINGS session_timezone = 'America/Denver' FORMAT TSV

1999-12-13 07:23:23.123
```

:::warning
Не все функции, которые разбирают DateTime/DateTime64, учитывают `session_timezone`. Это может привести к неочевидным ошибкам. Смотрите следующий пример и объяснение.
:::

```sql
CREATE TABLE test_tz (`d` DateTime('UTC')) ENGINE = Memory AS SELECT toDateTime('2000-01-01 00:00:00', 'UTC');

SELECT *, timeZone() FROM test_tz WHERE d = toDateTime('2000-01-01 00:00:00') SETTINGS session_timezone = 'Asia/Novosibirsk'
0 rows in set.

SELECT *, timeZone() FROM test_tz WHERE d = '2000-01-01 00:00:00' SETTINGS session_timezone = 'Asia/Novosibirsk'
┌───────────────────d─┬─timeZone()───────┐
│ 2000-01-01 00:00:00 │ Asia/Novosibirsk │
└─────────────────────┴──────────────────┘
```

Это происходит из-за различных механизмов разбора:

- `toDateTime()` без явно заданной временной зоны, используемый в первом запросе `SELECT`, уважает настройку `session_timezone` и глобальную временную зону.
- Во втором запросе DateTime разбирается из строки и наследует тип и временную зону существующей колонки `d`. Таким образом, установка `session_timezone` и глобальной временной зоны не учитываются.

**Смотрите также**

- [timezone](../server-configuration-parameters/settings.md/#timezone)

## set_overflow_mode {#set_overflow_mode}

Type: OverflowMode

Default value: throw

Устанавливает, что происходит, когда количество данных превышает один из лимитов.

Possible values:
- `throw`: генерировать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат, как если бы исходные данные закончились.

## shared_merge_tree_sync_parts_on_partition_operations {#shared_merge_tree_sync_parts_on_partition_operations}

Type: Bool

Default value: 1

Автоматически синхронизировать набор частей данных после операций MOVE|REPLACE|ATTACH партиции в SMT таблицах. Только для облака.

## short_circuit_function_evaluation {#short_circuit_function_evaluation}

Type: ShortCircuitFunctionEvaluation

Default value: enable

Позволяет вычислять функции [if](../../sql-reference/functions/conditional-functions.md/#if), [multiIf](../../sql-reference/functions/conditional-functions.md/#multiif), [and](/sql-reference/functions/logical-functions#and) и [or](/sql-reference/functions/logical-functions#or) по [схеме короткого замыкания](https://en.wikipedia.org/wiki/Short-circuit_evaluation). Это помогает оптимизировать выполнение сложных выражений в этих функциях и предотвращает возможные исключения (например, деление на ноль, когда это не ожидается).

Possible values:

- `enable` — Включает оценку функции с коротким замыканием для функций, которые подходят для этого (могут вызывать исключение или быть ресурсоемкими).
- `force_enable` — Включает оценку функции с коротким замыканием для всех функций.
- `disable` — Отключает оценку функции с коротким замыканием.

## short_circuit_function_evaluation_for_nulls {#short_circuit_function_evaluation_for_nulls}

Type: Bool

Default value: 1

Оптимизирует оценку функций, которые возвращают NULL, когда любой аргумент равен NULL. Когда процент значений NULL в аргументах функции превышает short_circuit_function_evaluation_for_nulls_threshold, система пропускает оценку функции по строкам. Вместо этого она сразу возвращает NULL для всех строк, избегая ненужных вычислений.

## short_circuit_function_evaluation_for_nulls_threshold {#short_circuit_function_evaluation_for_nulls_threshold}

Type: Double

Default value: 1

Порог соотношения значений NULL для выполнения функций с аргументами Nullable только для строк с ненулевыми значениями во всех аргументах. Применяется, когда установка short_circuit_function_evaluation_for_nulls включена. Когда соотношение строк, содержащих значения NULL, к общему количеству строк превышает этот порог, эти строки, содержащие значения NULL, не будут оцениваться.

## show_table_uuid_in_table_create_query_if_not_nil {#show_table_uuid_in_table_create_query_if_not_nil}

Type: Bool

Default value: 0

Устанавливает отображение запроса `SHOW TABLE`.

Possible values:

- 0 — Запрос будет отображен без UUID таблицы.
- 1 — Запрос будет отображен с UUID таблицы.

## single_join_prefer_left_table {#single_join_prefer_left_table}

Type: Bool

Default value: 1

Для одиночного JOIN в случае неоднозначности идентификатора предпочтение отдается левой таблице.

## skip_redundant_aliases_in_udf {#skip_redundant_aliases_in_udf}

Type: Bool

Default value: 0

Избыточные псевдонимы не используются (заменяются) в пользовательских функциях для упрощения их использования.

Possible values:

- 1 — Псевдонимы пропускаются (заменяются) в UDF.
- 0 — Псевдонимы не пропускаются (заменяются) в UDF.

**Пример**

Разница между включенным и отключенным:

Запрос:

```sql
SET skip_redundant_aliases_in_udf = 0;
CREATE FUNCTION IF NOT EXISTS test_03274 AS ( x ) -> ((x + 1 as y, y + 2));

EXPLAIN SYNTAX SELECT test_03274(4 + 2);
```

Результат:

```text
SELECT ((4 + 2) + 1 AS y, y + 2)
```

Запрос:

```sql
SET skip_redundant_aliases_in_udf = 1;
CREATE FUNCTION IF NOT EXISTS test_03274 AS ( x ) -> ((x + 1 as y, y + 2));

EXPLAIN SYNTAX SELECT test_03274(4 + 2);
```

Результат:

```text
SELECT ((4 + 2) + 1, ((4 + 2) + 1) + 2)
```

## skip_unavailable_shards {#skip_unavailable_shards}

Type: Bool

Default value: 0

Включает или отключает тихое пропускание недоступных шардов.

Шард считается недоступным, если все его реплики недоступны. Реплика недоступна в следующих случаях:

- ClickHouse не может подключиться к реплике по какой-либо причине.

    При подключении к реплике ClickHouse выполняет несколько попыток. Если все эти попытки не удались, реплика считается недоступной.

- Реплика не может быть разрешена через DNS.

    Если имя хоста реплики не может быть разрешено через DNS, это может указывать на следующие ситуации:

    - У реплики нет DNS-записи. Это может произойти в системах с динамическим DNS, например, [Kubernetes](https://kubernetes.io), где узлы могут быть неразрешимыми во время простоя, и это не является ошибкой.

    - Ошибка конфигурации. Файл конфигурации ClickHouse содержит неправильное имя хоста.

Possible values:

- 1 — пропуск включен.

    Если шард недоступен, ClickHouse возвращает результат на основе частичных данных и не сообщает о проблемах с доступностью узлов.

- 0 — пропуск отключен.

    Если шард недоступен, ClickHouse генерирует исключение.

## sleep_after_receiving_query_ms {#sleep_after_receiving_query_ms}

Type: Milliseconds

Default value: 0

Время для ожидания после получения запроса в TCPHandler.

## sleep_in_send_data_ms {#sleep_in_send_data_ms}

Type: Milliseconds

Default value: 0

Время для ожидания при отправке данных в TCPHandler.

## sleep_in_send_tables_status_ms {#sleep_in_send_tables_status_ms}

Type: Milliseconds

Default value: 0

Время для ожидания при отправке статуса таблиц в ответе TCPHandler.

## sort_overflow_mode {#sort_overflow_mode}

Type: OverflowMode

Default value: throw

Устанавливает, что происходит, если количество строк, полученных до сортировки, превышает один из лимитов.

Possible values:
- `throw`: генерировать исключение.
- `break`: остановить выполнение запроса и вернуть частичный результат.

## split_intersecting_parts_ranges_into_layers_final {#split_intersecting_parts_ranges_into_layers_final}

Type: Bool

Default value: 1

Разделение пересекающихся диапазонов частей на слои во время финальной оптимизации.

## split_parts_ranges_into_intersecting_and_non_intersecting_final {#split_parts_ranges_into_intersecting_and_non_intersecting_final}

Type: Bool

Default value: 1

Разделение диапазонов частей на пересекающиеся и непересекающиеся во время финальной оптимизации.

## splitby_max_substrings_includes_remaining_string {#splitby_max_substrings_includes_remaining_string}

Type: Bool

Default value: 0

Управляет тем, будет ли функция [splitBy*()](../../sql-reference/functions/splitting-merging-functions.md) с аргументом `max_substrings` > 0 включать оставшуюся строку в последний элемент результирующего массива.

Possible values:

- `0` - Оставшаяся строка не будет включена в последний элемент результирующего массива.
- `1` - Оставшаяся строка будет включена в последний элемент результирующего массива. Это поведение функции Spark's [`split()`](https://spark.apache.org/docs/3.1.2/api/python/reference/api/pyspark.sql.functions.split.html) и метода Python ['string.split()'](https://docs.python.org/3/library/stdtypes.html#str.split).

## stop_refreshable_materialized_views_on_startup {#stop_refreshable_materialized_views_on_startup}
<ExperimentalBadge/>

Type: Bool

Default value: 0

При запуске сервера предотвращает планирование обновляемых материализованных представлений, как если бы с помощью SYSTEM STOP VIEWS. Вы можете вручную запустить их с помощью `SYSTEM START VIEWS` или `SYSTEM START VIEW <name>` после этого. Также применяется к вновь созданным представлениям. Не влияет на не обновляемые материализованные представления.

## storage_file_read_method {#storage_file_read_method}

Type: LocalFSReadMethod

Default value: pread

Метод чтения данных из файла хранилища: один из: `read`, `pread`, `mmap`. Метод mmap не применяется к clickhouse-server (он предназначен для clickhouse-local).

## storage_system_stack_trace_pipe_read_timeout_ms {#storage_system_stack_trace_pipe_read_timeout_ms}

Type: Milliseconds

Default value: 100

Максимальное время для чтения из трубки для получения информации от потоков при запросе таблицы `system.stack_trace`. Этот параметр используется для тестирования и не предназначен для изменения пользователями.

## stream_flush_interval_ms {#stream_flush_interval_ms}

Type: Milliseconds

Default value: 7500

Работает для таблиц с потоковой передачей в случае таймаута или когда поток генерирует [max_insert_block_size](#max_insert_block_size) строк.

Значение по умолчанию — 7500.

Чем меньше значение, тем чаще данные сбрасываются в таблицу. Слишком низкое значение приводит к плохой производительности.

## stream_like_engine_allow_direct_select {#stream_like_engine_allow_direct_select}

Type: Bool

Default value: 0

Разрешает прямой запрос SELECT для Kafka, RabbitMQ, FileLog, Redis Streams и NATS движков. В случае, если прикреплены материализованные представления, запрос SELECT не разрешен, даже если эта настройка включена.

## stream_like_engine_insert_queue {#stream_like_engine_insert_queue}

Type: String

Default value: 

Когда потокоподобный движок читает из нескольких очередей, пользователю нужно будет выбрать одну очередь для вставки при записи. Используется Redis Streams и NATS.

## stream_poll_timeout_ms {#stream_poll_timeout_ms}

Type: Milliseconds

Default value: 500

Тайм-аут для опроса данных из/в потоковые хранилища.

## system_events_show_zero_values {#system_events_show_zero_values}

Type: Bool

Default value: 0

Позволяет выбирать события с нулевыми значениями из [`system.events`](../../operations/system-tables/events.md).

Некоторые системы мониторинга требуют передачи всех значений метрик для каждой контрольной точки, даже если значение метрики равно нулю.

Possible values:

- 0 — Отключено.
- 1 — Включено.

**Примеры**

Запрос

```sql
SELECT * FROM system.events WHERE event='QueryMemoryLimitExceeded';
```

Результат

```text
Ok.
```

Запрос
```sql
SET system_events_show_zero_values = 1;
SELECT * FROM system.events WHERE event='QueryMemoryLimitExceeded';
```

Результат

```text
┌─event────────────────────┬─value─┬─description───────────────────────────────────────────┐
│ QueryMemoryLimitExceeded │     0 │ Количество раз, когда превышен лимит памяти для запроса. │
└──────────────────────────┴───────┴───────────────────────────────────────────────────────┘
```

## table_function_remote_max_addresses {#table_function_remote_max_addresses}

Type: UInt64

Default value: 1000

Устанавливает максимальное количество адресов, сгенерированных из шаблонов для функции [remote](../../sql-reference/table-functions/remote.md).

Possible values:

- Положительное целое число.

## tcp_keep_alive_timeout {#tcp_keep_alive_timeout}

Type: Seconds

Default value: 290

Время в секундах, которое соединение должно оставаться неактивным, прежде чем TCP начнет отправлять прозвонки (keepalive probes).

## temporary_data_in_cache_reserve_space_wait_lock_timeout_milliseconds {#temporary_data_in_cache_reserve_space_wait_lock_timeout_milliseconds}

Type: UInt64

Default value: 600000

Время ожидания блокировки кэша для резервирования места для временных данных в файловом кэше.

## temporary_files_codec {#temporary_files_codec}

Type: String

Default value: LZ4

Устанавливает кодек сжатия для временных файлов, используемых при операциях сортировки и объединения на диске.

Possible values:

- LZ4 — применяется сжатие [LZ4](https://en.wikipedia.org/wiki/LZ4_(compression_algorithm)).
- NONE — сжатие не применяется.

## throw_if_deduplication_in_dependent_materialized_views_enabled_with_async_insert {#throw_if_deduplication_in_dependent_materialized_views_enabled_with_async_insert}

Type: Bool

Default value: 1

Генерирует исключение на запрос INSERT, если параметр `deduplicate_blocks_in_dependent_materialized_views` включен вместе с `async_insert`. Это гарантирует корректность, так как эти функции не могут работать вместе.

## throw_if_no_data_to_insert {#throw_if_no_data_to_insert}

Type: Bool

Default value: 1

Разрешает или запрещает пустые INSERT, включено по умолчанию (выдает ошибку при пустой вставке). Применяется только к INSERT, использующим [`clickhouse-client`](/interfaces/cli) или интерфейс [gRPC](/interfaces/grpc).

## throw_on_error_from_cache_on_write_operations {#throw_on_error_from_cache_on_write_operations}

Type: Bool

Default value: 0

Игнорировать ошибки от кэша при кэшировании операций записи (INSERT, слияния).

## throw_on_max_partitions_per_insert_block {#throw_on_max_partitions_per_insert_block}

Type: Bool

Default value: 1

Позволяет контролировать поведение при достижении `max_partitions_per_insert_block`.

Possible values:
- `true`  — Когда блок вставки достигает `max_partitions_per_insert_block`, возникает исключение.
- `false` — Логирует предупреждение при достижении `max_partitions_per_insert_block`.

:::tip
Это может быть полезно, если вы пытаетесь понять влияние на пользователей при изменении [`max_partitions_per_insert_block`](/operations/settings/settings#max_partitions_per_insert_block).
:::

## throw_on_unsupported_query_inside_transaction {#throw_on_unsupported_query_inside_transaction}
<ExperimentalBadge/>

Type: Bool

Default value: 1

Генерирует исключение, если в транзакции используется неподдерживаемый запрос.

## timeout_before_checking_execution_speed {#timeout_before_checking_execution_speed}

Type: Seconds

Default value: 10

Проверяет, что скорость выполнения не слишком медленная (не менее `min_execution_speed`), после истечения указанного времени в секундах.

## timeout_overflow_mode {#timeout_overflow_mode}

Type: OverflowMode

Default value: throw

Устанавливает, что делать, если запрос выполняется дольше, чем `max_execution_time` или предполагаемое время выполнения дольше, чем `max_estimated_execution_time`.

Possible values:
- `throw`: генерировать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат, как если бы исходные данные закончились.

## timeout_overflow_mode_leaf {#timeout_overflow_mode_leaf}

Type: OverflowMode

Default value: throw

Устанавливает, что происходит, когда запрос в листовом узле выполняется дольше, чем `max_execution_time_leaf`.

Possible values:
- `throw`: генерировать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат, как если бы исходные данные закончились.

## totals_auto_threshold {#totals_auto_threshold}

Type: Float

Default value: 0.5

Порог для `totals_mode = 'auto'`.
Смотрите раздел "Модификатор WITH TOTALS".

## totals_mode {#totals_mode}

Type: TotalsMode

Default value: after_having_exclusive

Как рассчитывать TOTALS, когда присутствует HAVING, а также когда max_rows_to_group_by и group_by_overflow_mode = 'any' присутствуют.
Смотрите раздел "Модификатор WITH TOTALS".

## trace_profile_events {#trace_profile_events}

Type: Bool

Default value: 0

Включает или отключает сбор трассировок стека при каждом обновлении профиля событий вместе с именем события профиля и значением инкремента, отправляемыми в [trace_log](/operations/system-tables/trace_log).

Possible values:

- 1 — Включена трассировка событий профиля.
- 0 — Трассировка событий профиля отключена.

## transfer_overflow_mode {#transfer_overflow_mode}

Type: OverflowMode

Default value: throw

Устанавливает, что происходит, когда количество данных превышает один из лимитов.

Possible values:
- `throw`: генерировать исключение (по умолчанию).
- `break`: остановить выполнение запроса и вернуть частичный результат, как если бы исходные данные закончились.

## transform_null_in {#transform_null_in}

Type: Bool

Default value: 0

Включает равенство значений [NULL](/sql-reference/syntax#null) для оператора [IN](../../sql-reference/operators/in.md).

По умолчанию `NULL` значений не могут быть сравнены, потому что `NULL` означает неопределенное значение. Таким образом, сравнение `expr = NULL` всегда должно возвращать `false`. С этой настройкой `NULL = NULL` возвращает `true` для оператора IN.

Possible values:

- 0 — Сравнение значений `NULL` в операторе `IN` возвращает `false`.
- 1 — Сравнение значений `NULL` в операторе `IN` возвращает `true`.

**Пример**

Рассмотрим таблицу `null_in`:

```text
┌──idx─┬─────i─┐
│    1 │     1 │
│    2 │  NULL │
│    3 │     3 │
└──────┴───────┘
```

Запрос:

```sql
SELECT idx, i FROM null_in WHERE i IN (1, NULL) SETTINGS transform_null_in = 0;
```

Результат:

```text
┌──idx─┬────i─┐
│    1 │    1 │
└──────┴──────┘
```

Запрос:

```sql
SELECT idx, i FROM null_in WHERE i IN (1, NULL) SETTINGS transform_null_in = 1;
```

Результат:

```text
┌──idx─┬─────i─┐
│    1 │     1 │
│    2 │  NULL │
└──────┴───────┘
```

**Смотрите также**

- [Обработка NULL в операторах IN](/sql-reference/operators/in#null-processing)

## traverse_shadow_remote_data_paths {#traverse_shadow_remote_data_paths}

Type: Bool

Default value: 0

Перемещение по замороженным данным (директория затенения) в дополнение к фактическим данным таблицы при запросе system.remote_data_paths.

## union_default_mode {#union_default_mode}

Type: SetOperationMode

Default value: 

Устанавливает режим для объединения результатов запросов `SELECT`. Этот параметр используется только тогда, когда используется совместно с [UNION](../../sql-reference/statements/select/union.md) без явного указания `UNION ALL` или `UNION DISTINCT`.

Possible values:

- `'DISTINCT'` — ClickHouse выводит строки в качестве результата объединения запросов, удаляя дубликаты.
- `'ALL'` — ClickHouse выводит все строки в качестве результата объединения запросов, включая дубли.
- `''` — ClickHouse генерирует исключение при использовании с `UNION`.

Смотрите примеры в [UNION](../../sql-reference/statements/select/union.md).

## unknown_packet_in_send_data {#unknown_packet_in_send_data}

Type: UInt64

Default value: 0

Отправить неизвестный пакет вместо N-го пакета данных.
```
## use_async_executor_for_materialized_views {#use_async_executor_for_materialized_views}

Тип: Bool

Значение по умолчанию: 0

Использует асинхронное и потенциально многопоточное выполнение запросов к материализованным представлениям, что может ускорить обработку представлений во время INSERT, но также потребляет больше памяти.

## use_cache_for_count_from_files {#use_cache_for_count_from_files}

Тип: Bool

Значение по умолчанию: 1

Включает кэширование числа строк во время подсчета из файлов в табличных функциях `file`/`s3`/`url`/`hdfs`/`azureBlobStorage`.

Включено по умолчанию.

## use_client_time_zone {#use_client_time_zone}

Тип: Bool

Значение по умолчанию: 0

Использует клиентский часовой пояс для интерпретации строковых значений DateTime, вместо того, чтобы адаптироваться к часовому поясу сервера.

## use_compact_format_in_distributed_parts_names {#use_compact_format_in_distributed_parts_names}

Тип: Bool

Значение по умолчанию: 1

Использует компактный формат для хранения блоков для фонового (`distributed_foreground_insert`) INSERT в таблицы с движком `Distributed`.

Возможные значения:

- 0 — Использует формат директории `user[:password]@host:port#default_database`.
- 1 — Использует формат директории `[shard{shard_index}[_replica{replica_index}]]`.

:::note
- при `use_compact_format_in_distributed_parts_names=0` изменения из определения кластера не будут применены для фонового INSERT.
- при `use_compact_format_in_distributed_parts_names=1` изменение порядка узлов в определении кластера изменит `shard_index`/`replica_index`, так что будьте внимательны.
:::

## use_concurrency_control {#use_concurrency_control}

Тип: Bool

Значение по умолчанию: 1

Учитывает контроль параллелизма сервера (см. глобальные настройки сервера `concurrent_threads_soft_limit_num` и `concurrent_threads_soft_limit_ratio_to_cores`). Если отключен, разрешает использовать большее количество потоков, даже если сервер перегружен (не рекомендуется для обычного использования, необходимо в основном для тестов).

## use_hedged_requests {#use_hedged_requests}

Тип: Bool

Значение по умолчанию: 1

Включает логику хеджированных запросов для удаленных запросов. Позволяет устанавливать множество соединений с разными репликами для запроса.
Новое соединение включается, если существующие соединения с репликами не были установлены в течение `hedged_connection_timeout`
или данные не были получены в течение `receive_data_timeout`. Запрос использует первое соединение, которое отправляет непустой пакет прогресса (или пакет данных, если `allow_changing_replica_until_first_data_packet`);
другие соединения отменяются. Запросы с `max_parallel_replicas > 1` поддерживаются.

Включено по умолчанию.

Отключено по умолчанию в Cloud.

## use_hive_partitioning {#use_hive_partitioning}

Тип: Bool

Значение по умолчанию: 1

При включении, ClickHouse будет обнаруживать партиционирование в стиле Hive в пути (`/name=value/`) в таблицах с файловыми движками [File](/sql-reference/table-functions/file#hive-style-partitioning)/[S3](/sql-reference/table-functions/s3#hive-style-partitioning)/[URL](/sql-reference/table-functions/url#hive-style-partitioning)/[HDFS](/sql-reference/table-functions/hdfs#hive-style-partitioning)/[AzureBlobStorage](/sql-reference/table-functions/azureBlobStorage#hive-style-partitioning) и позволит использовать партиционные столбцы как виртуальные колонны в запросе. Эти виртуальные колонны будут иметь такие же имена, как в партиционированном пути, но начинаются с `_`.

## use_iceberg_partition_pruning {#use_iceberg_partition_pruning}

Тип: Bool

Значение по умолчанию: 0

Использует обрезку партиций Iceberg для таблиц Iceberg.

## use_index_for_in_with_subqueries {#use_index_for_in_with_subqueries}

Тип: Bool

Значение по умолчанию: 1

Пытается использовать индекс, если на правой стороне оператора IN есть подзапрос или табличное выражение.

## use_index_for_in_with_subqueries_max_values {#use_index_for_in_with_subqueries_max_values}

Тип: UInt64

Значение по умолчанию: 0

Максимальный размер множества на правой стороне оператора IN, для которого следует использовать табличный индекс для фильтрации. Это позволяет избежать ухудшения производительности и увеличенного использования памяти из-за подготовки дополнительных структур данных для больших запросов. Ноль означает отсутствие ограничения.

## use_json_alias_for_old_object_type {#use_json_alias_for_old_object_type}

Тип: Bool

Значение по умолчанию: 0

При включении, будет использоваться псевдоним типа `JSON` для создания старого типа [Object('json')](../../sql-reference/data-types/json.md) вместо нового [JSON](../../sql-reference/data-types/newjson.md) типа.

## use_page_cache_for_disks_without_file_cache {#use_page_cache_for_disks_without_file_cache}

Тип: Bool

Значение по умолчанию: 0

Использует кэш страниц пользовательского пространства для удаленных дисков, у которых не включен кэш файловой системы.

## use_page_cache_with_distributed_cache {#use_page_cache_with_distributed_cache}

Тип: Bool

Значение по умолчанию: 0

Использует кэш страниц пользовательского пространства, когда используется распределенный кэш.

## use_query_cache {#use_query_cache}

Тип: Bool

Значение по умолчанию: 0

Если включено, запросы `SELECT` могут использовать [кэш запросов](../query-cache.md). Параметры [enable_reads_from_query_cache](#enable_reads_from_query_cache)
и [enable_writes_to_query_cache](#enable_writes_to_query_cache) контролируют более подробно, как используется кэш.

Возможные значения:

- 0 - Отключено
- 1 - Включено

## use_query_condition_cache {#use_query_condition_cache}

Тип: Bool

Значение по умолчанию: 0

Включает [кэш условия запроса](/operations/query-condition-cache). Кэш хранит диапазоны гранул в частях данных, которые не удовлетворяют условию в операторе `WHERE`,
и повторно использует эту информацию в качестве эфемерного индекса для последующих запросов.

Возможные значения:

- 0 - Отключено
- 1 - Включено

## use_skip_indexes {#use_skip_indexes}

Тип: Bool

Значение по умолчанию: 1

Использует индексы пропуска данных во время выполнения запросов.

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

## use_skip_indexes_if_final {#use_skip_indexes_if_final}

Тип: Bool

Значение по умолчанию: 0

Управляет тем, используются ли индексы пропуска при выполнении запроса с модификатором FINAL.

По умолчанию эта настройка отключена, поскольку индексы пропуска могут исключать строки (гранулы), содержащие последние данные, что может привести к неправильным результатам. При включении индексы пропуска применяются даже с модификатором FINAL, потенциально улучшая производительность, но с риском пропустить последние обновления.

Возможные значения:

- 0 — Отключено.
- 1 — Включено.

## use_structure_from_insertion_table_in_table_functions {#use_structure_from_insertion_table_in_table_functions}

Тип: UInt64

Значение по умолчанию: 2

Использует структуру из таблицы вставки вместо вывода схемы из данных. Возможные значения: 0 - отключено, 1 - включено, 2 - авто.

## use_uncompressed_cache {#use_uncompressed_cache}

Тип: Bool

Значение по умолчанию: 0

Использовать ли кэш не сжатых блоков. Принимает 0 или 1. По умолчанию 0 (отключено).
Использование незжатого кэша (только для таблиц в семействе MergeTree) может значительно сократить задержки и повысить пропускную способность при работе с большим количеством коротких запросов. Включите эту настройку для пользователей, которые отправляют частые короткие запросы. Также обратите внимание на параметр конфигурации [uncompressed_cache_size](/operations/server-configuration-parameters/settings#uncompressed_cache_size) (устанавливается только в файле конфигурации) – размер блоков незжатого кэша. По умолчанию 8 GiB. Незжатый кэш заполняется по мере необходимости, и наименее используемые данные автоматически удаляются.

Для запросов, которые читают хотя бы несколько больших объемов данных (один миллион строк и более), незжатый кэш автоматически отключается, чтобы сохранить место для действительно малых запросов. Это означает, что вы можете оставить настройку 'use_uncompressed_cache' всегда установленной в значение 1.

## use_variant_as_common_type {#use_variant_as_common_type}

Тип: Bool

Значение по умолчанию: 0

Позволяет использовать тип `Variant` в качестве типа результата для функций [if](../../sql-reference/functions/conditional-functions.md/#if)/[multiIf](../../sql-reference/functions/conditional-functions.md/#multiif)/[array](../../sql-reference/functions/array-functions.md)/[map](../../sql-reference/functions/tuple-map-functions.md), когда для типов аргументов нет общего типа.

Пример:

```sql
SET use_variant_as_common_type = 1;
SELECT toTypeName(if(number % 2, number, range(number))) as variant_type FROM numbers(1);
SELECT if(number % 2, number, range(number)) as variant FROM numbers(5);
```

```text
┌─variant_type───────────────────┐
│ Variant(Array(UInt64), UInt64) │
└────────────────────────────────┘
┌─variant───┐
│ []        │
│ 1         │
│ [0,1]     │
│ 3         │
│ [0,1,2,3] │
└───────────┘
```

```sql
SET use_variant_as_common_type = 1;
SELECT toTypeName(multiIf((number % 4) = 0, 42, (number % 4) = 1, [1, 2, 3], (number % 4) = 2, 'Hello, World!', NULL)) AS variant_type FROM numbers(1);
SELECT multiIf((number % 4) = 0, 42, (number % 4) = 1, [1, 2, 3], (number % 4) = 2, 'Hello, World!', NULL) AS variant FROM numbers(4);
```

```text
─variant_type─────────────────────────┐
│ Variant(Array(UInt8), String, UInt8) │
└──────────────────────────────────────┘

┌─variant───────┐
│ 42            │
│ [1,2,3]       │
│ Hello, World! │
│ ᴺᵁᴸᴸ          │
└───────────────┘
```

```sql
SET use_variant_as_common_type = 1;
SELECT toTypeName(array(range(number), number, 'str_' || toString(number))) as array_of_variants_type from numbers(1);
SELECT array(range(number), number, 'str_' || toString(number)) as array_of_variants FROM numbers(3);
```

```text
┌─array_of_variants_type────────────────────────┐
│ Array(Variant(Array(UInt64), String, UInt64)) │
└───────────────────────────────────────────────┘

┌─array_of_variants─┐
│ [[],0,'str_0']    │
│ [[0],1,'str_1']   │
│ [[0,1],2,'str_2'] │
└───────────────────┘
```

```sql
SET use_variant_as_common_type = 1;
SELECT toTypeName(map('a', range(number), 'b', number, 'c', 'str_' || toString(number))) as map_of_variants_type from numbers(1);
SELECT map('a', range(number), 'b', number, 'c', 'str_' || toString(number)) as map_of_variants FROM numbers(3);
```

```text
┌─map_of_variants_type────────────────────────────────┐
│ Map(String, Variant(Array(UInt64), String, UInt64)) │
└─────────────────────────────────────────────────────┘

┌─map_of_variants───────────────┐
│ {'a':[],'b':0,'c':'str_0'}    │
│ {'a':[0],'b':1,'c':'str_1'}   │
│ {'a':[0,1],'b':2,'c':'str_2'} │
└───────────────────────────────┘
```

## use_with_fill_by_sorting_prefix {#use_with_fill_by_sorting_prefix}

Тип: Bool

Значение по умолчанию: 1

Столбцы, предшествующие колоннам WITH FILL в предложении ORDER BY, формируют префикс сортировки. Строки с разными значениями в префиксе сортировки заполняются независимо.

## validate_enum_literals_in_operators {#validate_enum_literals_in_operators}

Тип: Bool

Значение по умолчанию: 0

Если включено, проверяет литералы перечислений в операторах, таких как `IN`, `NOT IN`, `==`, `!=`, на соответствие типу перечисления и выбрасывает исключение, если литерал не является допустимым значением перечисления.

## validate_mutation_query {#validate_mutation_query}

Тип: Bool

Значение по умолчанию: 1

Проверяет запросы мутаций перед их принятием. Мутации выполняются в фоновом режиме, и выполнение неверного запроса приведет к тому, что мутации застрянут, требуя ручного вмешательства.

Изменяйте эту настройку только если вы столкнулись с несовместимой с предыдущими версиями ошибкой.

## validate_polygons {#validate_polygons}

Тип: Bool

Значение по умолчанию: 1

Включает или отключает выброс исключения в функции [pointInPolygon](/sql-reference/functions/geo/coordinates#pointinpolygon), если полигон является само пересекающимся или само касающимся.

Возможные значения:

- 0 — Выброс исключения отключен. `pointInPolygon` принимает недопустимые полигоны и возвращает возможно неправильные результаты для них.
- 1 — Выброс исключения включен.

## wait_changes_become_visible_after_commit_mode {#wait_changes_become_visible_after_commit_mode}
<ExperimentalBadge/>

Тип: TransactionsWaitCSNMode

Значение по умолчанию: wait_unknown

Ожидание видимости зафиксированных изменений в последнем снимке.

## wait_for_async_insert {#wait_for_async_insert}

Тип: Bool

Значение по умолчанию: 1

Если установлено в true, ждет завершения обработки асинхронной вставки.

## wait_for_async_insert_timeout {#wait_for_async_insert_timeout}

Тип: Seconds

Значение по умолчанию: 120

Таймаут на ожидание обработки асинхронной вставки.

## wait_for_window_view_fire_signal_timeout {#wait_for_window_view_fire_signal_timeout}
<ExperimentalBadge/>

Тип: Seconds

Значение по умолчанию: 10

Таймаут ожидания сигнала срабатывания оконного представления при обработке событий времени.

## window_view_clean_interval {#window_view_clean_interval}
<ExperimentalBadge/>

Тип: Seconds

Значение по умолчанию: 60

Интервал очистки оконного представления в секундах для освобождения устаревших данных.

## window_view_heartbeat_interval {#window_view_heartbeat_interval}
<ExperimentalBadge/>

Тип: Seconds

Значение по умолчанию: 15

Интервал между "сердцебиениями" в секундах для индикации того, что запрос наблюдения активен.

## workload {#workload}

Тип: String

Значение по умолчанию: default

Имя рабочей нагрузки, используемой для доступа к ресурсам.

## write_through_distributed_cache {#write_through_distributed_cache}

<CloudAvailableBadge/>

Тип: Bool

Значение по умолчанию: 0

Влияет только в ClickHouse Cloud. Позволяет записывать в распределенный кэш (запись в s3 также будет производиться через распределенный кэш).

## zstd_window_log_max {#zstd_window_log_max}

Тип: Int64

Значение по умолчанию: 0

Позволяет задать максимальный лог окна ZSTD (он не будет использоваться для семейства MergeTree).
