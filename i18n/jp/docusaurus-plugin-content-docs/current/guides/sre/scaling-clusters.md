---
'slug': '/guides/sre/scaling-clusters'
'sidebar_label': 'シャードの再バランス'
'sidebar_position': 20
'description': 'ClickHouseは自動的なシャードの再バランスをサポートしていませんので、シャードの再バランス方法についていくつかのベストプラクティスを提供しています。'
'title': 'データの再バランス'
---




# データの再バランス

ClickHouseは自動シャード再バランスをサポートしていません。ただし、シャードを再バランスする方法はいくつかあります。優先順位は以下の通りです。

1. [分散テーブル](/engines/table-engines/special/distributed.md) のシャードを調整し、新しいシャードに書き込みが偏るようにします。これにより、クラスター内で負荷の不均衡やホットスポットが発生する可能性がありますが、書き込みスループットが極端に高くないシナリオでは実行可能です。ユーザーが書き込みターゲットを変更する必要はなく、分散テーブルのままにしておくことができます。この方法は既存のデータの再バランスには役立ちません。

2. (1)の代替として、既存のクラスターを変更し、新しいシャードに専用で書き込むことを通じてクラスターをバランスさせます - 手動で書き込みの重み付けを行います。これには(1)と同じ制限があります。

3. 既存のデータを再バランスする必要があり、データをパーティション分割している場合は、パーティションを切り離し、手動で別のノードに移動させてから新しいシャードに再接続することを検討してください。これは次の技術よりも手動作業が多くなりますが、より速く、リソースの消費が少ないかもしれません。この操作は手動で行うため、データの再バランスを考慮する必要があります。

4. [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select)を通じて、ソースクラスターから新しいクラスターにデータをエクスポートします。これは非常に大きなデータセットに対しては性能が良くなく、ソースクラスターに対してはかなりのIOが発生し、 considerableなネットワークリソースを使用する可能性があります。これは最後の手段を示しています。
