---
sidebar_label: 'Ключи'
title: 'Ключи'
slug: /cloud/manage/api/keys-api-reference
description: 'Документация по API облака для ключей'
---

## Получить список всех ключей

Возвращает список всех ключей в организации.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/keys` |

### Запрос

#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 


### Ответ

#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID API ключа. | 
| name | string | Имя ключа | 
| state | string | Состояние ключа: 'enabled', 'disabled'. | 
| roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| keySuffix | string | Последние 4 буквы ключа. | 
| createdAt | date-time | Время создания ключа. ISO-8601. | 
| expireAt | date-time | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| usedAt | date-time | Время последнего использования ключа. Если нет, ключ никогда не использовался. ISO-8601. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 


#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "state": "string",
  "roles": "Array",
  "keySuffix": "string",
  "createdAt": "date-time",
  "expireAt": "date-time",
  "usedAt": "date-time",
  "ipAccessList": "Array"
}
```

## Создать ключ

Создает новый API ключ.

| Метод | Путь |
| :----- | :--- |
| POST | `/v1/organizations/{organizationId}/keys` |

### Запрос

#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, которая будет владеть ключом. | 

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Имя ключа. | 
| expireAt | string | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| state | string | Начальное состояние ключа: 'enabled', 'disabled'. Если не предоставлено, новый ключ будет 'enabled'. | 
| hashData |  |  | 
| roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 

### Ответ

#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| key.id | uuid | Уникальный ID API ключа. | 
| key.name | string | Имя ключа | 
| key.state | string | Состояние ключа: 'enabled', 'disabled'. | 
| key.roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| key.keySuffix | string | Последние 4 буквы ключа. | 
| key.createdAt | date-time | Время создания ключа. ISO-8601. | 
| key.expireAt | date-time | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| key.usedAt | date-time | Время последнего использования ключа. Если нет, ключ никогда не использовался. ISO-8601. | 
| key.ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 
| keyId | string | Сгенерированный ID ключа. Предоставляется только если в запросе отсутствует 'hashData'. | 
| keySecret | string | Сгенерированный секрет ключа. Предоставляется только если в запросе отсутствует 'hashData'. | 


#### Пример ответа

```
{
  "key": {
    "id": "uuid",
    "name": "string",
    "state": "string",
    "roles": "Array",
    "keySuffix": "string",
    "createdAt": "date-time",
    "expireAt": "date-time",
    "usedAt": "date-time",
    "ipAccessList": "Array"
  },
  "keyId": "string",
  "keySecret": "string"
}
```

## Получить детали ключа

Возвращает детали одного ключа.

| Метод | Путь |
| :----- | :--- |
| GET | `/v1/organizations/{organizationId}/keys/{keyId}` |

### Запрос

#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID запрашиваемой организации. | 
| keyId | uuid | ID запрашиваемого ключа. | 


### Ответ

#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID API ключа. | 
| name | string | Имя ключа | 
| state | string | Состояние ключа: 'enabled', 'disabled'. | 
| roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| keySuffix | string | Последние 4 буквы ключа. | 
| createdAt | date-time | Время создания ключа. ISO-8601. | 
| expireAt | date-time | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| usedAt | date-time | Время последнего использования ключа. Если нет, ключ никогда не использовался. ISO-8601. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 


#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "state": "string",
  "roles": "Array",
  "keySuffix": "string",
  "createdAt": "date-time",
  "expireAt": "date-time",
  "usedAt": "date-time",
  "ipAccessList": "Array"
}
```

## Обновить ключ

Обновляет свойства API ключа.

| Метод | Путь |
| :----- | :--- |
| PATCH | `/v1/organizations/{organizationId}/keys/{keyId}` |

### Запрос

#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей ключом. | 
| keyId | uuid | ID ключа для обновления. | 

### Параметры тела

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| name | string | Имя ключа | 
| roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| expireAt | string | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| state | string | Состояние ключа: 'enabled', 'disabled'. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 

### Ответ

#### Схема ответа

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| id | uuid | Уникальный ID API ключа. | 
| name | string | Имя ключа | 
| state | string | Состояние ключа: 'enabled', 'disabled'. | 
| roles | array | Список ролей, назначенных ключу. Содержит по крайней мере 1 элемент. | 
| keySuffix | string | Последние 4 буквы ключа. | 
| createdAt | date-time | Время создания ключа. ISO-8601. | 
| expireAt | date-time | Время истечения срока действия ключа. Если нет или пуст, ключ никогда не истекает. ISO-8601. | 
| usedAt | date-time | Время последнего использования ключа. Если нет, ключ никогда не использовался. ISO-8601. | 
| ipAccessList | array | Список IP-адресов, которым разрешен доступ к API с использованием этого ключа | 


#### Пример ответа

```
{
  "id": "uuid",
  "name": "string",
  "state": "string",
  "roles": "Array",
  "keySuffix": "string",
  "createdAt": "date-time",
  "expireAt": "date-time",
  "usedAt": "date-time",
  "ipAccessList": "Array"
}
```

## Удалить ключ

Удаляет API ключ. Может быть удален только ключ, который не использовался для аутентификации активного запроса.

| Метод | Путь |
| :----- | :--- |
| DELETE | `/v1/organizations/{organizationId}/keys/{keyId}` |

### Запрос

#### Параметры пути

| Имя | Тип | Описание |
| :--- | :--- | :---------- |
| organizationId | uuid | ID организации, владеющей ключом. | 
| keyId | uuid | ID ключа для удаления. | 

