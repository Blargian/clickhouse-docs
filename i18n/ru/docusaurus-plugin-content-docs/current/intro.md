---
slug: /intro
sidebar_label: 'Что такое ClickHouse?'
description: 'ClickHouse® — это столбцовая система управления базами данных (СУБД) SQL для онлайн-аналитической обработки (OLAP). Она доступна как в виде программного обеспечения с открытым исходным кодом, так и в виде облачного решения.'
title: 'Что такое ClickHouse?'
---

import column_example from '@site/static/images/column-oriented-example-query.png';
import row_orientated from '@site/static/images/row-oriented.gif';
import column_orientated from '@site/static/images/column-oriented.gif';
import Image from '@theme/IdealImage';

ClickHouse® — это высокопроизводительная, столбцовая система управления базами данных (СУБД) SQL для онлайн-аналитической обработки (OLAP). Она доступна как в виде [программного обеспечения с открытым исходным кодом](https://github.com/ClickHouse/ClickHouse), так и в виде [облачного решения](https://clickhouse.com/cloud).

## Что такое аналитика? {#what-are-analytics}

Аналитика, также известная как OLAP (онлайн-аналитическая обработка), относится к SQL запросам с комплексными вычислениями (например, агрегациями, обработкой строк, арифметическими операциями) над массивами данных.

В отличие от транзакционных запросов (или OLTP, онлайн-транзакционная обработка), которые читают и записывают всего несколько строк за запрос и, следовательно, завершаются за миллисекунды, аналитические запросы обычно обрабатывают миллиарды и триллионы строк.

Во многих случаях аналитические запросы должны быть "в реальном времени", т.е. возвращать результат менее чем за одну секунду. 

## Хранилище, ориентированное на строки, против хранилища, ориентированного на столбцы {#row-oriented-vs-column-oriented-storage}

Такой уровень производительности может быть достигнут только при правильной "ориентации" данных.

Базы данных хранят данные либо [ориентированными на строки, либо ориентированными на столбцы](https://clickhouse.com/engineering-resources/what-is-columnar-database).

В ориентированной на строки базе данных последовательные строки таблицы последовательно хранятся одна за другой. Такая компоновка позволяет быстро извлекать строки, так как значения столбцов каждой строки хранятся вместе.

ClickHouse — это столбцовая база данных. В таких системах таблицы хранятся как коллекция столбцов, т.е. значения каждого столбца хранятся последовательно одна за другой. Эта компоновка усложняет восстановление отдельных строк (так как теперь есть промежутки между значениями строк), но операции со столбцами, такие как фильтры или агрегация, становятся намного быстрее, чем в базе данных, ориентированной на строки.

Разницу лучше всего объяснить с помощью примера запроса, выполняемого на 100 миллионах строк [реальных анонимизированных данных веб-аналитики](/getting-started/example-datasets/metrica):

```sql
SELECT MobilePhoneModel, COUNT() AS c
FROM metrica.hits
WHERE
      RegionID = 229
  AND EventDate >= '2013-07-01'
  AND EventDate <= '2013-07-31'
  AND MobilePhone != 0
  AND MobilePhoneModel not in ['', 'iPad']
GROUP BY MobilePhoneModel
ORDER BY c DESC
LIMIT 8;
```

Вы можете [выполнить этот запрос на ClickHouse SQL Playground](https://sql.clickhouse.com?query=U0VMRUNUIE1vYmlsZVBob25lTW9kZWwsIENPVU5UKCkgQVMgYyAKRlJPTSBtZXRyaWNhLmhpdHMgCldIRVJFIAogICAgICBSZWdpb25JRCA9IDIyOSAKICBBTkQgRXZlbnREYXRlID49ICcyMDEzLTA3LTAxJyAKICBBTkQgRXZlbnREYXRlIDw9ICcyMDEzLTA3LTMxJyAKICBBTkQgTW9iaWxlUGhvbmUgIT0gMCAKICBBTkQgTW9iaWxlUGhvbmVNb2RlbCBub3QgaW4gWycnLCAnaVBhZCddIApHUk9VUCBCWSBNb2JpbGVQaG9uZU1vZGVsCk9SREVSIEJZIGMgREVTQyAKTElNSVQgODs&chart=eyJ0eXBlIjoicGllIiwiY29uZmlnIjp7InhheGlzIjoiTW9iaWxlUGhvbmVNb2RlbCIsInhleGlzIjoiYyJ9fQ&run_query=true), который выбирает и фильтрует [только несколько из более чем 100](https://sql.clickhouse.com/?query=U0VMRUNUIG5hbWUKRlJPTSBzeXN0ZW0uY29sdW1ucwpXSEVSRSBkYXRhYmFzZSA9ICdtZXRyaWNhJyBBTkQgdGFibGUgPSAnaGl0cyc7&tab=results&run_query=true) существующих столбцов, возвращая результат за миллисекунды:

<Image img={column_example} alt="Пример запроса в столбцовой базе данных" size="lg"/>

Как видно в разделе статистики на приведенной выше диаграмме, запрос обработал 100 миллионов строк за 92 миллисекунды, с пропускной способностью примерно 300 миллионов строк или чуть меньше 7 ГБ в секунду.

**СУБД, ориентированные на строки**

В ориентированной на строки базе данных, даже если вышеупомянутый запрос обрабатывает только несколько из существующих столбцов, система все равно должна загрузить данные из других существующих столбцов с диска в память. Причина в том, что данные хранятся на диске в блоках, называемых [блоки](https://en.wikipedia.org/wiki/Block_(data_storage)) (обычно фиксированного размера, например, 4 КБ или 8 КБ). Блоки — это наименьшие единицы данных, считываемые с диска в память. Когда приложение или база данных запрашивают данные, подсистема ввода-вывода диска операционной системы считывает необходимые блоки с диска. Даже если требуется только часть блока, весь блок загружается в память (это связано с дизайном дисков и файловых систем):

<Image img={row_orientated} alt="Структура базы данных, ориентированной на строки" size="lg"/>

**СУБД, ориентированные на столбцы**

Поскольку значения каждого столбца хранятся последовательно одно за другим на диске, никакие ненужные данные не загружаются, когда выполняется приведенный выше запрос.
Поскольку блочная память и передача с диска в память согласованы с шаблоном доступа к данным аналитических запросов, только столбцы, необходимые для выполнения запроса, читаются с диска, избегая ненужного ввода-вывода для неиспользуемых данных. Это [гораздо быстрее](https://benchmark.clickhouse.com/) по сравнению с хранилищем, основанным на строках, где считываются целые строки (включая несуществующие столбцы):

<Image img={column_orientated} alt="Структура базы данных, ориентированной на столбцы" size="lg"/>

## Репликация данных и целостность {#data-replication-and-integrity}

ClickHouse использует асинхронную многомастеровую схему репликации для обеспечения резервного хранения данных на нескольких узлах. После записи данных в любую доступную реплику все оставшиеся реплики получают свою копию в фоновом режиме. Система поддерживает идентичные данные на разных репликах. Восстановление после большинства сбоев выполняется автоматически или полууточненно в сложных случаях.

## Контроль доступа на основе ролей {#role-based-access-control}

ClickHouse реализует управление учетными записями пользователей с помощью SQL запросов и позволяет настраивать контроль доступа на основе ролей, аналогично тому, что можно найти в стандартах ANSI SQL и популярных системах управления реляционными базами данных.

## Поддержка SQL {#sql-support}

ClickHouse поддерживает [декларативный язык запросов на основе SQL](/sql-reference), который во многих случаях идентичен стандарту ANSI SQL. Поддерживаемые конструкции запросов включают [GROUP BY](/sql-reference/statements/select/group-by), [ORDER BY](/sql-reference/statements/select/order-by), подзапросы в [FROM](/sql-reference/statements/select/from), [JOIN](/sql-reference/statements/select/join) клаузел, оператор [IN](/sql-reference/operators/in), [оконные функции](/sql-reference/window-functions) и скалярные подзапросы.

## Приблизительные вычисления {#approximate-calculation}

ClickHouse предоставляет способы обмена точностью на производительность. Например, некоторые из его агрегатных функций приближенно вычисляют количество уникальных значений, медиану и процентиль. Кроме того, запросы могут выполняться на выборке данных для быстрого вычисления приблизительного результата. Наконец, агрегации могут выполняться с ограниченным числом ключей вместо всех ключей. В зависимости от того, насколько асимметрично распределены ключи, это может предоставить достаточно точный результат, использующий гораздо меньше ресурсов, чем точное вычисление.

## Адаптивные алгоритмы соединения {#adaptive-join-algorithms}

ClickHouse адаптивно выбирает алгоритм соединения, начиная с быстрых хеш-соединений и переходя к слиянию соединений, если имеется более одной большой таблицы.

## Превосходная производительность запросов {#superior-query-performance}

ClickHouse известен своей крайне быстрой производительностью запросов.
Чтобы узнать, почему ClickHouse так быстр, смотрите руководство [Почему ClickHouse быстрый?](/concepts/why-clickhouse-is-so-fast.md).
