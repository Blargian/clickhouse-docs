---
title: 'Postgres生成カラム: 注意点とベストプラクティス'
slug: /integrations/clickpipes/postgres/generated_columns
description: 'レプリケートされているテーブルでPostgreSQL生成カラムを使用する際に、注意すべき重要な考慮事項を説明するページ'
---

PostgreSQLの生成カラムをレプリケートされているテーブルで使用する際には、いくつかの重要な考慮事項があります。これらの注意点は、レプリケーションプロセスや宛先システムでのデータの整合性に影響を与える可能性があります。

## 生成カラムの問題 {#the-problem-with-generated-columns}

1. **`pgoutput`を介して公開されない:** 生成カラムは、`pgoutput`論理レプリケーションプラグインを通じて公開されません。これは、PostgreSQLから別のシステムにデータをレプリケートするときに、生成カラムの値がレプリケーションストリームに含まれないことを意味します。

2. **主キーに関する問題:** 生成カラムが主キーの一部である場合、宛先での重複排除に問題を引き起こす可能性があります。生成カラムの値がレプリケートされないため、宛先システムは行を適切に識別し、重複を排除するために必要な情報を持っていません。

## ベストプラクティス {#best-practices}

これらの制限を回避するために、次のベストプラクティスを考慮してください：

1. **宛先で生成カラムを再作成する:** 生成カラムを処理するためにレプリケーションプロセスに依存するのではなく、dbt（data build tool）やその他のデータ変換メカニズムを使用して、宛先でこれらのカラムを再作成することをお勧めします。

2. **主キーに生成カラムを使用しない:** レプリケートされるテーブルを設計する際には、生成カラムを主キーの一部として含めることは避けるのがベストです。

## 今後のUI改善 {#upcoming-improvements-to-ui}

今後のバージョンでは、ユーザーをサポートするためのUIを追加する計画です：

1. **生成カラムを持つテーブルの特定:** UIには、生成カラムを含むテーブルを特定する機能があります。これにより、ユーザーはこの問題に影響を受けるテーブルを理解できるようになります。

2. **ドキュメントとベストプラクティス:** UIには、レプリケートテーブルで生成カラムを使用するためのベストプラクティスが含まれ、一般的な落とし穴を避けるためのガイダンスも提供されます。
