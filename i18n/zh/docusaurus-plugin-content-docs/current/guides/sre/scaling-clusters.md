---
'slug': '/guides/sre/scaling-clusters'
'sidebar_label': '重新平衡分片'
'sidebar_position': 20
'description': 'ClickHouse 不支持自动分片重新平衡，因此我们提供了一些重新平衡分片的最佳实践。'
'title': '数据重新平衡'
---


# 重新平衡数据

ClickHouse 不支持自动分片重新平衡。然而，有一些方式可以按照优先级重新平衡分片：

1. 调整 [分布式表](/engines/table-engines/special/distributed.md) 的分片，使写入偏向于新的分片。这可能会导致集群负载不均衡和热点，但在写入吞吐量并不是极高的大多数场景中是可行的。它不要求用户更改他们的写入目标，即可以保持为分布式表。这并不帮助已有数据的重新平衡。

2. 作为（1）的替代方案，修改现有集群并专门向新分片写入，直到集群平衡 - 手动加权写入。这具有与（1）相同的限制。

3. 如果您需要重新平衡现有数据并且已对数据进行分区，请考虑分离分区并手动将它们重新定位到另一个节点，然后再重新附加到新的分片。这比后续技术更手动，但可能更快且资源消耗更少。这是一个手动操作，因此需要考虑数据的重新平衡。

4. 通过 [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select) 将数据从源集群导出到新集群。这在非常大的数据集上性能不佳，并且可能会对源集群造成显著的 IO 影响，并使用大量的网络资源。这是最后的手段。
