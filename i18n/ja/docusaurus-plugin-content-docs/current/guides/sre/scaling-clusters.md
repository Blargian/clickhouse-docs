---
slug: /guides/sre/scaling-clusters
sidebar_label: シャードの再バランス
sidebar_position: 20
description: ClickHouseは自動シャード再バランスをサポートしていないため、シャードを再バランスするためのベストプラクティスを提供します。
---

# データの再バランス

ClickHouseは自動シャード再バランスをサポートしていません。しかし、シャードを再バランスする方法はいくつかあります。以下の順序で行うことを推奨します。

1. [分散テーブル](/engines/table-engines/special/distributed.md)のシャードを調整し、新しいシャードへの書き込みを偏らせることができます。これにより、クラスター内での負荷の不均衡やホットスポットが発生する可能性がありますが、書き込みスループットが極端に高くないほとんどのシナリオでは有効です。ユーザーは書き込みターゲットを変更する必要はなく、分散テーブルのままで構いません。これは既存データの再バランスには役立ちません。

2. （1）の代替として、既存のクラスターを変更し、新しいシャードに専属で書き込みを行い、クラスターがバランスするまで手動で書き込みに重み付けをします。これは（1）と同じ制限があります。

3. 既存データを再バランスする必要があり、データをパーティション分けしている場合、パーティションを切り離してから別のノードに手動で移動し、新しいシャードに再接続することを検討してください。これは後続の技術よりも手動ではありますが、迅速かつリソース消費が少ない場合があります。この操作は手動で行う必要があるため、データの再バランスを考慮する必要があります。

4. [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select)を使用して、ソースクラスターから新しいクラスターにデータをエクスポートします。これは非常に大きなデータセットではパフォーマンスが劣り、ソースクラスターでのIOが大きくなり、かなりのネットワークリソースを使用する可能性があります。これは最終手段として考えるべきです。
