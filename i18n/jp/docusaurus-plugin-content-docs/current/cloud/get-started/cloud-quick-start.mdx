---
'sidebar_position': 1
'slug': '/cloud/get-started/cloud-quick-start'
'sidebar_label': 'Cloud Quick Start'
'keywords':
- 'clickhouse'
- 'install'
- 'getting started'
- 'quick start'
'pagination_next': 'cloud/get-started/sql-console'
'title': 'ClickHouse Cloud クイックスタート'
'description': 'ClickHouse Cloud のクイックスタートガイド'
---

import Image from '@theme/IdealImage';
import signup_page from '@site/static/images/_snippets/signup_page.png';
import select_plan from '@site/static/images/_snippets/select_plan.png';
import createservice1 from '@site/static/images/_snippets/createservice1.png';
import scaling_limits from '@site/static/images/_snippets/scaling_limits.png';
import createservice8 from '@site/static/images/_snippets/createservice8.png';
import show_databases from '@site/static/images/_snippets/show_databases.png';
import service_connect from '@site/static/images/_snippets/service_connect.png';
import data_sources from '@site/static/images/_snippets/data_sources.png';
import select_data_source from '@site/static/images/_snippets/select_data_source.png';
import client_details from '@site/static/images/_snippets/client_details.png';
import new_rows_from_csv from '@site/static/images/_snippets/new_rows_from_csv.png';
import SQLConsoleDetail from '@site/i18n/jp/docusaurus-plugin-content-docs/current/_snippets/_launch_sql_console.md';

```md

# ClickHouse Cloud クイックスタート

ClickHouse を始める最も迅速で簡単な方法は、[ClickHouse Cloud](https://console.clickhouse.cloud) に新しいサービスを作成することです。

<VerticalStepper type="numbered">

## ClickHouse サービスの作成 {#1-create-a-clickhouse-service}

[ClickHouse Cloud](https://console.clickhouse.cloud) で無料の ClickHouse サービスを作成するには、以下の手順を完了してサインアップする必要があります：

  - [サインアップページ](https://console.clickhouse.cloud/signUp) でアカウントを作成します
  - メールまたは Google SSO、Microsoft SSO、AWS Marketplace、Google Cloud、Microsoft Azure のいずれかを使用してサインアップできます
  - メールとパスワードでサインアップする場合は、次の 24 時間以内にメールで受け取ったリンクを使用してメールアドレスを確認してください
  - 作成したユーザー名とパスワードでログインします

<Image img={signup_page} size="md" alt='プランの選択' border/>
<br/>

ログインすると、ClickHouse Cloud のオンボーディングウィザードが開始され、新しい ClickHouse サービスの作成に導かれます。最初に、[プランを選択](/cloud/manage/cloud-tiers)することを求められます：

<Image img={select_plan} size="md" alt='プランの選択' border/>
<br/>

:::tip
ほとんどのワークロードには Scale ティアをお勧めします。
ティアの詳細については、[こちら](/cloud/manage/cloud-tiers)をご覧ください。
:::

新しいサービスをデプロイするために希望するリージョンを選択する必要があります。
利用可能なオプションは選択したティアによって異なります。
以下のステップでは、ユーザーが推奨の Scale ティアを選択したと仮定しています。

サービスをデプロイするための希望のリージョンを選択し、新しいサービスに名前を付けます：

<Image img={createservice1} size="md" alt='新しい ClickHouse サービス' border/>
<br/>

デフォルトでは、スケールテイアは 4 VCPU および 16 GiB RAM を持つ 3 つのレプリカを作成します。[垂直オートスケーリング](/manage/scaling#vertical-auto-scaling)は、Scale ティアでデフォルトで有効になります。

ユーザーは必要に応じてサービスリソースをカスタマイズでき、レプリカがスケーリングする最小サイズと最大サイズを指定できます。準備ができたら、`Create service` を選択します。

<Image img={scaling_limits} size="md" alt='スケーリング制限' border/>
<br/>

おめでとうございます！ ClickHouse Cloud サービスが立ち上がり、オンボーディングが完了しました。データの取り込みとクエリの実行を開始する方法について、引き続きお読みください。

## ClickHouse への接続 {#2-connect-to-clickhouse}
ClickHouse への接続方法は 2 つあります：
  - ウェブベースの SQL コンソールを使用して接続
  - アプリから接続
<br/>
### SQL コンソールを使用して接続 {#connect-using-sql-console}

迅速に開始するために、ClickHouse ではオンボーディングを完了するとリダイレクトされるウェブベースの SQL コンソールを提供しています。

<Image img={createservice8} size="md" alt='SQL コンソール' border/>


クエリタブを作成し、接続が機能していることを確認するためのシンプルなクエリを入力します：

```sql
SHOW databases
```

リストに 4 つのデータベースが表示され、その中に自分が追加したものも含まれているはずです。

<Image img={show_databases} size="md" alt='SQL コンソール' border/>
<br/>


これで、新しい ClickHouse サービスの使用を開始できる準備が整いました！

### アプリを使って接続 {#connect-with-your-app}

ナビゲーションメニューから接続ボタンを押します。モーダルが開き、サービスの資格情報を提供し、インターフェースまたは言語クライアントへの接続方法に関する一連の手順が表示されます。

<Image img={service_connect} size="md" alt='サービス接続' border/>
<br/>

言語クライアントが表示されない場合は、[統合リスト](/integrations)を確認してください。

## データの追加 {#3-add-data}

ClickHouse はデータと共により良くなります！ データを追加する方法はいくつかあり、そのほとんどはナビゲーションメニューからアクセスできるデータソースページで利用可能です。

<Image img={data_sources} size="md" alt='データソース' border/>
<br/>

以下の方法でデータをアップロードできます：
  - S3、Postgres、Kafka、GCS などのデータソースからデータを取得するための ClickPipe を設定する
  - SQL コンソールを使用する
  - ClickHouse クライアントを使用する
  - ファイルをアップロードする - 受け入れられるフォーマットには JSON、CSV、TSV が含まれる
  - ファイル URL からデータをアップロードする

### ClickPipes {#clickpipes}

[ClickPipes](http://clickhouse.com/docs/integrations/clickpipes) は、多様なソースからデータを取得する作業を簡単にするための管理された統合プラットフォームです。最も要求を満たすワークロードのために設計された ClickPipes の堅牢でスケーラブルなアーキテクチャは、一貫したパフォーマンスと信頼性を保証します。ClickPipes は長期ストリーミングニーズまたは一度きりのデータロードジョブに使用できます。

<Image img={select_data_source} size="md" alt='データソースの選択' border/>
<br/>

### SQL コンソールを使用してデータを追加 {#add-data-using-the-sql-console}

ほとんどのデータベース管理システムと同様に、ClickHouse はテーブルを **データベース** に論理的にグループ化します。ClickHouse で新しいデータベースを作成するには [`CREATE DATABASE`](../../sql-reference/statements/create/database.md) コマンドを使用します：

```sql
CREATE DATABASE IF NOT EXISTS helloworld
```

次のコマンドを実行して、`helloworld` データベース内に `my_first_table` という名前のテーブルを作成します：

```sql
CREATE TABLE helloworld.my_first_table
(
    user_id UInt32,
    message String,
    timestamp DateTime,
    metric Float32
)
ENGINE = MergeTree()
PRIMARY KEY (user_id, timestamp)
```

上記の例では、`my_first_table` は 4 つのカラムを持つ [`MergeTree`](../../engines/table-engines/mergetree-family/mergetree.md) テーブルです：

  - `user_id`:  32 ビットの符号なし整数 ([UInt32](../../sql-reference/data-types/int-uint.md))
  - `message`: [String](../../sql-reference/data-types/string.md) データ型で、他のデータベースシステムの `VARCHAR`、`BLOB`、`CLOB` などのタイプを置き換えます
  - `timestamp`: [DateTime](../../sql-reference/data-types/datetime.md) 値で、時点を表します
  - `metric`: 32 ビットの浮動小数点数 ([Float32](../../sql-reference/data-types/float.md))

:::note テーブルエンジン
テーブルエンジンは以下を決定します：
  - データがどのように、どこに保存されるか
  - サポートされるクエリ
  - データがレプリケーションされるかどうか
<br/>
選択できるテーブルエンジンは多く存在しますが、単一ノードの ClickHouse サーバーでのシンプルなテーブルには [`MergeTree`](/engines/table-engines/mergetree-family/mergetree.md) が適しているでしょう。
:::

#### 主キーの簡単な紹介 {#a-brief-intro-to-primary-keys}

進む前に、ClickHouse における主キーの機能を理解することが重要です（主キーの実装は予想外のものに見えるかもしれません！）：

  - ClickHouse における主キーはテーブル内の各行に対して **_一意ではない_** です

ClickHouse テーブルの主キーは、ディスクに書き込む際のデータの並び順を決定します。8192 行または 10MB のデータごとに（**インデックスの粒度**と呼ばれます）、主キーインデックスファイルにエントリが作成されます。この粒度の概念は、簡単にメモリ内に収まる **スパースインデックス** を作り、グラニュールは `SELECT` クエリの際に処理される最小のカラムデータのストライプを表します。

主キーは `PRIMARY KEY` パラメータを使用して定義できます。`PRIMARY KEY` が指定されていないテーブルを定義すると、キーは `ORDER BY` 句に指定されたタプルになります。`PRIMARY KEY` と `ORDER BY` の両方を指定すると、主キーはソート順のサブセットでなければなりません。

主キーはまた、`(user_id, timestamp)` のタプルであるソートキーでもあります。したがって、各カラムファイルに格納されるデータは `user_id` で、次に `timestamp` でソートされます。

ClickHouse のコア概念について詳しくは、["Core Concepts"](../../managing-data/core-concepts/index.md) を参照してください。

#### テーブルへのデータの挿入 {#insert-data-into-your-table}

ClickHouse ではおなじみの [`INSERT INTO TABLE`](../../sql-reference/statements/insert-into.md) コマンドを使用できますが、[`MergeTree`](/engines/table-engines/mergetree-family/mergetree.md) テーブルへの各挿入により、ストレージ内に **パーツ** が作成されることを理解することが重要です。

:::tip ClickHouse ベストプラクティス
バッチごとに大量の行を挿入します - 数万行または数百万行を一度に挿入してください。心配しないでください - ClickHouse はそのようなボリュームを簡単に処理できます - そして、サービスへの書き込みリクエストを減らすことで [コストを節約](/best-practices/selecting-an-insert-strategy#batch-inserts-if-synchronous) できます。
:::

<br/>

シンプルな例でも、同時に 1 行以上を挿入しましょう：

```sql
INSERT INTO helloworld.my_first_table (user_id, message, timestamp, metric) VALUES
    (101, 'Hello, ClickHouse!',                                 now(),       -1.0    ),
    (102, 'Insert a lot of rows per batch',                     yesterday(), 1.41421 ),
    (102, 'Sort your data based on your commonly-used queries', today(),     2.718   ),
    (101, 'Granules are the smallest chunks of data read',      now() + 5,   3.14159 )
```

:::note
`timestamp` カラムはさまざまな [**Date**](../../sql-reference/data-types/date.md) と [**DateTime**](../../sql-reference/data-types/datetime.md) 関数を使用して生成されることに注意してください。ClickHouse には役立つ関数が数百ありますので、[**Functions**セクション](/sql-reference/functions/) で確認できます。
:::

正常に動作したことを確認しましょう：

```sql
SELECT * FROM helloworld.my_first_table
```

### ClickHouse クライアントを使用してデータを追加 {#add-data-using-the-clickhouse-client}

コマンドラインツール [**clickhouse client**](/interfaces/cli) を使用して、ClickHouse Cloud サービスに接続することもできます。左のメニューから `Connect` をクリックしてこれらの詳細にアクセスします。ダイアログからドロップダウンリストで `Native` を選択します：

<Image img={client_details} size="md" alt='clickhouse client 接続詳細' border/>
<br/>

1. [ClickHouse](/interfaces/cli) をインストールします。

2. 次のコマンドを実行し、ホスト名、ユーザー名、およびパスワードを置き換えます：

```bash
./clickhouse client --host HOSTNAME.REGION.CSP.clickhouse.cloud \
--secure --port 9440 \
--user default \
--password <password>
```
スマイルマークのプロンプトが表示されたら、クエリを実行する準備が整ったことを示しています！
```response
:)
```

3. 次のクエリを実行して試してみてください：

<br/>

```sql
SELECT *
FROM helloworld.my_first_table
ORDER BY timestamp
```

応答がきれいなテーブル形式で返されることに注意してください：

```response
┌─user_id─┬─message────────────────────────────────────────────┬───────────timestamp─┬──metric─┐
│     102 │ Insert a lot of rows per batch                     │ 2022-03-21 00:00:00 │ 1.41421 │
│     102 │ Sort your data based on your commonly-used queries │ 2022-03-22 00:00:00 │   2.718 │
│     101 │ Hello, ClickHouse!                                 │ 2022-03-22 14:04:09 │      -1 │
│     101 │ Granules are the smallest chunks of data read      │ 2022-03-22 14:04:14 │ 3.14159 │
└─────────┴────────────────────────────────────────────────────┴─────────────────────┴─────────┘

4 行がセットにあります。経過時間: 0.008 秒。
```

4. [`FORMAT`](../../sql-reference/statements/select/format.md) 句を追加して、ClickHouse の [多くのサポートされた出力フォーマット](/interfaces/formats/) の 1 つを指定します：

<br/>

```sql
SELECT *
FROM helloworld.my_first_table
ORDER BY timestamp
FORMAT TabSeparated
```
上記のクエリでは、出力がタブ区切りで返されます：
```response
クエリ ID: 3604df1c-acfd-4117-9c56-f86c69721121

102 Insert a lot of rows per batch      2022-03-21 00:00:00     1.41421
102 Sort your data based on your commonly-used queries  2022-03-22 00:00:00     2.718
101 Hello, ClickHouse!  2022-03-22 14:04:09     -1
101 Granules are the smallest chunks of data read       2022-03-22 14:04:14     3.14159

4 行がセットにあります。経過時間: 0.005 秒。
```

5. `clickhouse client` を終了するには、**exit** コマンドを入力します：

<br/>

```bash
exit
```

### ファイルをアップロード {#upload-a-file}

データベースを始める際によくあるタスクは、既にファイルにあるデータを挿入することです。クリックストリームデータを表すサンプルデータがオンラインにあります - それにはユーザー ID、訪問した URL、イベントのタイムスタンプが含まれます。

`data.csv` という CSV ファイルに以下のテキストが含まれているとします：

```bash title="data.csv"
102,これはファイル内のデータです,2022-02-22 10:43:28,123.45
101,カンマ区切りです,2022-02-23 00:00:00,456.78
103,FORMAT を使用してフォーマットを指定します,2022-02-21 10:43:30,678.90
```

1. 次のコマンドが `my_first_table` にデータを挿入します：

<br/>

```bash
./clickhouse client --host HOSTNAME.REGION.CSP.clickhouse.cloud \
--secure --port 9440 \
--user default \
--password <password> \
--query='INSERT INTO helloworld.my_first_table FORMAT CSV' < data.csv
```

2. SQL コンソールからクエリを実行すると新しい行がテーブルに表示されることに注意してください：

<br/>

<Image img={new_rows_from_csv} size="md" alt='CSV ファイルからの新しい行' />
<br/>

<VerticalStepper/>

## 次は何をしますか？ {#whats-next}

- [チュートリアル](/tutorial.md)では、テーブルに 200 万行を挿入し、いくつかの分析クエリを書きます。
- 挿入方法に関する指示がある [サンプルデータセット](/getting-started/index.md) のリストがあります。
- [ClickHouse の使い始め方](https://clickhouse.com/company/events/getting-started-with-clickhouse/) に関する 25 分のビデオをチェックしてください。
- 外部ソースからデータが来ている場合、メッセージキュー、データベース、パイプラインなどへの接続に関する [統合ガイドのコレクション](/integrations/index.mdx) を確認してください。
- UI/BI 可視化ツールを使用している場合は、ClickHouse への UI 接続に関する [ユーザーガイド](/integrations/data-visualization) を参照してください。
- [主キー](/guides/best-practices/sparse-primary-indexes.md) に関するユーザーガイドは、主キーおよびその定義方法について知っておくべきすべてのことです。
