---
description: 'Применяет тест Колмогорова-Смирнова к выборкам из двух популяций.'
sidebar_label: 'kolmogorovSmirnovTest'
sidebar_position: 156
slug: /sql-reference/aggregate-functions/reference/kolmogorovsmirnovtest
title: 'kolmogorovSmirnovTest'
---


# kolmogorovSmirnovTest

Применяет тест Колмогорова-Смирнова к выборкам из двух популяций.

**Синтаксис**

```sql
kolmogorovSmirnovTest([alternative, computation_method])(sample_data, sample_index)
```

Значения обеих выборок находятся в колонке `sample_data`. Если `sample_index` равно 0, то значение в этой строке принадлежит выборке из первой популяции. В противном случае оно принадлежит выборке из второй популяции. Выборки должны принадлежать непрерывным однодельным распределениям вероятностей.

**Аргументы**

- `sample_data` — Данные выборки. [Целое](../../../sql-reference/data-types/int-uint.md), [С плавающей точкой](../../../sql-reference/data-types/float.md) или [Десятичное](../../../sql-reference/data-types/decimal.md).
- `sample_index` — Индекс выборки. [Целое](../../../sql-reference/data-types/int-uint.md).

**Параметры**

- `alternative` — альтернативная гипотеза. (Необязательный, по умолчанию: `'two-sided'`.) [Строка](../../../sql-reference/data-types/string.md).
    Пусть F(x) и G(x) будут ФКД первых и вторых распределений соответственно.
    - `'two-sided'`
        Нулевая гипотеза заключается в том, что выборки происходят из одного и того же распределения, т.е. `F(x) = G(x)` для всех x.
        А альтернативная состоит в том, что распределения не идентичны.
    - `'greater'`
        Нулевая гипотеза заключается в том, что значения в первой выборке *стохастически меньше* значений из второй,
        т.е. ФКД первого распределения лежит выше и, соответственно, слева от второго.
        Это на самом деле означает, что `F(x) >= G(x)` для всех x. А альтернативная в этом случае состоит в том, что `F(x) < G(x)` для хотя бы одного x.
    - `'less'`.
        Нулевая гипотеза заключается в том, что значения в первой выборке *стохастически больше* значений из второй,
        т.е. ФКД первого распределения лежит ниже и, соответственно, справа от второго.
        Это на самом деле означает, что `F(x) <= G(x)` для всех x. А альтернативная в этом случае состоит в том, что `F(x) > G(x)` для хотя бы одного x.
- `computation_method` — метод, используемый для вычисления p-value. (Необязательный, по умолчанию: `'auto'`.) [Строка](../../../sql-reference/data-types/string.md).
    - `'exact'` - вычисление производится с использованием точного распределения вероятностей статистики теста. Требует много вычислительных ресурсов и неэффективно для больших выборок.
    - `'asymp'` (`'asymptotic'`) - вычисление производится с использованием аппроксимации. Для больших размеров выборок точные и асимптотические p-values очень похожи.
    - `'auto'`  - метод `'exact'` используется, когда максимальное количество выборок меньше 10'000.


**Возвращаемые значения**

[Кортеж](../../../sql-reference/data-types/tuple.md) с двумя элементами:

- вычисленное статистическое значение. [Float64](../../../sql-reference/data-types/float.md).
- вычисленный p-value. [Float64](../../../sql-reference/data-types/float.md).


**Пример**

Запрос:

```sql
SELECT kolmogorovSmirnovTest('less', 'exact')(value, num)
FROM
(
    SELECT
        randNormal(0, 10) AS value,
        0 AS num
    FROM numbers(10000)
    UNION ALL
    SELECT
        randNormal(0, 10) AS value,
        1 AS num
    FROM numbers(10000)
)
```

Результат:

```text
┌─kolmogorovSmirnovTest('less', 'exact')(value, num)─┐
│ (0.009899999999999996,0.37528595205132287)         │
└────────────────────────────────────────────────────┘
```

Примечание:
P-value больше 0.05 (для уровня доверия 95%), поэтому нулевая гипотеза не отклоняется.


Запрос:

```sql
SELECT kolmogorovSmirnovTest('two-sided', 'exact')(value, num)
FROM
(
    SELECT
        randStudentT(10) AS value,
        0 AS num
    FROM numbers(100)
    UNION ALL
    SELECT
        randNormal(0, 10) AS value,
        1 AS num
    FROM numbers(100)
)
```

Результат:

```text
┌─kolmogorovSmirnovTest('two-sided', 'exact')(value, num)─┐
│ (0.4100000000000002,6.61735760482795e-8)                │
└─────────────────────────────────────────────────────────┘
```

Примечание:
P-value меньше 0.05 (для уровня доверия 95%), поэтому нулевая гипотеза отклоняется.


**См. также**

- [Тест Колмогорова-Смирнова](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test)
